(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Ty(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xh={exports:{}},Ia={},Yh={exports:{}},be={};var Gm;function hw(){if(Gm)return be;Gm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,H={};function F(O,G,fe){this.props=O,this.context=G,this.refs=H,this.updater=fe||M}F.prototype.isReactComponent={},F.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},F.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function q(){}q.prototype=F.prototype;function W(O,G,fe){this.props=O,this.context=G,this.refs=H,this.updater=fe||M}var ne=W.prototype=new q;ne.constructor=W,P(ne,F.prototype),ne.isPureReactComponent=!0;var se=Array.isArray,Ee=Object.prototype.hasOwnProperty,ie={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function T(O,G,fe){var Ce,Ne={},Pe=null,je=null;if(G!=null)for(Ce in G.ref!==void 0&&(je=G.ref),G.key!==void 0&&(Pe=""+G.key),G)Ee.call(G,Ce)&&!R.hasOwnProperty(Ce)&&(Ne[Ce]=G[Ce]);var Oe=arguments.length-2;if(Oe===1)Ne.children=fe;else if(1<Oe){for(var qe=Array(Oe),xt=0;xt<Oe;xt++)qe[xt]=arguments[xt+2];Ne.children=qe}if(O&&O.defaultProps)for(Ce in Oe=O.defaultProps,Oe)Ne[Ce]===void 0&&(Ne[Ce]=Oe[Ce]);return{$$typeof:r,type:O,key:Pe,ref:je,props:Ne,_owner:ie.current}}function k(O,G){return{$$typeof:r,type:O.type,key:G,ref:O.ref,props:O.props,_owner:O._owner}}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function j(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return G[fe]})}var V=/\/+/g;function S(O,G){return typeof O=="object"&&O!==null&&O.key!=null?j(""+O.key):G.toString(36)}function ot(O,G,fe,Ce,Ne){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var je=!1;if(O===null)je=!0;else switch(Pe){case"string":case"number":je=!0;break;case"object":switch(O.$$typeof){case r:case e:je=!0}}if(je)return je=O,Ne=Ne(je),O=Ce===""?"."+S(je,0):Ce,se(Ne)?(fe="",O!=null&&(fe=O.replace(V,"$&/")+"/"),ot(Ne,G,fe,"",function(xt){return xt})):Ne!=null&&(N(Ne)&&(Ne=k(Ne,fe+(!Ne.key||je&&je.key===Ne.key?"":(""+Ne.key).replace(V,"$&/")+"/")+O)),G.push(Ne)),1;if(je=0,Ce=Ce===""?".":Ce+":",se(O))for(var Oe=0;Oe<O.length;Oe++){Pe=O[Oe];var qe=Ce+S(Pe,Oe);je+=ot(Pe,G,fe,qe,Ne)}else if(qe=b(O),typeof qe=="function")for(O=qe.call(O),Oe=0;!(Pe=O.next()).done;)Pe=Pe.value,qe=Ce+S(Pe,Oe++),je+=ot(Pe,G,fe,qe,Ne);else if(Pe==="object")throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return je}function wt(O,G,fe){if(O==null)return O;var Ce=[],Ne=0;return ot(O,Ce,"","",function(Pe){return G.call(fe,Pe,Ne++)}),Ce}function Pt(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var ze={current:null},te={transition:null},ye={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:te,ReactCurrentOwner:ie};function oe(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:wt,forEach:function(O,G,fe){wt(O,function(){G.apply(this,arguments)},fe)},count:function(O){var G=0;return wt(O,function(){G++}),G},toArray:function(O){return wt(O,function(G){return G})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},be.Component=F,be.Fragment=t,be.Profiler=o,be.PureComponent=W,be.StrictMode=i,be.Suspense=y,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,be.act=oe,be.cloneElement=function(O,G,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ce=P({},O.props),Ne=O.key,Pe=O.ref,je=O._owner;if(G!=null){if(G.ref!==void 0&&(Pe=G.ref,je=ie.current),G.key!==void 0&&(Ne=""+G.key),O.type&&O.type.defaultProps)var Oe=O.type.defaultProps;for(qe in G)Ee.call(G,qe)&&!R.hasOwnProperty(qe)&&(Ce[qe]=G[qe]===void 0&&Oe!==void 0?Oe[qe]:G[qe])}var qe=arguments.length-2;if(qe===1)Ce.children=fe;else if(1<qe){Oe=Array(qe);for(var xt=0;xt<qe;xt++)Oe[xt]=arguments[xt+2];Ce.children=Oe}return{$$typeof:r,type:O.type,key:Ne,ref:Pe,props:Ce,_owner:je}},be.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},be.createElement=T,be.createFactory=function(O){var G=T.bind(null,O);return G.type=O,G},be.createRef=function(){return{current:null}},be.forwardRef=function(O){return{$$typeof:f,render:O}},be.isValidElement=N,be.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:Pt}},be.memo=function(O,G){return{$$typeof:_,type:O,compare:G===void 0?null:G}},be.startTransition=function(O){var G=te.transition;te.transition={};try{O()}finally{te.transition=G}},be.unstable_act=oe,be.useCallback=function(O,G){return ze.current.useCallback(O,G)},be.useContext=function(O){return ze.current.useContext(O)},be.useDebugValue=function(){},be.useDeferredValue=function(O){return ze.current.useDeferredValue(O)},be.useEffect=function(O,G){return ze.current.useEffect(O,G)},be.useId=function(){return ze.current.useId()},be.useImperativeHandle=function(O,G,fe){return ze.current.useImperativeHandle(O,G,fe)},be.useInsertionEffect=function(O,G){return ze.current.useInsertionEffect(O,G)},be.useLayoutEffect=function(O,G){return ze.current.useLayoutEffect(O,G)},be.useMemo=function(O,G){return ze.current.useMemo(O,G)},be.useReducer=function(O,G,fe){return ze.current.useReducer(O,G,fe)},be.useRef=function(O){return ze.current.useRef(O)},be.useState=function(O){return ze.current.useState(O)},be.useSyncExternalStore=function(O,G,fe){return ze.current.useSyncExternalStore(O,G,fe)},be.useTransition=function(){return ze.current.useTransition()},be.version="18.3.1",be}var Km;function $d(){return Km||(Km=1,Yh.exports=hw()),Yh.exports}var Qm;function dw(){if(Qm)return Ia;Qm=1;var r=$d(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,y,_){var E,A={},b=null,M=null;_!==void 0&&(b=""+_),y.key!==void 0&&(b=""+y.key),y.ref!==void 0&&(M=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(A[E]=y[E]);if(f&&f.defaultProps)for(E in y=f.defaultProps,y)A[E]===void 0&&(A[E]=y[E]);return{$$typeof:e,type:f,key:b,ref:M,props:A,_owner:o.current}}return Ia.Fragment=t,Ia.jsx=h,Ia.jsxs=h,Ia}var Xm;function fw(){return Xm||(Xm=1,Xh.exports=dw()),Xh.exports}var g=fw(),me=$d();const pw=Ty(me);var Tu={},Jh={exports:{}},fn={},Zh={exports:{}},ed={};var Ym;function mw(){return Ym||(Ym=1,(function(r){function e(te,ye){var oe=te.length;te.push(ye);e:for(;0<oe;){var O=oe-1>>>1,G=te[O];if(0<o(G,ye))te[O]=ye,te[oe]=G,oe=O;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ye=te[0],oe=te.pop();if(oe!==ye){te[0]=oe;e:for(var O=0,G=te.length,fe=G>>>1;O<fe;){var Ce=2*(O+1)-1,Ne=te[Ce],Pe=Ce+1,je=te[Pe];if(0>o(Ne,oe))Pe<G&&0>o(je,Ne)?(te[O]=je,te[Pe]=oe,O=Pe):(te[O]=Ne,te[Ce]=oe,O=Ce);else if(Pe<G&&0>o(je,oe))te[O]=je,te[Pe]=oe,O=Pe;else break e}}return ye}function o(te,ye){var oe=te.sortIndex-ye.sortIndex;return oe!==0?oe:te.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var y=[],_=[],E=1,A=null,b=3,M=!1,P=!1,H=!1,F=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(te){for(var ye=t(_);ye!==null;){if(ye.callback===null)i(_);else if(ye.startTime<=te)i(_),ye.sortIndex=ye.expirationTime,e(y,ye);else break;ye=t(_)}}function se(te){if(H=!1,ne(te),!P)if(t(y)!==null)P=!0,Pt(Ee);else{var ye=t(_);ye!==null&&ze(se,ye.startTime-te)}}function Ee(te,ye){P=!1,H&&(H=!1,q(T),T=-1),M=!0;var oe=b;try{for(ne(ye),A=t(y);A!==null&&(!(A.expirationTime>ye)||te&&!j());){var O=A.callback;if(typeof O=="function"){A.callback=null,b=A.priorityLevel;var G=O(A.expirationTime<=ye);ye=r.unstable_now(),typeof G=="function"?A.callback=G:A===t(y)&&i(y),ne(ye)}else i(y);A=t(y)}if(A!==null)var fe=!0;else{var Ce=t(_);Ce!==null&&ze(se,Ce.startTime-ye),fe=!1}return fe}finally{A=null,b=oe,M=!1}}var ie=!1,R=null,T=-1,k=5,N=-1;function j(){return!(r.unstable_now()-N<k)}function V(){if(R!==null){var te=r.unstable_now();N=te;var ye=!0;try{ye=R(!0,te)}finally{ye?S():(ie=!1,R=null)}}else ie=!1}var S;if(typeof W=="function")S=function(){W(V)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,wt=ot.port2;ot.port1.onmessage=V,S=function(){wt.postMessage(null)}}else S=function(){F(V,0)};function Pt(te){R=te,ie||(ie=!0,S())}function ze(te,ye){T=F(function(){te(r.unstable_now())},ye)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){P||M||(P=!0,Pt(Ee))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(te){switch(b){case 1:case 2:case 3:var ye=3;break;default:ye=b}var oe=b;b=ye;try{return te()}finally{b=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,ye){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var oe=b;b=te;try{return ye()}finally{b=oe}},r.unstable_scheduleCallback=function(te,ye,oe){var O=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?O+oe:O):oe=O,te){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=oe+G,te={id:E++,callback:ye,priorityLevel:te,startTime:oe,expirationTime:G,sortIndex:-1},oe>O?(te.sortIndex=oe,e(_,te),t(y)===null&&te===t(_)&&(H?(q(T),T=-1):H=!0,ze(se,oe-O))):(te.sortIndex=G,e(y,te),P||M||(P=!0,Pt(Ee))),te},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(te){var ye=b;return function(){var oe=b;b=ye;try{return te.apply(this,arguments)}finally{b=oe}}}})(ed)),ed}var Jm;function gw(){return Jm||(Jm=1,Zh.exports=mw()),Zh.exports}var Zm;function yw(){if(Zm)return fn;Zm=1;var r=$d(),e=gw();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},A={};function b(n){return y.call(A,n)?!0:y.call(E,n)?!1:_.test(n)?A[n]=!0:(E[n]=!0,!1)}function M(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P(n,s,a,c){if(s===null||typeof s>"u"||M(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function H(n,s,a,c,d,m,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=m,this.removeEmptyString=w}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];F[s]=new H(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function W(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(q,W);F[s]=new H(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(q,W);F[s]=new H(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(q,W);F[s]=new H(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function ne(n,s,a,c){var d=F.hasOwnProperty(s)?F[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(P(s,a,d,c)&&(a=null),c||d===null?b(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var se=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),ie=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),j=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),te=Symbol.iterator;function ye(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,O;function G(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var fe=!1;function Ce(n,s){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var c=B}Reflect.construct(n,[],s)}else{try{s.call()}catch(B){c=B}n.call(s.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),m=c.stack.split(`
`),w=d.length-1,I=m.length-1;1<=w&&0<=I&&d[w]!==m[I];)I--;for(;1<=w&&0<=I;w--,I--)if(d[w]!==m[I]){if(w!==1||I!==1)do if(w--,I--,0>I||d[w]!==m[I]){var C=`
`+d[w].replace(" at new "," at ");return n.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",n.displayName)),C}while(1<=w&&0<=I);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function Ne(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Ce(n.type,!1),n;case 11:return n=Ce(n.type.render,!1),n;case 1:return n=Ce(n.type,!0),n;default:return""}}function Pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case ie:return"Portal";case k:return"Profiler";case T:return"StrictMode";case S:return"Suspense";case ot:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case j:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case wt:return s=n.displayName||null,s!==null?s:Pe(n.type)||"Memo";case Pt:s=n._payload,n=n._init;try{return Pe(n(s))}catch{}}return null}function je(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Oe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function xt(n){var s=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,m.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function jn(n){n._valueTracker||(n._valueTracker=xt(n))}function ht(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function rr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ar(n,s){var a=s.checked;return oe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Zr(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Oe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Fs(n,s){s=s.checked,s!=null&&ne(n,"checked",s,!1)}function zs(n,s){Fs(n,s);var a=Oe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?es(n,s.type,a):s.hasOwnProperty("defaultValue")&&es(n,s.type,Oe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Pi(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function es(n,s,a){(s!=="number"||rr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var On=Array.isArray;function Mn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Oe(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Bs(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ts(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(On(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Oe(a)}}function ns(n,s){var a=Oe(s.value),c=Oe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function $s(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function mt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?mt(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vn,Hs=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Vn=Vn||document.createElement("div"),Vn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Vn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function re(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var le={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];Object.keys(le).forEach(function(n){ge.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),le[s]=le[n]})});function nt(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||le.hasOwnProperty(n)&&le[n]?(""+s).trim():s+"px"}function Ge(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=nt(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var We=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Et(n,s){if(s){if(We[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Be(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ye=null;function Ln(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var sr=null,Tn=null,ir=null;function bi(n){if(n=ua(n)){if(typeof sr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Ll(s),sr(n.stateNode,n.type,s))}}function or(n){Tn?ir?ir.push(n):ir=[n]:Tn=n}function Fo(){if(Tn){var n=Tn,s=ir;if(ir=Tn=null,bi(n),s)for(n=0;n<s.length;n++)bi(s[n])}}function qs(n,s){return n(s)}function zo(){}var Rr=!1;function Bo(n,s,a){if(Rr)return n(s,a);Rr=!0;try{return qs(n,s,a)}finally{Rr=!1,(Tn!==null||ir!==null)&&(zo(),Fo())}}function yt(n,s){var a=n.stateNode;if(a===null)return null;var c=Ll(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Di=!1;if(f)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){Di=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{Di=!1}function Ws(n,s,a,c,d,m,w,I,C){var B=Array.prototype.slice.call(arguments,3);try{s.apply(a,B)}catch(Q){this.onError(Q)}}var Gs=!1,ji=null,Fn=!1,$o=null,Ic={onError:function(n){Gs=!0,ji=n}};function Oi(n,s,a,c,d,m,w,I,C){Gs=!1,ji=null,Ws.apply(Ic,arguments)}function ul(n,s,a,c,d,m,w,I,C){if(Oi.apply(this,arguments),Gs){if(Gs){var B=ji;Gs=!1,ji=null}else throw Error(t(198));Fn||(Fn=!0,$o=B)}}function zn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ks(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Bn(n){if(zn(n)!==n)throw Error(t(188))}function cl(n){var s=n.alternate;if(!s){if(s=zn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Bn(d),n;if(m===c)return Bn(d),s;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var w=!1,I=d.child;I;){if(I===a){w=!0,a=d,c=m;break}if(I===c){w=!0,c=d,a=m;break}I=I.sibling}if(!w){for(I=m.child;I;){if(I===a){w=!0,a=m,c=d;break}if(I===c){w=!0,c=m,a=d;break}I=I.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Ho(n){return n=cl(n),n!==null?Mi(n):null}function Mi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Mi(n);if(s!==null)return s;n=n.sibling}return null}var Vi=e.unstable_scheduleCallback,qo=e.unstable_cancelCallback,hl=e.unstable_shouldYield,kc=e.unstable_requestPaint,Je=e.unstable_now,dl=e.unstable_getCurrentPriorityLevel,Qs=e.unstable_ImmediatePriority,rs=e.unstable_UserBlockingPriority,In=e.unstable_NormalPriority,Wo=e.unstable_LowPriority,fl=e.unstable_IdlePriority,Xs=null,pn=null;function pl(n){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Xs,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:gl,Go=Math.log,ml=Math.LN2;function gl(n){return n>>>=0,n===0?32:31-(Go(n)/ml|0)|0}var Li=64,Ui=4194304;function ss(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ys(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,w=a&268435455;if(w!==0){var I=w&~d;I!==0?c=ss(I):(m&=w,m!==0&&(c=ss(m)))}else w=a&~d,w!==0?c=ss(w):m!==0&&(c=ss(m));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,m=s&-s,d>=m||d===16&&(m&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-en(s),d=1<<a,c|=n[a],s&=~d;return c}function Sc(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var w=31-en(m),I=1<<w,C=d[w];C===-1?((I&a)===0||(I&c)!==0)&&(d[w]=Sc(I,s)):C<=s&&(n.expiredLanes|=I),m&=~I}}function mn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Js(){var n=Li;return Li<<=1,(Li&4194240)===0&&(Li=64),n}function is(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function os(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-en(s),n[s]=a}function Xe(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-en(a),m=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function as(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-en(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Me=0;function ls(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var yl,Fi,vl,_l,wl,Ko=!1,ar=[],Lt=null,$n=null,Hn=null,us=new Map,kn=new Map,lr=[],Ac="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xl(n,s){switch(n){case"focusin":case"focusout":Lt=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":us.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":kn.delete(s.pointerId)}}function on(n,s,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},s!==null&&(s=ua(s),s!==null&&Fi(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Rc(n,s,a,c,d){switch(s){case"focusin":return Lt=on(Lt,n,s,a,c,d),!0;case"dragenter":return $n=on($n,n,s,a,c,d),!0;case"mouseover":return Hn=on(Hn,n,s,a,c,d),!0;case"pointerover":var m=d.pointerId;return us.set(m,on(us.get(m)||null,n,s,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,kn.set(m,on(kn.get(m)||null,n,s,a,c,d)),!0}return!1}function El(n){var s=ri(n.target);if(s!==null){var a=zn(s);if(a!==null){if(s=a.tag,s===13){if(s=Ks(a),s!==null){n.blockedOn=s,wl(n.priority,function(){vl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Nr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=zi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ye=c,a.target.dispatchEvent(c),Ye=null}else return s=ua(a),s!==null&&Fi(s),n.blockedOn=a,!1;s.shift()}return!0}function Zs(n,s,a){Nr(n)&&a.delete(s)}function Tl(){Ko=!1,Lt!==null&&Nr(Lt)&&(Lt=null),$n!==null&&Nr($n)&&($n=null),Hn!==null&&Nr(Hn)&&(Hn=null),us.forEach(Zs),kn.forEach(Zs)}function qn(n,s){n.blockedOn===s&&(n.blockedOn=null,Ko||(Ko=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Tl)))}function Wn(n){function s(d){return qn(d,n)}if(0<ar.length){qn(ar[0],n);for(var a=1;a<ar.length;a++){var c=ar[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Lt!==null&&qn(Lt,n),$n!==null&&qn($n,n),Hn!==null&&qn(Hn,n),us.forEach(s),kn.forEach(s),a=0;a<lr.length;a++)c=lr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<lr.length&&(a=lr[0],a.blockedOn===null);)El(a),a.blockedOn===null&&lr.shift()}var Pr=se.ReactCurrentBatchConfig,cs=!0;function rt(n,s,a,c){var d=Me,m=Pr.transition;Pr.transition=null;try{Me=1,Qo(n,s,a,c)}finally{Me=d,Pr.transition=m}}function Cc(n,s,a,c){var d=Me,m=Pr.transition;Pr.transition=null;try{Me=4,Qo(n,s,a,c)}finally{Me=d,Pr.transition=m}}function Qo(n,s,a,c){if(cs){var d=zi(n,s,a,c);if(d===null)Fc(n,s,c,ei,a),xl(n,c);else if(Rc(d,n,s,a,c))c.stopPropagation();else if(xl(n,c),s&4&&-1<Ac.indexOf(n)){for(;d!==null;){var m=ua(d);if(m!==null&&yl(m),m=zi(n,s,a,c),m===null&&Fc(n,s,c,ei,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Fc(n,s,c,null,a)}}var ei=null;function zi(n,s,a,c){if(ei=null,n=Ln(c),n=ri(n),n!==null)if(s=zn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ks(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return ei=n,null}function Xo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dl()){case Qs:return 1;case rs:return 4;case In:case Wo:return 16;case fl:return 536870912;default:return 16}default:return 16}}var gn=null,Bi=null,an=null;function Yo(){if(an)return an;var n,s=Bi,a=s.length,c,d="value"in gn?gn.value:gn.textContent,m=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[m-c];c++);return an=d.slice(n,1<c?1-c:void 0)}function $i(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ur(){return!0}function Jo(){return!1}function Ut(n){function s(a,c,d,m,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(a=n[I],this[I]=a?a(m):m[I]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ur:Jo,this.isPropagationStopped=Jo,this}return oe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),s}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hi=Ut(Gn),cr=oe({},Gn,{view:0,detail:0}),Nc=Ut(cr),qi,br,hs,ti=oe({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hs&&(hs&&n.type==="mousemove"?(qi=n.screenX-hs.screenX,br=n.screenY-hs.screenY):br=qi=0,hs=n),qi)},movementY:function(n){return"movementY"in n?n.movementY:br}}),Wi=Ut(ti),Zo=oe({},ti,{dataTransfer:0}),Il=Ut(Zo),Gi=oe({},cr,{relatedTarget:0}),Ki=Ut(Gi),kl=oe({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Dr=Ut(kl),Sl=oe({},Gn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Al=Ut(Sl),Rl=oe({},Gn,{data:0}),ea=Ut(Rl),Qi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Cl[n])?!!s[n]:!1}function hr(){return Nl}var u=oe({},cr,{key:function(n){if(n.key){var s=Qi[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=$i(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hr,charCode:function(n){return n.type==="keypress"?$i(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$i(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=Ut(u),v=oe({},ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x=Ut(v),L=oe({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hr}),$=Ut(L),ee=oe({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ke=Ut(ee),St=oe({},ti,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Ut(St),bt=[9,13,27,32],Tt=f&&"CompositionEvent"in window,Sn=null;f&&"documentMode"in document&&(Sn=document.documentMode);var yn=f&&"TextEvent"in window&&!Sn,ni=f&&(!Tt||Sn&&8<Sn&&11>=Sn),Xi=" ",zf=!1;function Bf(n,s){switch(n){case"keyup":return bt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $f(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yi=!1;function l_(n,s){switch(n){case"compositionend":return $f(s);case"keypress":return s.which!==32?null:(zf=!0,Xi);case"textInput":return n=s.data,n===Xi&&zf?null:n;default:return null}}function u_(n,s){if(Yi)return n==="compositionend"||!Tt&&Bf(n,s)?(n=Yo(),an=Bi=gn=null,Yi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ni&&s.locale!=="ko"?null:s.data;default:return null}}var c_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!c_[n.type]:s==="textarea"}function qf(n,s,a,c){or(c),s=Ol(s,"onChange"),0<s.length&&(a=new Hi("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ta=null,na=null;function h_(n){up(n,0)}function Pl(n){var s=no(n);if(ht(s))return n}function d_(n,s){if(n==="change")return s}var Wf=!1;if(f){var Pc;if(f){var bc="oninput"in document;if(!bc){var Gf=document.createElement("div");Gf.setAttribute("oninput","return;"),bc=typeof Gf.oninput=="function"}Pc=bc}else Pc=!1;Wf=Pc&&(!document.documentMode||9<document.documentMode)}function Kf(){ta&&(ta.detachEvent("onpropertychange",Qf),na=ta=null)}function Qf(n){if(n.propertyName==="value"&&Pl(na)){var s=[];qf(s,na,n,Ln(n)),Bo(h_,s)}}function f_(n,s,a){n==="focusin"?(Kf(),ta=s,na=a,ta.attachEvent("onpropertychange",Qf)):n==="focusout"&&Kf()}function p_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pl(na)}function m_(n,s){if(n==="click")return Pl(s)}function g_(n,s){if(n==="input"||n==="change")return Pl(s)}function y_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Kn=typeof Object.is=="function"?Object.is:y_;function ra(n,s){if(Kn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!y.call(s,d)||!Kn(n[d],s[d]))return!1}return!0}function Xf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Yf(n,s){var a=Xf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xf(a)}}function Jf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Jf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Zf(){for(var n=window,s=rr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=rr(n.document)}return s}function Dc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function v_(n){var s=Zf(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Jf(a.ownerDocument.documentElement,a)){if(c!==null&&Dc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=Yf(a,m);var w=Yf(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var __=f&&"documentMode"in document&&11>=document.documentMode,Ji=null,jc=null,sa=null,Oc=!1;function ep(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Oc||Ji==null||Ji!==rr(c)||(c=Ji,"selectionStart"in c&&Dc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),sa&&ra(sa,c)||(sa=c,c=Ol(jc,"onSelect"),0<c.length&&(s=new Hi("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Ji)))}function bl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Zi={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},Mc={},tp={};f&&(tp=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function Dl(n){if(Mc[n])return Mc[n];if(!Zi[n])return n;var s=Zi[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in tp)return Mc[n]=s[a];return n}var np=Dl("animationend"),rp=Dl("animationiteration"),sp=Dl("animationstart"),ip=Dl("transitionend"),op=new Map,ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ds(n,s){op.set(n,s),l(s,[n])}for(var Vc=0;Vc<ap.length;Vc++){var Lc=ap[Vc],w_=Lc.toLowerCase(),x_=Lc[0].toUpperCase()+Lc.slice(1);ds(w_,"on"+x_)}ds(np,"onAnimationEnd"),ds(rp,"onAnimationIteration"),ds(sp,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(ip,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function lp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,ul(c,s,void 0,n),n.currentTarget=null}function up(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(s)for(var w=c.length-1;0<=w;w--){var I=c[w],C=I.instance,B=I.currentTarget;if(I=I.listener,C!==m&&d.isPropagationStopped())break e;lp(d,I,B),m=C}else for(w=0;w<c.length;w++){if(I=c[w],C=I.instance,B=I.currentTarget,I=I.listener,C!==m&&d.isPropagationStopped())break e;lp(d,I,B),m=C}}}if(Fn)throw n=$o,Fn=!1,$o=null,n}function et(n,s){var a=s[Wc];a===void 0&&(a=s[Wc]=new Set);var c=n+"__bubble";a.has(c)||(cp(s,n,2,!1),a.add(c))}function Uc(n,s,a){var c=0;s&&(c|=4),cp(a,n,c,s)}var jl="_reactListening"+Math.random().toString(36).slice(2);function oa(n){if(!n[jl]){n[jl]=!0,i.forEach(function(a){a!=="selectionchange"&&(E_.has(a)||Uc(a,!1,n),Uc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[jl]||(s[jl]=!0,Uc("selectionchange",!1,s))}}function cp(n,s,a,c){switch(Xo(s)){case 1:var d=rt;break;case 4:d=Cc;break;default:d=Qo}a=d.bind(null,s,a,n),d=void 0,!Di||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Fc(n,s,a,c,d){var m=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var I=c.stateNode.containerInfo;if(I===d||I.nodeType===8&&I.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var C=w.tag;if((C===3||C===4)&&(C=w.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;w=w.return}for(;I!==null;){if(w=ri(I),w===null)return;if(C=w.tag,C===5||C===6){c=m=w;continue e}I=I.parentNode}}c=c.return}Bo(function(){var B=m,Q=Ln(a),J=[];e:{var K=op.get(n);if(K!==void 0){var ae=Hi,ce=n;switch(n){case"keypress":if($i(a)===0)break e;case"keydown":case"keyup":ae=p;break;case"focusin":ce="focus",ae=Ki;break;case"focusout":ce="blur",ae=Ki;break;case"beforeblur":case"afterblur":ae=Ki;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Wi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Il;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=$;break;case np:case rp:case sp:ae=Dr;break;case ip:ae=Ke;break;case"scroll":ae=Nc;break;case"wheel":ae=Le;break;case"copy":case"cut":case"paste":ae=Al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=x}var he=(s&4)!==0,vt=!he&&n==="scroll",U=he?K!==null?K+"Capture":null:K;he=[];for(var D=B,z;D!==null;){z=D;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,U!==null&&(Z=yt(D,U),Z!=null&&he.push(aa(D,Z,z)))),vt)break;D=D.return}0<he.length&&(K=new ae(K,ce,null,a,Q),J.push({event:K,listeners:he}))}}if((s&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",K&&a!==Ye&&(ce=a.relatedTarget||a.fromElement)&&(ri(ce)||ce[jr]))break e;if((ae||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,ae?(ce=a.relatedTarget||a.toElement,ae=B,ce=ce?ri(ce):null,ce!==null&&(vt=zn(ce),ce!==vt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ae=null,ce=B),ae!==ce)){if(he=Wi,Z="onMouseLeave",U="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(he=x,Z="onPointerLeave",U="onPointerEnter",D="pointer"),vt=ae==null?K:no(ae),z=ce==null?K:no(ce),K=new he(Z,D+"leave",ae,a,Q),K.target=vt,K.relatedTarget=z,Z=null,ri(Q)===B&&(he=new he(U,D+"enter",ce,a,Q),he.target=z,he.relatedTarget=vt,Z=he),vt=Z,ae&&ce)t:{for(he=ae,U=ce,D=0,z=he;z;z=eo(z))D++;for(z=0,Z=U;Z;Z=eo(Z))z++;for(;0<D-z;)he=eo(he),D--;for(;0<z-D;)U=eo(U),z--;for(;D--;){if(he===U||U!==null&&he===U.alternate)break t;he=eo(he),U=eo(U)}he=null}else he=null;ae!==null&&hp(J,K,ae,he,!1),ce!==null&&vt!==null&&hp(J,vt,ce,he,!0)}}e:{if(K=B?no(B):window,ae=K.nodeName&&K.nodeName.toLowerCase(),ae==="select"||ae==="input"&&K.type==="file")var pe=d_;else if(Hf(K))if(Wf)pe=g_;else{pe=p_;var _e=f_}else(ae=K.nodeName)&&ae.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(pe=m_);if(pe&&(pe=pe(n,B))){qf(J,pe,a,Q);break e}_e&&_e(n,K,B),n==="focusout"&&(_e=K._wrapperState)&&_e.controlled&&K.type==="number"&&es(K,"number",K.value)}switch(_e=B?no(B):window,n){case"focusin":(Hf(_e)||_e.contentEditable==="true")&&(Ji=_e,jc=B,sa=null);break;case"focusout":sa=jc=Ji=null;break;case"mousedown":Oc=!0;break;case"contextmenu":case"mouseup":case"dragend":Oc=!1,ep(J,a,Q);break;case"selectionchange":if(__)break;case"keydown":case"keyup":ep(J,a,Q)}var we;if(Tt)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Yi?Bf(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(ni&&a.locale!=="ko"&&(Yi||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Yi&&(we=Yo()):(gn=Q,Bi="value"in gn?gn.value:gn.textContent,Yi=!0)),_e=Ol(B,Te),0<_e.length&&(Te=new ea(Te,n,null,a,Q),J.push({event:Te,listeners:_e}),we?Te.data=we:(we=$f(a),we!==null&&(Te.data=we)))),(we=yn?l_(n,a):u_(n,a))&&(B=Ol(B,"onBeforeInput"),0<B.length&&(Q=new ea("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:B}),Q.data=we))}up(J,s)})}function aa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ol(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=yt(n,a),m!=null&&c.unshift(aa(n,m,d)),m=yt(n,s),m!=null&&c.push(aa(n,m,d))),n=n.return}return c}function eo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function hp(n,s,a,c,d){for(var m=s._reactName,w=[];a!==null&&a!==c;){var I=a,C=I.alternate,B=I.stateNode;if(C!==null&&C===c)break;I.tag===5&&B!==null&&(I=B,d?(C=yt(a,m),C!=null&&w.unshift(aa(a,C,I))):d||(C=yt(a,m),C!=null&&w.push(aa(a,C,I)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var T_=/\r\n?/g,I_=/\u0000|\uFFFD/g;function dp(n){return(typeof n=="string"?n:""+n).replace(T_,`
`).replace(I_,"")}function Ml(n,s,a){if(s=dp(s),dp(n)!==s&&a)throw Error(t(425))}function Vl(){}var zc=null,Bc=null;function $c(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hc=typeof setTimeout=="function"?setTimeout:void 0,k_=typeof clearTimeout=="function"?clearTimeout:void 0,fp=typeof Promise=="function"?Promise:void 0,S_=typeof queueMicrotask=="function"?queueMicrotask:typeof fp<"u"?function(n){return fp.resolve(null).then(n).catch(A_)}:Hc;function A_(n){setTimeout(function(){throw n})}function qc(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Wn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Wn(s)}function fs(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function pp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var to=Math.random().toString(36).slice(2),dr="__reactFiber$"+to,la="__reactProps$"+to,jr="__reactContainer$"+to,Wc="__reactEvents$"+to,R_="__reactListeners$"+to,C_="__reactHandles$"+to;function ri(n){var s=n[dr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[jr]||a[dr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=pp(n);n!==null;){if(a=n[dr])return a;n=pp(n)}return s}n=a,a=n.parentNode}return null}function ua(n){return n=n[dr]||n[jr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function no(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ll(n){return n[la]||null}var Gc=[],ro=-1;function ps(n){return{current:n}}function tt(n){0>ro||(n.current=Gc[ro],Gc[ro]=null,ro--)}function Ze(n,s){ro++,Gc[ro]=n.current,n.current=s}var ms={},Wt=ps(ms),ln=ps(!1),si=ms;function so(n,s){var a=n.type.contextTypes;if(!a)return ms;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=s[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function un(n){return n=n.childContextTypes,n!=null}function Ul(){tt(ln),tt(Wt)}function mp(n,s,a){if(Wt.current!==ms)throw Error(t(168));Ze(Wt,s),Ze(ln,a)}function gp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,je(n)||"Unknown",d));return oe({},a,c)}function Fl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ms,si=Wt.current,Ze(Wt,n),Ze(ln,ln.current),!0}function yp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=gp(n,s,si),c.__reactInternalMemoizedMergedChildContext=n,tt(ln),tt(Wt),Ze(Wt,n)):tt(ln),Ze(ln,a)}var Or=null,zl=!1,Kc=!1;function vp(n){Or===null?Or=[n]:Or.push(n)}function N_(n){zl=!0,vp(n)}function gs(){if(!Kc&&Or!==null){Kc=!0;var n=0,s=Me;try{var a=Or;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Or=null,zl=!1}catch(d){throw Or!==null&&(Or=Or.slice(n+1)),Vi(Qs,gs),d}finally{Me=s,Kc=!1}}return null}var io=[],oo=0,Bl=null,$l=0,An=[],Rn=0,ii=null,Mr=1,Vr="";function oi(n,s){io[oo++]=$l,io[oo++]=Bl,Bl=n,$l=s}function _p(n,s,a){An[Rn++]=Mr,An[Rn++]=Vr,An[Rn++]=ii,ii=n;var c=Mr;n=Vr;var d=32-en(c)-1;c&=~(1<<d),a+=1;var m=32-en(s)+d;if(30<m){var w=d-d%5;m=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Mr=1<<32-en(s)+d|a<<d|c,Vr=m+n}else Mr=1<<m|a<<d|c,Vr=n}function Qc(n){n.return!==null&&(oi(n,1),_p(n,1,0))}function Xc(n){for(;n===Bl;)Bl=io[--oo],io[oo]=null,$l=io[--oo],io[oo]=null;for(;n===ii;)ii=An[--Rn],An[Rn]=null,Vr=An[--Rn],An[Rn]=null,Mr=An[--Rn],An[Rn]=null}var vn=null,_n=null,st=!1,Qn=null;function wp(n,s){var a=bn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function xp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,vn=n,_n=fs(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,vn=n,_n=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ii!==null?{id:Mr,overflow:Vr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=bn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,vn=n,_n=null,!0):!1;default:return!1}}function Yc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Jc(n){if(st){var s=_n;if(s){var a=s;if(!xp(n,s)){if(Yc(n))throw Error(t(418));s=fs(a.nextSibling);var c=vn;s&&xp(n,s)?wp(c,a):(n.flags=n.flags&-4097|2,st=!1,vn=n)}}else{if(Yc(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,vn=n}}}function Ep(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vn=n}function Hl(n){if(n!==vn)return!1;if(!st)return Ep(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!$c(n.type,n.memoizedProps)),s&&(s=_n)){if(Yc(n))throw Tp(),Error(t(418));for(;s;)wp(n,s),s=fs(s.nextSibling)}if(Ep(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){_n=fs(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}_n=null}}else _n=vn?fs(n.stateNode.nextSibling):null;return!0}function Tp(){for(var n=_n;n;)n=fs(n.nextSibling)}function ao(){_n=vn=null,st=!1}function Zc(n){Qn===null?Qn=[n]:Qn.push(n)}var P_=se.ReactCurrentBatchConfig;function ca(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===m?s.ref:(s=function(w){var I=d.refs;w===null?delete I[m]:I[m]=w},s._stringRef=m,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ql(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Ip(n){var s=n._init;return s(n._payload)}function kp(n){function s(U,D){if(n){var z=U.deletions;z===null?(U.deletions=[D],U.flags|=16):z.push(D)}}function a(U,D){if(!n)return null;for(;D!==null;)s(U,D),D=D.sibling;return null}function c(U,D){for(U=new Map;D!==null;)D.key!==null?U.set(D.key,D):U.set(D.index,D),D=D.sibling;return U}function d(U,D){return U=Is(U,D),U.index=0,U.sibling=null,U}function m(U,D,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<D?(U.flags|=2,D):z):(U.flags|=2,D)):(U.flags|=1048576,D)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function I(U,D,z,Z){return D===null||D.tag!==6?(D=Hh(z,U.mode,Z),D.return=U,D):(D=d(D,z),D.return=U,D)}function C(U,D,z,Z){var pe=z.type;return pe===R?Q(U,D,z.props.children,Z,z.key):D!==null&&(D.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Pt&&Ip(pe)===D.type)?(Z=d(D,z.props),Z.ref=ca(U,D,z),Z.return=U,Z):(Z=mu(z.type,z.key,z.props,null,U.mode,Z),Z.ref=ca(U,D,z),Z.return=U,Z)}function B(U,D,z,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=qh(z,U.mode,Z),D.return=U,D):(D=d(D,z.children||[]),D.return=U,D)}function Q(U,D,z,Z,pe){return D===null||D.tag!==7?(D=pi(z,U.mode,Z,pe),D.return=U,D):(D=d(D,z),D.return=U,D)}function J(U,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Hh(""+D,U.mode,z),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ee:return z=mu(D.type,D.key,D.props,null,U.mode,z),z.ref=ca(U,null,D),z.return=U,z;case ie:return D=qh(D,U.mode,z),D.return=U,D;case Pt:var Z=D._init;return J(U,Z(D._payload),z)}if(On(D)||ye(D))return D=pi(D,U.mode,z,null),D.return=U,D;ql(U,D)}return null}function K(U,D,z,Z){var pe=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return pe!==null?null:I(U,D,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Ee:return z.key===pe?C(U,D,z,Z):null;case ie:return z.key===pe?B(U,D,z,Z):null;case Pt:return pe=z._init,K(U,D,pe(z._payload),Z)}if(On(z)||ye(z))return pe!==null?null:Q(U,D,z,Z,null);ql(U,z)}return null}function ae(U,D,z,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return U=U.get(z)||null,I(D,U,""+Z,pe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ee:return U=U.get(Z.key===null?z:Z.key)||null,C(D,U,Z,pe);case ie:return U=U.get(Z.key===null?z:Z.key)||null,B(D,U,Z,pe);case Pt:var _e=Z._init;return ae(U,D,z,_e(Z._payload),pe)}if(On(Z)||ye(Z))return U=U.get(z)||null,Q(D,U,Z,pe,null);ql(D,Z)}return null}function ce(U,D,z,Z){for(var pe=null,_e=null,we=D,Te=D=0,Ot=null;we!==null&&Te<z.length;Te++){we.index>Te?(Ot=we,we=null):Ot=we.sibling;var $e=K(U,we,z[Te],Z);if($e===null){we===null&&(we=Ot);break}n&&we&&$e.alternate===null&&s(U,we),D=m($e,D,Te),_e===null?pe=$e:_e.sibling=$e,_e=$e,we=Ot}if(Te===z.length)return a(U,we),st&&oi(U,Te),pe;if(we===null){for(;Te<z.length;Te++)we=J(U,z[Te],Z),we!==null&&(D=m(we,D,Te),_e===null?pe=we:_e.sibling=we,_e=we);return st&&oi(U,Te),pe}for(we=c(U,we);Te<z.length;Te++)Ot=ae(we,U,Te,z[Te],Z),Ot!==null&&(n&&Ot.alternate!==null&&we.delete(Ot.key===null?Te:Ot.key),D=m(Ot,D,Te),_e===null?pe=Ot:_e.sibling=Ot,_e=Ot);return n&&we.forEach(function(ks){return s(U,ks)}),st&&oi(U,Te),pe}function he(U,D,z,Z){var pe=ye(z);if(typeof pe!="function")throw Error(t(150));if(z=pe.call(z),z==null)throw Error(t(151));for(var _e=pe=null,we=D,Te=D=0,Ot=null,$e=z.next();we!==null&&!$e.done;Te++,$e=z.next()){we.index>Te?(Ot=we,we=null):Ot=we.sibling;var ks=K(U,we,$e.value,Z);if(ks===null){we===null&&(we=Ot);break}n&&we&&ks.alternate===null&&s(U,we),D=m(ks,D,Te),_e===null?pe=ks:_e.sibling=ks,_e=ks,we=Ot}if($e.done)return a(U,we),st&&oi(U,Te),pe;if(we===null){for(;!$e.done;Te++,$e=z.next())$e=J(U,$e.value,Z),$e!==null&&(D=m($e,D,Te),_e===null?pe=$e:_e.sibling=$e,_e=$e);return st&&oi(U,Te),pe}for(we=c(U,we);!$e.done;Te++,$e=z.next())$e=ae(we,U,Te,$e.value,Z),$e!==null&&(n&&$e.alternate!==null&&we.delete($e.key===null?Te:$e.key),D=m($e,D,Te),_e===null?pe=$e:_e.sibling=$e,_e=$e);return n&&we.forEach(function(cw){return s(U,cw)}),st&&oi(U,Te),pe}function vt(U,D,z,Z){if(typeof z=="object"&&z!==null&&z.type===R&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Ee:e:{for(var pe=z.key,_e=D;_e!==null;){if(_e.key===pe){if(pe=z.type,pe===R){if(_e.tag===7){a(U,_e.sibling),D=d(_e,z.props.children),D.return=U,U=D;break e}}else if(_e.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Pt&&Ip(pe)===_e.type){a(U,_e.sibling),D=d(_e,z.props),D.ref=ca(U,_e,z),D.return=U,U=D;break e}a(U,_e);break}else s(U,_e);_e=_e.sibling}z.type===R?(D=pi(z.props.children,U.mode,Z,z.key),D.return=U,U=D):(Z=mu(z.type,z.key,z.props,null,U.mode,Z),Z.ref=ca(U,D,z),Z.return=U,U=Z)}return w(U);case ie:e:{for(_e=z.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(U,D.sibling),D=d(D,z.children||[]),D.return=U,U=D;break e}else{a(U,D);break}else s(U,D);D=D.sibling}D=qh(z,U.mode,Z),D.return=U,U=D}return w(U);case Pt:return _e=z._init,vt(U,D,_e(z._payload),Z)}if(On(z))return ce(U,D,z,Z);if(ye(z))return he(U,D,z,Z);ql(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(a(U,D.sibling),D=d(D,z),D.return=U,U=D):(a(U,D),D=Hh(z,U.mode,Z),D.return=U,U=D),w(U)):a(U,D)}return vt}var lo=kp(!0),Sp=kp(!1),Wl=ps(null),Gl=null,uo=null,eh=null;function th(){eh=uo=Gl=null}function nh(n){var s=Wl.current;tt(Wl),n._currentValue=s}function rh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function co(n,s){Gl=n,eh=uo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(cn=!0),n.firstContext=null)}function Cn(n){var s=n._currentValue;if(eh!==n)if(n={context:n,memoizedValue:s,next:null},uo===null){if(Gl===null)throw Error(t(308));uo=n,Gl.dependencies={lanes:0,firstContext:n}}else uo=uo.next=n;return s}var ai=null;function sh(n){ai===null?ai=[n]:ai.push(n)}function Ap(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,sh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Lr(n,c)}function Lr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ys=!1;function ih(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ur(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function vs(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Fe&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Lr(n,a)}return d=c.interleaved,d===null?(s.next=s,sh(c)):(s.next=d.next,d.next=s),c.interleaved=s,Lr(n,a)}function Kl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,as(n,a)}}function Cp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=s:m=m.next=s}else d=m=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Ql(n,s,a,c){var d=n.updateQueue;ys=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,I=d.shared.pending;if(I!==null){d.shared.pending=null;var C=I,B=C.next;C.next=null,w===null?m=B:w.next=B,w=C;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,I=Q.lastBaseUpdate,I!==w&&(I===null?Q.firstBaseUpdate=B:I.next=B,Q.lastBaseUpdate=C))}if(m!==null){var J=d.baseState;w=0,Q=B=C=null,I=m;do{var K=I.lane,ae=I.eventTime;if((c&K)===K){Q!==null&&(Q=Q.next={eventTime:ae,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var ce=n,he=I;switch(K=s,ae=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){J=ce.call(ae,J,K);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,K=typeof ce=="function"?ce.call(ae,J,K):ce,K==null)break e;J=oe({},J,K);break e;case 2:ys=!0}}I.callback!==null&&I.lane!==0&&(n.flags|=64,K=d.effects,K===null?d.effects=[I]:K.push(I))}else ae={eventTime:ae,lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Q===null?(B=Q=ae,C=J):Q=Q.next=ae,w|=K;if(I=I.next,I===null){if(I=d.shared.pending,I===null)break;K=I,I=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);if(Q===null&&(C=J),d.baseState=C,d.firstBaseUpdate=B,d.lastBaseUpdate=Q,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else m===null&&(d.shared.lanes=0);ci|=w,n.lanes=w,n.memoizedState=J}}function Np(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ha={},fr=ps(ha),da=ps(ha),fa=ps(ha);function li(n){if(n===ha)throw Error(t(174));return n}function oh(n,s){switch(Ze(fa,s),Ze(da,n),Ze(fr,ha),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:gt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=gt(s,n)}tt(fr),Ze(fr,s)}function ho(){tt(fr),tt(da),tt(fa)}function Pp(n){li(fa.current);var s=li(fr.current),a=gt(s,n.type);s!==a&&(Ze(da,n),Ze(fr,a))}function ah(n){da.current===n&&(tt(fr),tt(da))}var at=ps(0);function Xl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var lh=[];function uh(){for(var n=0;n<lh.length;n++)lh[n]._workInProgressVersionPrimary=null;lh.length=0}var Yl=se.ReactCurrentDispatcher,ch=se.ReactCurrentBatchConfig,ui=0,lt=null,At=null,Dt=null,Jl=!1,pa=!1,ma=0,b_=0;function Gt(){throw Error(t(321))}function hh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Kn(n[a],s[a]))return!1;return!0}function dh(n,s,a,c,d,m){if(ui=m,lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Yl.current=n===null||n.memoizedState===null?M_:V_,n=a(c,d),pa){m=0;do{if(pa=!1,ma=0,25<=m)throw Error(t(301));m+=1,Dt=At=null,s.updateQueue=null,Yl.current=L_,n=a(c,d)}while(pa)}if(Yl.current=tu,s=At!==null&&At.next!==null,ui=0,Dt=At=lt=null,Jl=!1,s)throw Error(t(300));return n}function fh(){var n=ma!==0;return ma=0,n}function pr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?lt.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Nn(){if(At===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var s=Dt===null?lt.memoizedState:Dt.next;if(s!==null)Dt=s,At=n;else{if(n===null)throw Error(t(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Dt===null?lt.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function ga(n,s){return typeof s=="function"?s(n):s}function ph(n){var s=Nn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=At,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var I=w=null,C=null,B=m;do{var Q=B.lane;if((ui&Q)===Q)C!==null&&(C=C.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var J={lane:Q,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};C===null?(I=C=J,w=c):C=C.next=J,lt.lanes|=Q,ci|=Q}B=B.next}while(B!==null&&B!==m);C===null?w=c:C.next=I,Kn(c,s.memoizedState)||(cn=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=C,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,lt.lanes|=m,ci|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function mh(n){var s=Nn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=n(m,w.action),w=w.next;while(w!==d);Kn(m,s.memoizedState)||(cn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,c]}function bp(){}function Dp(n,s){var a=lt,c=Nn(),d=s(),m=!Kn(c.memoizedState,d);if(m&&(c.memoizedState=d,cn=!0),c=c.queue,gh(Mp.bind(null,a,c,n),[n]),c.getSnapshot!==s||m||Dt!==null&&Dt.memoizedState.tag&1){if(a.flags|=2048,ya(9,Op.bind(null,a,c,d,s),void 0,null),jt===null)throw Error(t(349));(ui&30)!==0||jp(a,s,d)}return d}function jp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=lt.updateQueue,s===null?(s={lastEffect:null,stores:null},lt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Op(n,s,a,c){s.value=a,s.getSnapshot=c,Vp(s)&&Lp(n)}function Mp(n,s,a){return a(function(){Vp(s)&&Lp(n)})}function Vp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Kn(n,a)}catch{return!0}}function Lp(n){var s=Lr(n,1);s!==null&&Zn(s,n,1,-1)}function Up(n){var s=pr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:n},s.queue=n,n=n.dispatch=O_.bind(null,lt,n),[s.memoizedState,n]}function ya(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=lt.updateQueue,s===null?(s={lastEffect:null,stores:null},lt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function Fp(){return Nn().memoizedState}function Zl(n,s,a,c){var d=pr();lt.flags|=n,d.memoizedState=ya(1|s,a,void 0,c===void 0?null:c)}function eu(n,s,a,c){var d=Nn();c=c===void 0?null:c;var m=void 0;if(At!==null){var w=At.memoizedState;if(m=w.destroy,c!==null&&hh(c,w.deps)){d.memoizedState=ya(s,a,m,c);return}}lt.flags|=n,d.memoizedState=ya(1|s,a,m,c)}function zp(n,s){return Zl(8390656,8,n,s)}function gh(n,s){return eu(2048,8,n,s)}function Bp(n,s){return eu(4,2,n,s)}function $p(n,s){return eu(4,4,n,s)}function Hp(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function qp(n,s,a){return a=a!=null?a.concat([n]):null,eu(4,4,Hp.bind(null,s,n),a)}function yh(){}function Wp(n,s){var a=Nn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&hh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Gp(n,s){var a=Nn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&hh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Kp(n,s,a){return(ui&21)===0?(n.baseState&&(n.baseState=!1,cn=!0),n.memoizedState=a):(Kn(a,s)||(a=Js(),lt.lanes|=a,ci|=a,n.baseState=!0),s)}function D_(n,s){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=ch.transition;ch.transition={};try{n(!1),s()}finally{Me=a,ch.transition=c}}function Qp(){return Nn().memoizedState}function j_(n,s,a){var c=Es(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Xp(n))Yp(s,a);else if(a=Ap(n,s,a,c),a!==null){var d=rn();Zn(a,n,c,d),Jp(a,s,c)}}function O_(n,s,a){var c=Es(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xp(n))Yp(s,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,I=m(w,a);if(d.hasEagerState=!0,d.eagerState=I,Kn(I,w)){var C=s.interleaved;C===null?(d.next=d,sh(s)):(d.next=C.next,C.next=d),s.interleaved=d;return}}catch{}a=Ap(n,s,d,c),a!==null&&(d=rn(),Zn(a,n,c,d),Jp(a,s,c))}}function Xp(n){var s=n.alternate;return n===lt||s!==null&&s===lt}function Yp(n,s){pa=Jl=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Jp(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,as(n,a)}}var tu={readContext:Cn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},M_={readContext:Cn,useCallback:function(n,s){return pr().memoizedState=[n,s===void 0?null:s],n},useContext:Cn,useEffect:zp,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Zl(4194308,4,Hp.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Zl(4194308,4,n,s)},useInsertionEffect:function(n,s){return Zl(4,2,n,s)},useMemo:function(n,s){var a=pr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=pr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=j_.bind(null,lt,n),[c.memoizedState,n]},useRef:function(n){var s=pr();return n={current:n},s.memoizedState=n},useState:Up,useDebugValue:yh,useDeferredValue:function(n){return pr().memoizedState=n},useTransition:function(){var n=Up(!1),s=n[0];return n=D_.bind(null,n[1]),pr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=lt,d=pr();if(st){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),jt===null)throw Error(t(349));(ui&30)!==0||jp(c,s,a)}d.memoizedState=a;var m={value:a,getSnapshot:s};return d.queue=m,zp(Mp.bind(null,c,m,n),[n]),c.flags|=2048,ya(9,Op.bind(null,c,m,a,s),void 0,null),a},useId:function(){var n=pr(),s=jt.identifierPrefix;if(st){var a=Vr,c=Mr;a=(c&~(1<<32-en(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ma++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=b_++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},V_={readContext:Cn,useCallback:Wp,useContext:Cn,useEffect:gh,useImperativeHandle:qp,useInsertionEffect:Bp,useLayoutEffect:$p,useMemo:Gp,useReducer:ph,useRef:Fp,useState:function(){return ph(ga)},useDebugValue:yh,useDeferredValue:function(n){var s=Nn();return Kp(s,At.memoizedState,n)},useTransition:function(){var n=ph(ga)[0],s=Nn().memoizedState;return[n,s]},useMutableSource:bp,useSyncExternalStore:Dp,useId:Qp,unstable_isNewReconciler:!1},L_={readContext:Cn,useCallback:Wp,useContext:Cn,useEffect:gh,useImperativeHandle:qp,useInsertionEffect:Bp,useLayoutEffect:$p,useMemo:Gp,useReducer:mh,useRef:Fp,useState:function(){return mh(ga)},useDebugValue:yh,useDeferredValue:function(n){var s=Nn();return At===null?s.memoizedState=n:Kp(s,At.memoizedState,n)},useTransition:function(){var n=mh(ga)[0],s=Nn().memoizedState;return[n,s]},useMutableSource:bp,useSyncExternalStore:Dp,useId:Qp,unstable_isNewReconciler:!1};function Xn(n,s){if(n&&n.defaultProps){s=oe({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function vh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:oe({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var nu={isMounted:function(n){return(n=n._reactInternals)?zn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=rn(),d=Es(n),m=Ur(c,d);m.payload=s,a!=null&&(m.callback=a),s=vs(n,m,d),s!==null&&(Zn(s,n,d,c),Kl(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=rn(),d=Es(n),m=Ur(c,d);m.tag=1,m.payload=s,a!=null&&(m.callback=a),s=vs(n,m,d),s!==null&&(Zn(s,n,d,c),Kl(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=rn(),c=Es(n),d=Ur(a,c);d.tag=2,s!=null&&(d.callback=s),s=vs(n,d,c),s!==null&&(Zn(s,n,c,a),Kl(s,n,c))}};function Zp(n,s,a,c,d,m,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,w):s.prototype&&s.prototype.isPureReactComponent?!ra(a,c)||!ra(d,m):!0}function em(n,s,a){var c=!1,d=ms,m=s.contextType;return typeof m=="object"&&m!==null?m=Cn(m):(d=un(s)?si:Wt.current,c=s.contextTypes,m=(c=c!=null)?so(n,d):ms),s=new s(a,m),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=nu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),s}function tm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&nu.enqueueReplaceState(s,s.state,null)}function _h(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},ih(n);var m=s.contextType;typeof m=="object"&&m!==null?d.context=Cn(m):(m=un(s)?si:Wt.current,d.context=so(n,m)),d.state=n.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(vh(n,s,m,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&nu.enqueueReplaceState(d,d.state,null),Ql(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function fo(n,s){try{var a="",c=s;do a+=Ne(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:s,stack:d,digest:null}}function wh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function xh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var U_=typeof WeakMap=="function"?WeakMap:Map;function nm(n,s,a){a=Ur(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){uu||(uu=!0,Mh=c),xh(n,s)},a}function rm(n,s,a){a=Ur(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){xh(n,s)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){xh(n,s),typeof c!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function sm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new U_;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=Z_.bind(null,n,s,a),s.then(n,n))}function im(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function om(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Ur(-1,1),s.tag=2,vs(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var F_=se.ReactCurrentOwner,cn=!1;function nn(n,s,a,c){s.child=n===null?Sp(s,null,a,c):lo(s,n.child,a,c)}function am(n,s,a,c,d){a=a.render;var m=s.ref;return co(s,d),c=dh(n,s,a,c,m,d),a=fh(),n!==null&&!cn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Fr(n,s,d)):(st&&a&&Qc(s),s.flags|=1,nn(n,s,c,d),s.child)}function lm(n,s,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!$h(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=m,um(n,s,m,c,d)):(n=mu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,(n.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:ra,a(w,c)&&n.ref===s.ref)return Fr(n,s,d)}return s.flags|=1,n=Is(m,c),n.ref=s.ref,n.return=s,s.child=n}function um(n,s,a,c,d){if(n!==null){var m=n.memoizedProps;if(ra(m,c)&&n.ref===s.ref)if(cn=!1,s.pendingProps=c=m,(n.lanes&d)!==0)(n.flags&131072)!==0&&(cn=!0);else return s.lanes=n.lanes,Fr(n,s,d)}return Eh(n,s,a,c,d)}function cm(n,s,a){var c=s.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(mo,wn),wn|=a;else{if((a&1073741824)===0)return n=m!==null?m.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ze(mo,wn),wn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,Ze(mo,wn),wn|=c}else m!==null?(c=m.baseLanes|a,s.memoizedState=null):c=a,Ze(mo,wn),wn|=c;return nn(n,s,d,a),s.child}function hm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Eh(n,s,a,c,d){var m=un(a)?si:Wt.current;return m=so(s,m),co(s,d),a=dh(n,s,a,c,m,d),c=fh(),n!==null&&!cn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Fr(n,s,d)):(st&&c&&Qc(s),s.flags|=1,nn(n,s,a,d),s.child)}function dm(n,s,a,c,d){if(un(a)){var m=!0;Fl(s)}else m=!1;if(co(s,d),s.stateNode===null)su(n,s),em(s,a,c),_h(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,I=s.memoizedProps;w.props=I;var C=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=Cn(B):(B=un(a)?si:Wt.current,B=so(s,B));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==c||C!==B)&&tm(s,w,c,B),ys=!1;var K=s.memoizedState;w.state=K,Ql(s,c,w,d),C=s.memoizedState,I!==c||K!==C||ln.current||ys?(typeof Q=="function"&&(vh(s,a,Q,c),C=s.memoizedState),(I=ys||Zp(s,a,I,c,K,C,B))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=C),w.props=c,w.state=C,w.context=B,c=I):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Rp(n,s),I=s.memoizedProps,B=s.type===s.elementType?I:Xn(s.type,I),w.props=B,J=s.pendingProps,K=w.context,C=a.contextType,typeof C=="object"&&C!==null?C=Cn(C):(C=un(a)?si:Wt.current,C=so(s,C));var ae=a.getDerivedStateFromProps;(Q=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==J||K!==C)&&tm(s,w,c,C),ys=!1,K=s.memoizedState,w.state=K,Ql(s,c,w,d);var ce=s.memoizedState;I!==J||K!==ce||ln.current||ys?(typeof ae=="function"&&(vh(s,a,ae,c),ce=s.memoizedState),(B=ys||Zp(s,a,B,c,K,ce,C)||!1)?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ce,C),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ce,C)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||I===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ce),w.props=c,w.state=ce,w.context=C,c=B):(typeof w.componentDidUpdate!="function"||I===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),c=!1)}return Th(n,s,a,c,m,d)}function Th(n,s,a,c,d,m){hm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&yp(s,a,!1),Fr(n,s,m);c=s.stateNode,F_.current=s;var I=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=lo(s,n.child,null,m),s.child=lo(s,null,I,m)):nn(n,s,I,m),s.memoizedState=c.state,d&&yp(s,a,!0),s.child}function fm(n){var s=n.stateNode;s.pendingContext?mp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&mp(n,s.context,!1),oh(n,s.containerInfo)}function pm(n,s,a,c,d){return ao(),Zc(d),s.flags|=256,nn(n,s,a,c),s.child}var Ih={dehydrated:null,treeContext:null,retryLane:0};function kh(n){return{baseLanes:n,cachePool:null,transitions:null}}function mm(n,s,a){var c=s.pendingProps,d=at.current,m=!1,w=(s.flags&128)!==0,I;if((I=w)||(I=n!==null&&n.memoizedState===null?!1:(d&2)!==0),I?(m=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Ze(at,d&1),n===null)return Jc(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,m?(c=s.mode,m=s.child,w={mode:"hidden",children:w},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=gu(w,c,0,null),n=pi(n,c,a,null),m.return=s,n.return=s,m.sibling=n,s.child=m,s.child.memoizedState=kh(a),s.memoizedState=Ih,n):Sh(s,w));if(d=n.memoizedState,d!==null&&(I=d.dehydrated,I!==null))return z_(n,s,w,c,I,d,a);if(m){m=c.fallback,w=s.mode,d=n.child,I=d.sibling;var C={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=C,s.deletions=null):(c=Is(d,C),c.subtreeFlags=d.subtreeFlags&14680064),I!==null?m=Is(I,m):(m=pi(m,w,a,null),m.flags|=2),m.return=s,c.return=s,c.sibling=m,s.child=c,c=m,m=s.child,w=n.child.memoizedState,w=w===null?kh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=n.childLanes&~a,s.memoizedState=Ih,c}return m=n.child,n=m.sibling,c=Is(m,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Sh(n,s){return s=gu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function ru(n,s,a,c){return c!==null&&Zc(c),lo(s,n.child,null,a),n=Sh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function z_(n,s,a,c,d,m,w){if(a)return s.flags&256?(s.flags&=-257,c=wh(Error(t(422))),ru(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(m=c.fallback,d=s.mode,c=gu({mode:"visible",children:c.children},d,0,null),m=pi(m,d,w,null),m.flags|=2,c.return=s,m.return=s,c.sibling=m,s.child=c,(s.mode&1)!==0&&lo(s,n.child,null,w),s.child.memoizedState=kh(w),s.memoizedState=Ih,m);if((s.mode&1)===0)return ru(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var I=c.dgst;return c=I,m=Error(t(419)),c=wh(m,c,void 0),ru(n,s,w,c)}if(I=(w&n.childLanes)!==0,cn||I){if(c=jt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Lr(n,d),Zn(c,n,d,-1))}return Bh(),c=wh(Error(t(421))),ru(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=ew.bind(null,n),d._reactRetry=s,null):(n=m.treeContext,_n=fs(d.nextSibling),vn=s,st=!0,Qn=null,n!==null&&(An[Rn++]=Mr,An[Rn++]=Vr,An[Rn++]=ii,Mr=n.id,Vr=n.overflow,ii=s),s=Sh(s,c.children),s.flags|=4096,s)}function gm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),rh(n.return,s,a)}function Ah(n,s,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function ym(n,s,a){var c=s.pendingProps,d=c.revealOrder,m=c.tail;if(nn(n,s,c.children,a),c=at.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gm(n,a,s);else if(n.tag===19)gm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ze(at,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Xl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Ah(s,!1,d,a,m);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Xl(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Ah(s,!0,a,null,m);break;case"together":Ah(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function su(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Fr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ci|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Is(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Is(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function B_(n,s,a){switch(s.tag){case 3:fm(s),ao();break;case 5:Pp(s);break;case 1:un(s.type)&&Fl(s);break;case 4:oh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Ze(Wl,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ze(at,at.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?mm(n,s,a):(Ze(at,at.current&1),n=Fr(n,s,a),n!==null?n.sibling:null);Ze(at,at.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return ym(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ze(at,at.current),c)break;return null;case 22:case 23:return s.lanes=0,cm(n,s,a)}return Fr(n,s,a)}var vm,Rh,_m,wm;vm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Rh=function(){},_m=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,li(fr.current);var m=null;switch(a){case"input":d=Ar(n,d),c=Ar(n,c),m=[];break;case"select":d=oe({},d,{value:void 0}),c=oe({},c,{value:void 0}),m=[];break;case"textarea":d=Bs(n,d),c=Bs(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Vl)}Et(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var I=d[B];for(w in I)I.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?m||(m=[]):(m=m||[]).push(B,null));for(B in c){var C=c[B];if(I=d?.[B],c.hasOwnProperty(B)&&C!==I&&(C!=null||I!=null))if(B==="style")if(I){for(w in I)!I.hasOwnProperty(w)||C&&C.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in C)C.hasOwnProperty(w)&&I[w]!==C[w]&&(a||(a={}),a[w]=C[w])}else a||(m||(m=[]),m.push(B,a)),a=C;else B==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,I=I?I.__html:void 0,C!=null&&I!==C&&(m=m||[]).push(B,C)):B==="children"?typeof C!="string"&&typeof C!="number"||(m=m||[]).push(B,""+C):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(C!=null&&B==="onScroll"&&et("scroll",n),m||I===C||(m=[])):(m=m||[]).push(B,C))}a&&(m=m||[]).push("style",a);var B=m;(s.updateQueue=B)&&(s.flags|=4)}},wm=function(n,s,a,c){a!==c&&(s.flags|=4)};function va(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Kt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function $_(n,s,a){var c=s.pendingProps;switch(Xc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(s),null;case 1:return un(s.type)&&Ul(),Kt(s),null;case 3:return c=s.stateNode,ho(),tt(ln),tt(Wt),uh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Hl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Qn!==null&&(Uh(Qn),Qn=null))),Rh(n,s),Kt(s),null;case 5:ah(s);var d=li(fa.current);if(a=s.type,n!==null&&s.stateNode!=null)_m(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Kt(s),null}if(n=li(fr.current),Hl(s)){c=s.stateNode,a=s.type;var m=s.memoizedProps;switch(c[dr]=s,c[la]=m,n=(s.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(d=0;d<ia.length;d++)et(ia[d],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":Zr(c,m),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},et("invalid",c);break;case"textarea":ts(c,m),et("invalid",c)}Et(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var I=m[w];w==="children"?typeof I=="string"?c.textContent!==I&&(m.suppressHydrationWarning!==!0&&Ml(c.textContent,I,n),d=["children",I]):typeof I=="number"&&c.textContent!==""+I&&(m.suppressHydrationWarning!==!0&&Ml(c.textContent,I,n),d=["children",""+I]):o.hasOwnProperty(w)&&I!=null&&w==="onScroll"&&et("scroll",c)}switch(a){case"input":jn(c),Pi(c,m,!0);break;case"textarea":jn(c),$s(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Vl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[dr]=s,n[la]=c,vm(n,s,!1,!1),s.stateNode=n;e:{switch(w=Be(a,c),a){case"dialog":et("cancel",n),et("close",n),d=c;break;case"iframe":case"object":case"embed":et("load",n),d=c;break;case"video":case"audio":for(d=0;d<ia.length;d++)et(ia[d],n);d=c;break;case"source":et("error",n),d=c;break;case"img":case"image":case"link":et("error",n),et("load",n),d=c;break;case"details":et("toggle",n),d=c;break;case"input":Zr(n,c),d=Ar(n,c),et("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=oe({},c,{value:void 0}),et("invalid",n);break;case"textarea":ts(n,c),d=Bs(n,c),et("invalid",n);break;default:d=c}Et(a,d),I=d;for(m in I)if(I.hasOwnProperty(m)){var C=I[m];m==="style"?Ge(n,C):m==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Hs(n,C)):m==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&re(n,C):typeof C=="number"&&re(n,""+C):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?C!=null&&m==="onScroll"&&et("scroll",n):C!=null&&ne(n,m,C,w))}switch(a){case"input":jn(n),Pi(n,c,!1);break;case"textarea":jn(n),$s(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Oe(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?Mn(n,!!c.multiple,m,!1):c.defaultValue!=null&&Mn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Vl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Kt(s),null;case 6:if(n&&s.stateNode!=null)wm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=li(fa.current),li(fr.current),Hl(s)){if(c=s.stateNode,a=s.memoizedProps,c[dr]=s,(m=c.nodeValue!==a)&&(n=vn,n!==null))switch(n.tag){case 3:Ml(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ml(c.nodeValue,a,(n.mode&1)!==0)}m&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[dr]=s,s.stateNode=c}return Kt(s),null;case 13:if(tt(at),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&_n!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Tp(),ao(),s.flags|=98560,m=!1;else if(m=Hl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[dr]=s}else ao(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Kt(s),m=!1}else Qn!==null&&(Uh(Qn),Qn=null),m=!0;if(!m)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(at.current&1)!==0?Rt===0&&(Rt=3):Bh())),s.updateQueue!==null&&(s.flags|=4),Kt(s),null);case 4:return ho(),Rh(n,s),n===null&&oa(s.stateNode.containerInfo),Kt(s),null;case 10:return nh(s.type._context),Kt(s),null;case 17:return un(s.type)&&Ul(),Kt(s),null;case 19:if(tt(at),m=s.memoizedState,m===null)return Kt(s),null;if(c=(s.flags&128)!==0,w=m.rendering,w===null)if(c)va(m,!1);else{if(Rt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Xl(n),w!==null){for(s.flags|=128,va(m,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)m=a,n=c,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,n=w.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ze(at,at.current&1|2),s.child}n=n.sibling}m.tail!==null&&Je()>go&&(s.flags|=128,c=!0,va(m,!1),s.lanes=4194304)}else{if(!c)if(n=Xl(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),va(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!st)return Kt(s),null}else 2*Je()-m.renderingStartTime>go&&a!==1073741824&&(s.flags|=128,c=!0,va(m,!1),s.lanes=4194304);m.isBackwards?(w.sibling=s.child,s.child=w):(a=m.last,a!==null?a.sibling=w:s.child=w,m.last=w)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=Je(),s.sibling=null,a=at.current,Ze(at,c?a&1|2:a&1),s):(Kt(s),null);case 22:case 23:return zh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(wn&1073741824)!==0&&(Kt(s),s.subtreeFlags&6&&(s.flags|=8192)):Kt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function H_(n,s){switch(Xc(s),s.tag){case 1:return un(s.type)&&Ul(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ho(),tt(ln),tt(Wt),uh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return ah(s),null;case 13:if(tt(at),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ao()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(at),null;case 4:return ho(),null;case 10:return nh(s.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var iu=!1,Qt=!1,q_=typeof WeakSet=="function"?WeakSet:Set,ue=null;function po(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){dt(n,s,c)}else a.current=null}function Ch(n,s,a){try{a()}catch(c){dt(n,s,c)}}var xm=!1;function W_(n,s){if(zc=cs,n=Zf(),Dc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,I=-1,C=-1,B=0,Q=0,J=n,K=null;t:for(;;){for(var ae;J!==a||d!==0&&J.nodeType!==3||(I=w+d),J!==m||c!==0&&J.nodeType!==3||(C=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(ae=J.firstChild)!==null;)K=J,J=ae;for(;;){if(J===n)break t;if(K===a&&++B===d&&(I=w),K===m&&++Q===c&&(C=w),(ae=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=ae}a=I===-1||C===-1?null:{start:I,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bc={focusedElem:n,selectionRange:a},cs=!1,ue=s;ue!==null;)if(s=ue,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ue=n;else for(;ue!==null;){s=ue;try{var ce=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,vt=ce.memoizedState,U=s.stateNode,D=U.getSnapshotBeforeUpdate(s.elementType===s.type?he:Xn(s.type,he),vt);U.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){dt(s,s.return,Z)}if(n=s.sibling,n!==null){n.return=s.return,ue=n;break}ue=s.return}return ce=xm,xm=!1,ce}function _a(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&Ch(s,a,m)}d=d.next}while(d!==c)}}function ou(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Nh(n){var s=n.ref;if(s!==null){var a=n.stateNode;n.tag,n=a,typeof s=="function"?s(n):s.current=n}}function Em(n){var s=n.alternate;s!==null&&(n.alternate=null,Em(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[dr],delete s[la],delete s[Wc],delete s[R_],delete s[C_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Tm(n){return n.tag===5||n.tag===3||n.tag===4}function Im(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Tm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ph(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Vl));else if(c!==4&&(n=n.child,n!==null))for(Ph(n,s,a),n=n.sibling;n!==null;)Ph(n,s,a),n=n.sibling}function bh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(bh(n,s,a),n=n.sibling;n!==null;)bh(n,s,a),n=n.sibling}var Ft=null,Yn=!1;function _s(n,s,a){for(a=a.child;a!==null;)km(n,s,a),a=a.sibling}function km(n,s,a){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Xs,a)}catch{}switch(a.tag){case 5:Qt||po(a,s);case 6:var c=Ft,d=Yn;Ft=null,_s(n,s,a),Ft=c,Yn=d,Ft!==null&&(Yn?(n=Ft,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ft.removeChild(a.stateNode));break;case 18:Ft!==null&&(Yn?(n=Ft,a=a.stateNode,n.nodeType===8?qc(n.parentNode,a):n.nodeType===1&&qc(n,a),Wn(n)):qc(Ft,a.stateNode));break;case 4:c=Ft,d=Yn,Ft=a.stateNode.containerInfo,Yn=!0,_s(n,s,a),Ft=c,Yn=d;break;case 0:case 11:case 14:case 15:if(!Qt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Ch(a,s,w),d=d.next}while(d!==c)}_s(n,s,a);break;case 1:if(!Qt&&(po(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(I){dt(a,s,I)}_s(n,s,a);break;case 21:_s(n,s,a);break;case 22:a.mode&1?(Qt=(c=Qt)||a.memoizedState!==null,_s(n,s,a),Qt=c):_s(n,s,a);break;default:_s(n,s,a)}}function Sm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new q_),s.forEach(function(c){var d=tw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Jn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,w=s,I=w;e:for(;I!==null;){switch(I.tag){case 5:Ft=I.stateNode,Yn=!1;break e;case 3:Ft=I.stateNode.containerInfo,Yn=!0;break e;case 4:Ft=I.stateNode.containerInfo,Yn=!0;break e}I=I.return}if(Ft===null)throw Error(t(160));km(m,w,d),Ft=null,Yn=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(B){dt(d,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Am(s,n),s=s.sibling}function Am(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Jn(s,n),mr(n),c&4){try{_a(3,n,n.return),ou(3,n)}catch(he){dt(n,n.return,he)}try{_a(5,n,n.return)}catch(he){dt(n,n.return,he)}}break;case 1:Jn(s,n),mr(n),c&512&&a!==null&&po(a,a.return);break;case 5:if(Jn(s,n),mr(n),c&512&&a!==null&&po(a,a.return),n.flags&32){var d=n.stateNode;try{re(d,"")}catch(he){dt(n,n.return,he)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,w=a!==null?a.memoizedProps:m,I=n.type,C=n.updateQueue;if(n.updateQueue=null,C!==null)try{I==="input"&&m.type==="radio"&&m.name!=null&&Fs(d,m),Be(I,w);var B=Be(I,m);for(w=0;w<C.length;w+=2){var Q=C[w],J=C[w+1];Q==="style"?Ge(d,J):Q==="dangerouslySetInnerHTML"?Hs(d,J):Q==="children"?re(d,J):ne(d,Q,J,B)}switch(I){case"input":zs(d,m);break;case"textarea":ns(d,m);break;case"select":var K=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ae=m.value;ae!=null?Mn(d,!!m.multiple,ae,!1):K!==!!m.multiple&&(m.defaultValue!=null?Mn(d,!!m.multiple,m.defaultValue,!0):Mn(d,!!m.multiple,m.multiple?[]:"",!1))}d[la]=m}catch(he){dt(n,n.return,he)}}break;case 6:if(Jn(s,n),mr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(he){dt(n,n.return,he)}}break;case 3:if(Jn(s,n),mr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Wn(s.containerInfo)}catch(he){dt(n,n.return,he)}break;case 4:Jn(s,n),mr(n);break;case 13:Jn(s,n),mr(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Oh=Je())),c&4&&Sm(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(Qt=(B=Qt)||Q,Jn(s,n),Qt=B):Jn(s,n),mr(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!Q&&(n.mode&1)!==0)for(ue=n,Q=n.child;Q!==null;){for(J=ue=Q;ue!==null;){switch(K=ue,ae=K.child,K.tag){case 0:case 11:case 14:case 15:_a(4,K,K.return);break;case 1:po(K,K.return);var ce=K.stateNode;if(typeof ce.componentWillUnmount=="function"){c=K,a=K.return;try{s=c,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(he){dt(c,a,he)}}break;case 5:po(K,K.return);break;case 22:if(K.memoizedState!==null){Nm(J);continue}}ae!==null?(ae.return=K,ue=ae):Nm(J)}Q=Q.sibling}e:for(Q=null,J=n;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,B?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(I=J.stateNode,C=J.memoizedProps.style,w=C!=null&&C.hasOwnProperty("display")?C.display:null,I.style.display=nt("display",w))}catch(he){dt(n,n.return,he)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(he){dt(n,n.return,he)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Jn(s,n),mr(n),c&4&&Sm(n);break;case 21:break;default:Jn(s,n),mr(n)}}function mr(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Tm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(re(d,""),c.flags&=-33);var m=Im(n);bh(n,m,d);break;case 3:case 4:var w=c.stateNode.containerInfo,I=Im(n);Ph(n,I,w);break;default:throw Error(t(161))}}catch(C){dt(n,n.return,C)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function G_(n,s,a){ue=n,Rm(n)}function Rm(n,s,a){for(var c=(n.mode&1)!==0;ue!==null;){var d=ue,m=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||iu;if(!w){var I=d.alternate,C=I!==null&&I.memoizedState!==null||Qt;I=iu;var B=Qt;if(iu=w,(Qt=C)&&!B)for(ue=d;ue!==null;)w=ue,C=w.child,w.tag===22&&w.memoizedState!==null?Pm(d):C!==null?(C.return=w,ue=C):Pm(d);for(;m!==null;)ue=m,Rm(m),m=m.sibling;ue=d,iu=I,Qt=B}Cm(n)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,ue=m):Cm(n)}}function Cm(n){for(;ue!==null;){var s=ue;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Qt||ou(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Qt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Xn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=s.updateQueue;m!==null&&Np(s,m,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Np(s,w,a)}break;case 5:var I=s.stateNode;if(a===null&&s.flags&4){a=I;var C=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var Q=B.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&Wn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||s.flags&512&&Nh(s)}catch(K){dt(s,s.return,K)}}if(s===n){ue=null;break}if(a=s.sibling,a!==null){a.return=s.return,ue=a;break}ue=s.return}}function Nm(n){for(;ue!==null;){var s=ue;if(s===n){ue=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ue=a;break}ue=s.return}}function Pm(n){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{ou(4,s)}catch(C){dt(s,a,C)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(C){dt(s,d,C)}}var m=s.return;try{Nh(s)}catch(C){dt(s,m,C)}break;case 5:var w=s.return;try{Nh(s)}catch(C){dt(s,w,C)}}}catch(C){dt(s,s.return,C)}if(s===n){ue=null;break}var I=s.sibling;if(I!==null){I.return=s.return,ue=I;break}ue=s.return}}var K_=Math.ceil,au=se.ReactCurrentDispatcher,Dh=se.ReactCurrentOwner,Pn=se.ReactCurrentBatchConfig,Fe=0,jt=null,It=null,zt=0,wn=0,mo=ps(0),Rt=0,wa=null,ci=0,lu=0,jh=0,xa=null,hn=null,Oh=0,go=1/0,zr=null,uu=!1,Mh=null,ws=null,cu=!1,xs=null,hu=0,Ea=0,Vh=null,du=-1,fu=0;function rn(){return(Fe&6)!==0?Je():du!==-1?du:du=Je()}function Es(n){return(n.mode&1)===0?1:(Fe&2)!==0&&zt!==0?zt&-zt:P_.transition!==null?(fu===0&&(fu=Js()),fu):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Xo(n.type)),n)}function Zn(n,s,a,c){if(50<Ea)throw Ea=0,Vh=null,Error(t(185));os(n,a,c),((Fe&2)===0||n!==jt)&&(n===jt&&((Fe&2)===0&&(lu|=a),Rt===4&&Ts(n,zt)),dn(n,c),a===1&&Fe===0&&(s.mode&1)===0&&(go=Je()+500,zl&&gs()))}function dn(n,s){var a=n.callbackNode;Cr(n,s);var c=Ys(n,n===jt?zt:0);if(c===0)a!==null&&qo(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&qo(a),s===1)n.tag===0?N_(Dm.bind(null,n)):vp(Dm.bind(null,n)),S_(function(){(Fe&6)===0&&gs()}),a=null;else{switch(ls(c)){case 1:a=Qs;break;case 4:a=rs;break;case 16:a=In;break;case 536870912:a=fl;break;default:a=In}a=zm(a,bm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function bm(n,s){if(du=-1,fu=0,(Fe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(yo()&&n.callbackNode!==a)return null;var c=Ys(n,n===jt?zt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=pu(n,c);else{s=c;var d=Fe;Fe|=2;var m=Om();(jt!==n||zt!==s)&&(zr=null,go=Je()+500,di(n,s));do try{Y_();break}catch(I){jm(n,I)}while(!0);th(),au.current=m,Fe=d,It!==null?s=0:(jt=null,zt=0,s=Rt)}if(s!==0){if(s===2&&(d=mn(n),d!==0&&(c=d,s=Lh(n,d))),s===1)throw a=wa,di(n,0),Ts(n,c),dn(n,Je()),a;if(s===6)Ts(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Q_(d)&&(s=pu(n,c),s===2&&(m=mn(n),m!==0&&(c=m,s=Lh(n,m))),s===1))throw a=wa,di(n,0),Ts(n,c),dn(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:fi(n,hn,zr);break;case 3:if(Ts(n,c),(c&130023424)===c&&(s=Oh+500-Je(),10<s)){if(Ys(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){rn(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Hc(fi.bind(null,n,hn,zr),s);break}fi(n,hn,zr);break;case 4:if(Ts(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-en(c);m=1<<w,w=s[w],w>d&&(d=w),c&=~m}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*K_(c/1960))-c,10<c){n.timeoutHandle=Hc(fi.bind(null,n,hn,zr),c);break}fi(n,hn,zr);break;case 5:fi(n,hn,zr);break;default:throw Error(t(329))}}}return dn(n,Je()),n.callbackNode===a?bm.bind(null,n):null}function Lh(n,s){var a=xa;return n.current.memoizedState.isDehydrated&&(di(n,s).flags|=256),n=pu(n,s),n!==2&&(s=hn,hn=a,s!==null&&Uh(s)),n}function Uh(n){hn===null?hn=n:hn.push.apply(hn,n)}function Q_(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!Kn(m(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ts(n,s){for(s&=~jh,s&=~lu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-en(s),c=1<<a;n[a]=-1,s&=~c}}function Dm(n){if((Fe&6)!==0)throw Error(t(327));yo();var s=Ys(n,0);if((s&1)===0)return dn(n,Je()),null;var a=pu(n,s);if(n.tag!==0&&a===2){var c=mn(n);c!==0&&(s=c,a=Lh(n,c))}if(a===1)throw a=wa,di(n,0),Ts(n,s),dn(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,fi(n,hn,zr),dn(n,Je()),null}function Fh(n,s){var a=Fe;Fe|=1;try{return n(s)}finally{Fe=a,Fe===0&&(go=Je()+500,zl&&gs())}}function hi(n){xs!==null&&xs.tag===0&&(Fe&6)===0&&yo();var s=Fe;Fe|=1;var a=Pn.transition,c=Me;try{if(Pn.transition=null,Me=1,n)return n()}finally{Me=c,Pn.transition=a,Fe=s,(Fe&6)===0&&gs()}}function zh(){wn=mo.current,tt(mo)}function di(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,k_(a)),It!==null)for(a=It.return;a!==null;){var c=a;switch(Xc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ul();break;case 3:ho(),tt(ln),tt(Wt),uh();break;case 5:ah(c);break;case 4:ho();break;case 13:tt(at);break;case 19:tt(at);break;case 10:nh(c.type._context);break;case 22:case 23:zh()}a=a.return}if(jt=n,It=n=Is(n.current,null),zt=wn=s,Rt=0,wa=null,jh=lu=ci=0,hn=xa=null,ai!==null){for(s=0;s<ai.length;s++)if(a=ai[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,c.next=w}a.pending=c}ai=null}return n}function jm(n,s){do{var a=It;try{if(th(),Yl.current=tu,Jl){for(var c=lt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Jl=!1}if(ui=0,Dt=At=lt=null,pa=!1,ma=0,Dh.current=null,a===null||a.return===null){Rt=1,wa=s,It=null;break}e:{var m=n,w=a.return,I=a,C=s;if(s=zt,I.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var B=C,Q=I,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ae=im(w);if(ae!==null){ae.flags&=-257,om(ae,w,I,m,s),ae.mode&1&&sm(m,B,s),s=ae,C=B;var ce=s.updateQueue;if(ce===null){var he=new Set;he.add(C),s.updateQueue=he}else ce.add(C);break e}else{if((s&1)===0){sm(m,B,s),Bh();break e}C=Error(t(426))}}else if(st&&I.mode&1){var vt=im(w);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),om(vt,w,I,m,s),Zc(fo(C,I));break e}}m=C=fo(C,I),Rt!==4&&(Rt=2),xa===null?xa=[m]:xa.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,s&=-s,m.lanes|=s;var U=nm(m,C,s);Cp(m,U);break e;case 1:I=C;var D=m.type,z=m.stateNode;if((m.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ws===null||!ws.has(z)))){m.flags|=65536,s&=-s,m.lanes|=s;var Z=rm(m,I,s);Cp(m,Z);break e}}m=m.return}while(m!==null)}Vm(a)}catch(pe){s=pe,It===a&&a!==null&&(It=a=a.return);continue}break}while(!0)}function Om(){var n=au.current;return au.current=tu,n===null?tu:n}function Bh(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),jt===null||(ci&268435455)===0&&(lu&268435455)===0||Ts(jt,zt)}function pu(n,s){var a=Fe;Fe|=2;var c=Om();(jt!==n||zt!==s)&&(zr=null,di(n,s));do try{X_();break}catch(d){jm(n,d)}while(!0);if(th(),Fe=a,au.current=c,It!==null)throw Error(t(261));return jt=null,zt=0,Rt}function X_(){for(;It!==null;)Mm(It)}function Y_(){for(;It!==null&&!hl();)Mm(It)}function Mm(n){var s=Fm(n.alternate,n,wn);n.memoizedProps=n.pendingProps,s===null?Vm(n):It=s,Dh.current=null}function Vm(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=$_(a,s,wn),a!==null){It=a;return}}else{if(a=H_(a,s),a!==null){a.flags&=32767,It=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Rt=6,It=null;return}}if(s=s.sibling,s!==null){It=s;return}It=s=n}while(s!==null);Rt===0&&(Rt=5)}function fi(n,s,a){var c=Me,d=Pn.transition;try{Pn.transition=null,Me=1,J_(n,s,a,c)}finally{Pn.transition=d,Me=c}return null}function J_(n,s,a,c){do yo();while(xs!==null);if((Fe&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Xe(n,m),n===jt&&(It=jt=null,zt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||cu||(cu=!0,zm(In,function(){return yo(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=Pn.transition,Pn.transition=null;var w=Me;Me=1;var I=Fe;Fe|=4,Dh.current=null,W_(n,a),Am(a,n),v_(Bc),cs=!!zc,Bc=zc=null,n.current=a,G_(a),kc(),Fe=I,Me=w,Pn.transition=m}else n.current=a;if(cu&&(cu=!1,xs=n,hu=d),m=n.pendingLanes,m===0&&(ws=null),pl(a.stateNode),dn(n,Je()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(uu)throw uu=!1,n=Mh,Mh=null,n;return(hu&1)!==0&&n.tag!==0&&yo(),m=n.pendingLanes,(m&1)!==0?n===Vh?Ea++:(Ea=0,Vh=n):Ea=0,gs(),null}function yo(){if(xs!==null){var n=ls(hu),s=Pn.transition,a=Me;try{if(Pn.transition=null,Me=16>n?16:n,xs===null)var c=!1;else{if(n=xs,xs=null,hu=0,(Fe&6)!==0)throw Error(t(331));var d=Fe;for(Fe|=4,ue=n.current;ue!==null;){var m=ue,w=m.child;if((ue.flags&16)!==0){var I=m.deletions;if(I!==null){for(var C=0;C<I.length;C++){var B=I[C];for(ue=B;ue!==null;){var Q=ue;switch(Q.tag){case 0:case 11:case 15:_a(8,Q,m)}var J=Q.child;if(J!==null)J.return=Q,ue=J;else for(;ue!==null;){Q=ue;var K=Q.sibling,ae=Q.return;if(Em(Q),Q===B){ue=null;break}if(K!==null){K.return=ae,ue=K;break}ue=ae}}}var ce=m.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var vt=he.sibling;he.sibling=null,he=vt}while(he!==null)}}ue=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,ue=w;else e:for(;ue!==null;){if(m=ue,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:_a(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,ue=U;break e}ue=m.return}}var D=n.current;for(ue=D;ue!==null;){w=ue;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ue=z;else e:for(w=D;ue!==null;){if(I=ue,(I.flags&2048)!==0)try{switch(I.tag){case 0:case 11:case 15:ou(9,I)}}catch(pe){dt(I,I.return,pe)}if(I===w){ue=null;break e}var Z=I.sibling;if(Z!==null){Z.return=I.return,ue=Z;break e}ue=I.return}}if(Fe=d,gs(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Xs,n)}catch{}c=!0}return c}finally{Me=a,Pn.transition=s}}return!1}function Lm(n,s,a){s=fo(a,s),s=nm(n,s,1),n=vs(n,s,1),s=rn(),n!==null&&(os(n,1,s),dn(n,s))}function dt(n,s,a){if(n.tag===3)Lm(n,n,a);else for(;s!==null;){if(s.tag===3){Lm(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ws===null||!ws.has(c))){n=fo(a,n),n=rm(s,n,1),s=vs(s,n,1),n=rn(),s!==null&&(os(s,1,n),dn(s,n));break}}s=s.return}}function Z_(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=rn(),n.pingedLanes|=n.suspendedLanes&a,jt===n&&(zt&a)===a&&(Rt===4||Rt===3&&(zt&130023424)===zt&&500>Je()-Oh?di(n,0):jh|=a),dn(n,s)}function Um(n,s){s===0&&((n.mode&1)===0?s=1:(s=Ui,Ui<<=1,(Ui&130023424)===0&&(Ui=4194304)));var a=rn();n=Lr(n,s),n!==null&&(os(n,s,a),dn(n,a))}function ew(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Um(n,a)}function tw(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Um(n,a)}var Fm;Fm=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||ln.current)cn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return cn=!1,B_(n,s,a);cn=(n.flags&131072)!==0}else cn=!1,st&&(s.flags&1048576)!==0&&_p(s,$l,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;su(n,s),n=s.pendingProps;var d=so(s,Wt.current);co(s,a),d=dh(null,s,c,n,d,a);var m=fh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,un(c)?(m=!0,Fl(s)):m=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ih(s),d.updater=nu,s.stateNode=d,d._reactInternals=s,_h(s,c,n,a),s=Th(null,s,c,!0,m,a)):(s.tag=0,st&&m&&Qc(s),nn(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(su(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=rw(c),n=Xn(c,n),d){case 0:s=Eh(null,s,c,n,a);break e;case 1:s=dm(null,s,c,n,a);break e;case 11:s=am(null,s,c,n,a);break e;case 14:s=lm(null,s,c,Xn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Xn(c,d),Eh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Xn(c,d),dm(n,s,c,d,a);case 3:e:{if(fm(s),n===null)throw Error(t(387));c=s.pendingProps,m=s.memoizedState,d=m.element,Rp(n,s),Ql(s,c,null,a);var w=s.memoizedState;if(c=w.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){d=fo(Error(t(423)),s),s=pm(n,s,c,a,d);break e}else if(c!==d){d=fo(Error(t(424)),s),s=pm(n,s,c,a,d);break e}else for(_n=fs(s.stateNode.containerInfo.firstChild),vn=s,st=!0,Qn=null,a=Sp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ao(),c===d){s=Fr(n,s,a);break e}nn(n,s,c,a)}s=s.child}return s;case 5:return Pp(s),n===null&&Jc(s),c=s.type,d=s.pendingProps,m=n!==null?n.memoizedProps:null,w=d.children,$c(c,d)?w=null:m!==null&&$c(c,m)&&(s.flags|=32),hm(n,s),nn(n,s,w,a),s.child;case 6:return n===null&&Jc(s),null;case 13:return mm(n,s,a);case 4:return oh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=lo(s,null,c,a):nn(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Xn(c,d),am(n,s,c,d,a);case 7:return nn(n,s,s.pendingProps,a),s.child;case 8:return nn(n,s,s.pendingProps.children,a),s.child;case 12:return nn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,m=s.memoizedProps,w=d.value,Ze(Wl,c._currentValue),c._currentValue=w,m!==null)if(Kn(m.value,w)){if(m.children===d.children&&!ln.current){s=Fr(n,s,a);break e}}else for(m=s.child,m!==null&&(m.return=s);m!==null;){var I=m.dependencies;if(I!==null){w=m.child;for(var C=I.firstContext;C!==null;){if(C.context===c){if(m.tag===1){C=Ur(-1,a&-a),C.tag=2;var B=m.updateQueue;if(B!==null){B=B.shared;var Q=B.pending;Q===null?C.next=C:(C.next=Q.next,Q.next=C),B.pending=C}}m.lanes|=a,C=m.alternate,C!==null&&(C.lanes|=a),rh(m.return,a,s),I.lanes|=a;break}C=C.next}}else if(m.tag===10)w=m.type===s.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,I=w.alternate,I!==null&&(I.lanes|=a),rh(w,a,s),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}nn(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,co(s,a),d=Cn(d),c=c(d),s.flags|=1,nn(n,s,c,a),s.child;case 14:return c=s.type,d=Xn(c,s.pendingProps),d=Xn(c.type,d),lm(n,s,c,d,a);case 15:return um(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Xn(c,d),su(n,s),s.tag=1,un(c)?(n=!0,Fl(s)):n=!1,co(s,a),em(s,c,d),_h(s,c,d,a),Th(null,s,c,!0,n,a);case 19:return ym(n,s,a);case 22:return cm(n,s,a)}throw Error(t(156,s.tag))};function zm(n,s){return Vi(n,s)}function nw(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(n,s,a,c){return new nw(n,s,a,c)}function $h(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rw(n){if(typeof n=="function")return $h(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===wt)return 14}return 2}function Is(n,s){var a=n.alternate;return a===null?(a=bn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function mu(n,s,a,c,d,m){var w=2;if(c=n,typeof n=="function")$h(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case R:return pi(a.children,d,m,s);case T:w=8,d|=8;break;case k:return n=bn(12,a,s,d|2),n.elementType=k,n.lanes=m,n;case S:return n=bn(13,a,s,d),n.elementType=S,n.lanes=m,n;case ot:return n=bn(19,a,s,d),n.elementType=ot,n.lanes=m,n;case ze:return gu(a,d,m,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:w=10;break e;case j:w=9;break e;case V:w=11;break e;case wt:w=14;break e;case Pt:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=bn(w,a,s,d),s.elementType=n,s.type=c,s.lanes=m,s}function pi(n,s,a,c){return n=bn(7,n,c,s),n.lanes=a,n}function gu(n,s,a,c){return n=bn(22,n,c,s),n.elementType=ze,n.lanes=a,n.stateNode={isHidden:!1},n}function Hh(n,s,a){return n=bn(6,n,null,s),n.lanes=a,n}function qh(n,s,a){return s=bn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function sw(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=is(0),this.expirationTimes=is(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=is(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Wh(n,s,a,c,d,m,w,I,C){return n=new sw(n,s,a,I,C),s===1?(s=1,m===!0&&(s|=8)):s=0,m=bn(3,null,null,s),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ih(m),n}function iw(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Bm(n){if(!n)return ms;n=n._reactInternals;e:{if(zn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(un(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(un(a))return gp(n,a,s)}return s}function $m(n,s,a,c,d,m,w,I,C){return n=Wh(a,c,!0,n,d,m,w,I,C),n.context=Bm(null),a=n.current,c=rn(),d=Es(a),m=Ur(c,d),m.callback=s??null,vs(a,m,d),n.current.lanes=d,os(n,d,c),dn(n,c),n}function yu(n,s,a,c){var d=s.current,m=rn(),w=Es(d);return a=Bm(a),s.context===null?s.context=a:s.pendingContext=a,s=Ur(m,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=vs(d,s,w),n!==null&&(Zn(n,d,w,m),Kl(n,d,w)),w}function vu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function Hm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Gh(n,s){Hm(n,s),(n=n.alternate)&&Hm(n,s)}function ow(){return null}var qm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Kh(n){this._internalRoot=n}_u.prototype.render=Kh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));yu(n,s,null,null)},_u.prototype.unmount=Kh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;hi(function(){yu(null,n,null,null)}),s[jr]=null}};function _u(n){this._internalRoot=n}_u.prototype.unstable_scheduleHydration=function(n){if(n){var s=_l();n={blockedOn:null,target:n,priority:s};for(var a=0;a<lr.length&&s!==0&&s<lr[a].priority;a++);lr.splice(a,0,n),a===0&&El(n)}};function Qh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function wu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Wm(){}function aw(n,s,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var B=vu(w);m.call(B)}}var w=$m(s,c,n,0,null,!1,!1,"",Wm);return n._reactRootContainer=w,n[jr]=w.current,oa(n.nodeType===8?n.parentNode:n),hi(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var I=c;c=function(){var B=vu(C);I.call(B)}}var C=Wh(n,0,!1,null,null,!1,!1,"",Wm);return n._reactRootContainer=C,n[jr]=C.current,oa(n.nodeType===8?n.parentNode:n),hi(function(){yu(s,C,a,c)}),C}function xu(n,s,a,c,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var I=d;d=function(){var C=vu(w);I.call(C)}}yu(s,w,n,d)}else w=aw(a,s,n,d,c);return vu(w)}yl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=ss(s.pendingLanes);a!==0&&(as(s,a|1),dn(s,Je()),(Fe&6)===0&&(go=Je()+500,gs()))}break;case 13:hi(function(){var c=Lr(n,1);if(c!==null){var d=rn();Zn(c,n,1,d)}}),Gh(n,1)}},Fi=function(n){if(n.tag===13){var s=Lr(n,134217728);if(s!==null){var a=rn();Zn(s,n,134217728,a)}Gh(n,134217728)}},vl=function(n){if(n.tag===13){var s=Es(n),a=Lr(n,s);if(a!==null){var c=rn();Zn(a,n,s,c)}Gh(n,s)}},_l=function(){return Me},wl=function(n,s){var a=Me;try{return Me=n,s()}finally{Me=a}},sr=function(n,s,a){switch(s){case"input":if(zs(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=Ll(c);if(!d)throw Error(t(90));ht(c),zs(c,d)}}}break;case"textarea":ns(n,a);break;case"select":s=a.value,s!=null&&Mn(n,!!a.multiple,s,!1)}},qs=Fh,zo=hi;var lw={usingClientEntryPoint:!1,Events:[ua,no,Ll,or,Fo,Fh]},Ta={findFiberByHostInstance:ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uw={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ho(n),n===null?null:n.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||ow,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{Xs=Eu.inject(uw),pn=Eu}catch{}}return fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lw,fn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qh(s))throw Error(t(200));return iw(n,s,null,a)},fn.createRoot=function(n,s){if(!Qh(n))throw Error(t(299));var a=!1,c="",d=qm;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Wh(n,1,!1,null,null,a,!1,c,d),n[jr]=s.current,oa(n.nodeType===8?n.parentNode:n),new Kh(s)},fn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ho(s),n=n===null?null:n.stateNode,n},fn.flushSync=function(n){return hi(n)},fn.hydrate=function(n,s,a){if(!wu(s))throw Error(t(200));return xu(null,n,s,!0,a)},fn.hydrateRoot=function(n,s,a){if(!Qh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",w=qm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=$m(s,null,n,1,a??null,d,!1,m,w),n[jr]=s.current,oa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new _u(s)},fn.render=function(n,s,a){if(!wu(s))throw Error(t(200));return xu(null,n,s,!1,a)},fn.unmountComponentAtNode=function(n){if(!wu(n))throw Error(t(40));return n._reactRootContainer?(hi(function(){xu(null,null,n,!1,function(){n._reactRootContainer=null,n[jr]=null})}),!0):!1},fn.unstable_batchedUpdates=Fh,fn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!wu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return xu(n,s,a,!1,c)},fn.version="18.3.1-next-f1338f8080-20240426",fn}var eg;function vw(){if(eg)return Jh.exports;eg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Jh.exports=yw(),Jh.exports}var tg;function _w(){if(tg)return Tu;tg=1;var r=vw();return Tu.createRoot=r.createRoot,Tu.hydrateRoot=r.hydrateRoot,Tu}var ww=_w();const xw=Ty(ww);var ng={};const Iy=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Ew=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],y=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},ky={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,y=o+2<r.length,_=y?r[o+2]:0,E=l>>2,A=(l&3)<<4|f>>4;let b=(f&15)<<2|_>>6,M=_&63;y||(M=64,h||(b=64)),i.push(t[E],t[A],t[b],t[M])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Iy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Ew(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const A=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||_==null||A==null)throw new Tw;const b=l<<2|f>>4;if(i.push(b),_!==64){const M=f<<4&240|_>>2;if(i.push(M),A!==64){const P=_<<6&192|A;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Tw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Iw=function(r){const e=Iy(r);return ky.encodeByteArray(e,!0)},$u=function(r){return Iw(r).replace(/\./g,"")},Sy=function(r){try{return ky.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Sw=()=>kw().__FIREBASE_DEFAULTS__,Aw=()=>{if(typeof process>"u"||typeof ng>"u")return;const r=ng.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Rw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Sy(r[1]);return e&&JSON.parse(e)},lc=()=>{try{return Sw()||Aw()||Rw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ay=r=>{var e,t;return(t=(e=lc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Ry=r=>{const e=Ay(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Cy=()=>{var r;return(r=lc())===null||r===void 0?void 0:r.config},Ny=r=>{var e;return(e=lc())===null||e===void 0?void 0:e[`_${r}`]};class Cw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Py(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[$u(JSON.stringify(t)),$u(JSON.stringify(h)),""].join(".")}function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function Pw(){var r;const e=(r=lc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Dw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ow(){const r=Zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Mw(){return!Pw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vw(){try{return typeof indexedDB=="object"}catch{return!1}}function Lw(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}const Uw="FirebaseError";class Sr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Uw,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Fw(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Sr(o,f,i)}}function Fw(r,e){return r.replace(zw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const zw=/\{\$([^}]+)}/g;function Bw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Hu(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(rg(l)&&rg(h)){if(!Hu(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function rg(r){return r!==null&&typeof r=="object"}function Ya(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $w(r,e){const t=new Hw(r,e);return t.subscribe.bind(t)}class Hw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");qw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=td),o.error===void 0&&(o.error=td),o.complete===void 0&&(o.complete=td);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qw(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function td(){}function Vt(r){return r&&r._delegate?r._delegate:r}class Ms{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const gi="[DEFAULT]";class Ww{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Cw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kw(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Gw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gw(r){return r===gi?void 0:r}function Kw(r){return r.instantiationMode==="EAGER"}class Qw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ww(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const Xw={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Yw=Ve.INFO,Jw={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Zw=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=Jw[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hd{constructor(e){this.name=e,this._logLevel=Yw,this._logHandler=Zw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const ex=(r,e)=>e.some(t=>r instanceof t);let sg,ig;function tx(){return sg||(sg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nx(){return ig||(ig=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const by=new WeakMap,pd=new WeakMap,Dy=new WeakMap,nd=new WeakMap,qd=new WeakMap;function rx(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(bs(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&by.set(t,r)}).catch(()=>{}),qd.set(e,r),e}function sx(r){if(pd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});pd.set(r,e)}let md={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return pd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Dy.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ix(r){md=r(md)}function ox(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(rd(this),e,...t);return Dy.set(i,e.sort?e.sort():[e]),bs(i)}:nx().includes(r)?function(...e){return r.apply(rd(this),e),bs(by.get(this))}:function(...e){return bs(r.apply(rd(this),e))}}function ax(r){return typeof r=="function"?ox(r):(r instanceof IDBTransaction&&sx(r),ex(r,tx())?new Proxy(r,md):r)}function bs(r){if(r instanceof IDBRequest)return rx(r);if(nd.has(r))return nd.get(r);const e=ax(r);return e!==r&&(nd.set(r,e),qd.set(e,r)),e}const rd=r=>qd.get(r);function lx(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=bs(h);return i&&h.addEventListener("upgradeneeded",y=>{i(bs(h.result),y.oldVersion,y.newVersion,bs(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),f.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const ux=["get","getKey","getAll","getAllKeys","count"],cx=["put","add","delete","clear"],sd=new Map;function og(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(sd.get(e))return sd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=cx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||ux.includes(t)))return;const l=async function(h,...f){const y=this.transaction(h,o?"readwrite":"readonly");let _=y.store;return i&&(_=_.index(f.shift())),(await Promise.all([_[t](...f),o&&y.done]))[0]};return sd.set(e,l),l}ix(r=>({...r,get:(e,t,i)=>og(e,t)||r.get(e,t,i),has:(e,t)=>!!og(e,t)||r.has(e,t)}));class hx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function dx(r){const e=r.getComponent();return e?.type==="VERSION"}const gd="@firebase/app",ag="0.10.13";const Qr=new Hd("@firebase/app"),fx="@firebase/app-compat",px="@firebase/analytics-compat",mx="@firebase/analytics",gx="@firebase/app-check-compat",yx="@firebase/app-check",vx="@firebase/auth",_x="@firebase/auth-compat",wx="@firebase/database",xx="@firebase/data-connect",Ex="@firebase/database-compat",Tx="@firebase/functions",Ix="@firebase/functions-compat",kx="@firebase/installations",Sx="@firebase/installations-compat",Ax="@firebase/messaging",Rx="@firebase/messaging-compat",Cx="@firebase/performance",Nx="@firebase/performance-compat",Px="@firebase/remote-config",bx="@firebase/remote-config-compat",Dx="@firebase/storage",jx="@firebase/storage-compat",Ox="@firebase/firestore",Mx="@firebase/vertexai-preview",Vx="@firebase/firestore-compat",Lx="firebase",Ux="10.14.1";const yd="[DEFAULT]",Fx={[gd]:"fire-core",[fx]:"fire-core-compat",[mx]:"fire-analytics",[px]:"fire-analytics-compat",[yx]:"fire-app-check",[gx]:"fire-app-check-compat",[vx]:"fire-auth",[_x]:"fire-auth-compat",[wx]:"fire-rtdb",[xx]:"fire-data-connect",[Ex]:"fire-rtdb-compat",[Tx]:"fire-fn",[Ix]:"fire-fn-compat",[kx]:"fire-iid",[Sx]:"fire-iid-compat",[Ax]:"fire-fcm",[Rx]:"fire-fcm-compat",[Cx]:"fire-perf",[Nx]:"fire-perf-compat",[Px]:"fire-rc",[bx]:"fire-rc-compat",[Dx]:"fire-gcs",[jx]:"fire-gcs-compat",[Ox]:"fire-fst",[Vx]:"fire-fst-compat",[Mx]:"fire-vertex","fire-js":"fire-js",[Lx]:"fire-js-all"};const qu=new Map,zx=new Map,vd=new Map;function lg(r,e){try{r.container.addComponent(e)}catch(t){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ei(r){const e=r.name;if(vd.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;vd.set(e,r);for(const t of qu.values())lg(t,r);for(const t of zx.values())lg(t,r);return!0}function uc(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Hr(r){return r.settings!==void 0}const Bx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new Xa("app","Firebase",Bx);class $x{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}const Ri=Ux;function jy(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:yd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ds.create("bad-app-name",{appName:String(o)});if(t||(t=Cy()),!t)throw Ds.create("no-options");const l=qu.get(o);if(l){if(Hu(t,l.options)&&Hu(i,l.config))return l;throw Ds.create("duplicate-app",{appName:o})}const h=new Qw(o);for(const y of vd.values())h.addComponent(y);const f=new $x(t,i,h);return qu.set(o,f),f}function Wd(r=yd){const e=qu.get(r);if(!e&&r===yd&&Cy())return jy();if(!e)throw Ds.create("no-app",{appName:r});return e}function vr(r,e,t){var i;let o=(i=Fx[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(f.join(" "));return}Ei(new Ms(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const Hx="firebase-heartbeat-database",qx=1,La="firebase-heartbeat-store";let id=null;function Oy(){return id||(id=lx(Hx,qx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(La)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ds.create("idb-open",{originalErrorMessage:r.message})})),id}async function Wx(r){try{const t=(await Oy()).transaction(La),i=await t.objectStore(La).get(My(r));return await t.done,i}catch(e){if(e instanceof Sr)Qr.warn(e.message);else{const t=Ds.create("idb-get",{originalErrorMessage:e?.message});Qr.warn(t.message)}}}async function ug(r,e){try{const i=(await Oy()).transaction(La,"readwrite");await i.objectStore(La).put(e,My(r)),await i.done}catch(t){if(t instanceof Sr)Qr.warn(t.message);else{const i=Ds.create("idb-set",{originalErrorMessage:t?.message});Qr.warn(i.message)}}}function My(r){return`${r.name}!${r.options.appId}`}const Gx=1024,Kx=720*60*60*1e3;class Qx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Yx(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=cg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=Kx}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Qr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cg(),{heartbeatsToSend:i,unsentEntries:o}=Xx(this._heartbeatsCache.heartbeats),l=$u(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Qr.warn(t),""}}}function cg(){return new Date().toISOString().substring(0,10)}function Xx(r,e=Gx){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),hg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),hg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Yx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vw()?Lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Wx(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ug(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ug(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function hg(r){return $u(JSON.stringify({version:2,heartbeats:r})).length}function Jx(r){Ei(new Ms("platform-logger",e=>new hx(e),"PRIVATE")),Ei(new Ms("heartbeat",e=>new Qx(e),"PRIVATE")),vr(gd,ag,r),vr(gd,ag,"esm2017"),vr("fire-js","")}Jx("");var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _i,Vy;(function(){var r;function e(R,T){function k(){}k.prototype=T.prototype,R.D=T.prototype,R.prototype=new k,R.prototype.constructor=R,R.C=function(N,j,V){for(var S=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)S[ot-2]=arguments[ot];return T.prototype[j].apply(N,S)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,T,k){k||(k=0);var N=Array(16);if(typeof T=="string")for(var j=0;16>j;++j)N[j]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(j=0;16>j;++j)N[j]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=R.g[0],k=R.g[1],j=R.g[2];var V=R.g[3],S=T+(V^k&(j^V))+N[0]+3614090360&4294967295;T=k+(S<<7&4294967295|S>>>25),S=V+(j^T&(k^j))+N[1]+3905402710&4294967295,V=T+(S<<12&4294967295|S>>>20),S=j+(k^V&(T^k))+N[2]+606105819&4294967295,j=V+(S<<17&4294967295|S>>>15),S=k+(T^j&(V^T))+N[3]+3250441966&4294967295,k=j+(S<<22&4294967295|S>>>10),S=T+(V^k&(j^V))+N[4]+4118548399&4294967295,T=k+(S<<7&4294967295|S>>>25),S=V+(j^T&(k^j))+N[5]+1200080426&4294967295,V=T+(S<<12&4294967295|S>>>20),S=j+(k^V&(T^k))+N[6]+2821735955&4294967295,j=V+(S<<17&4294967295|S>>>15),S=k+(T^j&(V^T))+N[7]+4249261313&4294967295,k=j+(S<<22&4294967295|S>>>10),S=T+(V^k&(j^V))+N[8]+1770035416&4294967295,T=k+(S<<7&4294967295|S>>>25),S=V+(j^T&(k^j))+N[9]+2336552879&4294967295,V=T+(S<<12&4294967295|S>>>20),S=j+(k^V&(T^k))+N[10]+4294925233&4294967295,j=V+(S<<17&4294967295|S>>>15),S=k+(T^j&(V^T))+N[11]+2304563134&4294967295,k=j+(S<<22&4294967295|S>>>10),S=T+(V^k&(j^V))+N[12]+1804603682&4294967295,T=k+(S<<7&4294967295|S>>>25),S=V+(j^T&(k^j))+N[13]+4254626195&4294967295,V=T+(S<<12&4294967295|S>>>20),S=j+(k^V&(T^k))+N[14]+2792965006&4294967295,j=V+(S<<17&4294967295|S>>>15),S=k+(T^j&(V^T))+N[15]+1236535329&4294967295,k=j+(S<<22&4294967295|S>>>10),S=T+(j^V&(k^j))+N[1]+4129170786&4294967295,T=k+(S<<5&4294967295|S>>>27),S=V+(k^j&(T^k))+N[6]+3225465664&4294967295,V=T+(S<<9&4294967295|S>>>23),S=j+(T^k&(V^T))+N[11]+643717713&4294967295,j=V+(S<<14&4294967295|S>>>18),S=k+(V^T&(j^V))+N[0]+3921069994&4294967295,k=j+(S<<20&4294967295|S>>>12),S=T+(j^V&(k^j))+N[5]+3593408605&4294967295,T=k+(S<<5&4294967295|S>>>27),S=V+(k^j&(T^k))+N[10]+38016083&4294967295,V=T+(S<<9&4294967295|S>>>23),S=j+(T^k&(V^T))+N[15]+3634488961&4294967295,j=V+(S<<14&4294967295|S>>>18),S=k+(V^T&(j^V))+N[4]+3889429448&4294967295,k=j+(S<<20&4294967295|S>>>12),S=T+(j^V&(k^j))+N[9]+568446438&4294967295,T=k+(S<<5&4294967295|S>>>27),S=V+(k^j&(T^k))+N[14]+3275163606&4294967295,V=T+(S<<9&4294967295|S>>>23),S=j+(T^k&(V^T))+N[3]+4107603335&4294967295,j=V+(S<<14&4294967295|S>>>18),S=k+(V^T&(j^V))+N[8]+1163531501&4294967295,k=j+(S<<20&4294967295|S>>>12),S=T+(j^V&(k^j))+N[13]+2850285829&4294967295,T=k+(S<<5&4294967295|S>>>27),S=V+(k^j&(T^k))+N[2]+4243563512&4294967295,V=T+(S<<9&4294967295|S>>>23),S=j+(T^k&(V^T))+N[7]+1735328473&4294967295,j=V+(S<<14&4294967295|S>>>18),S=k+(V^T&(j^V))+N[12]+2368359562&4294967295,k=j+(S<<20&4294967295|S>>>12),S=T+(k^j^V)+N[5]+4294588738&4294967295,T=k+(S<<4&4294967295|S>>>28),S=V+(T^k^j)+N[8]+2272392833&4294967295,V=T+(S<<11&4294967295|S>>>21),S=j+(V^T^k)+N[11]+1839030562&4294967295,j=V+(S<<16&4294967295|S>>>16),S=k+(j^V^T)+N[14]+4259657740&4294967295,k=j+(S<<23&4294967295|S>>>9),S=T+(k^j^V)+N[1]+2763975236&4294967295,T=k+(S<<4&4294967295|S>>>28),S=V+(T^k^j)+N[4]+1272893353&4294967295,V=T+(S<<11&4294967295|S>>>21),S=j+(V^T^k)+N[7]+4139469664&4294967295,j=V+(S<<16&4294967295|S>>>16),S=k+(j^V^T)+N[10]+3200236656&4294967295,k=j+(S<<23&4294967295|S>>>9),S=T+(k^j^V)+N[13]+681279174&4294967295,T=k+(S<<4&4294967295|S>>>28),S=V+(T^k^j)+N[0]+3936430074&4294967295,V=T+(S<<11&4294967295|S>>>21),S=j+(V^T^k)+N[3]+3572445317&4294967295,j=V+(S<<16&4294967295|S>>>16),S=k+(j^V^T)+N[6]+76029189&4294967295,k=j+(S<<23&4294967295|S>>>9),S=T+(k^j^V)+N[9]+3654602809&4294967295,T=k+(S<<4&4294967295|S>>>28),S=V+(T^k^j)+N[12]+3873151461&4294967295,V=T+(S<<11&4294967295|S>>>21),S=j+(V^T^k)+N[15]+530742520&4294967295,j=V+(S<<16&4294967295|S>>>16),S=k+(j^V^T)+N[2]+3299628645&4294967295,k=j+(S<<23&4294967295|S>>>9),S=T+(j^(k|~V))+N[0]+4096336452&4294967295,T=k+(S<<6&4294967295|S>>>26),S=V+(k^(T|~j))+N[7]+1126891415&4294967295,V=T+(S<<10&4294967295|S>>>22),S=j+(T^(V|~k))+N[14]+2878612391&4294967295,j=V+(S<<15&4294967295|S>>>17),S=k+(V^(j|~T))+N[5]+4237533241&4294967295,k=j+(S<<21&4294967295|S>>>11),S=T+(j^(k|~V))+N[12]+1700485571&4294967295,T=k+(S<<6&4294967295|S>>>26),S=V+(k^(T|~j))+N[3]+2399980690&4294967295,V=T+(S<<10&4294967295|S>>>22),S=j+(T^(V|~k))+N[10]+4293915773&4294967295,j=V+(S<<15&4294967295|S>>>17),S=k+(V^(j|~T))+N[1]+2240044497&4294967295,k=j+(S<<21&4294967295|S>>>11),S=T+(j^(k|~V))+N[8]+1873313359&4294967295,T=k+(S<<6&4294967295|S>>>26),S=V+(k^(T|~j))+N[15]+4264355552&4294967295,V=T+(S<<10&4294967295|S>>>22),S=j+(T^(V|~k))+N[6]+2734768916&4294967295,j=V+(S<<15&4294967295|S>>>17),S=k+(V^(j|~T))+N[13]+1309151649&4294967295,k=j+(S<<21&4294967295|S>>>11),S=T+(j^(k|~V))+N[4]+4149444226&4294967295,T=k+(S<<6&4294967295|S>>>26),S=V+(k^(T|~j))+N[11]+3174756917&4294967295,V=T+(S<<10&4294967295|S>>>22),S=j+(T^(V|~k))+N[2]+718787259&4294967295,j=V+(S<<15&4294967295|S>>>17),S=k+(V^(j|~T))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(j+(S<<21&4294967295|S>>>11))&4294967295,R.g[2]=R.g[2]+j&4294967295,R.g[3]=R.g[3]+V&4294967295}i.prototype.u=function(R,T){T===void 0&&(T=R.length);for(var k=T-this.blockSize,N=this.B,j=this.h,V=0;V<T;){if(j==0)for(;V<=k;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<T;)if(N[j++]=R.charCodeAt(V++),j==this.blockSize){o(this,N),j=0;break}}else for(;V<T;)if(N[j++]=R[V++],j==this.blockSize){o(this,N),j=0;break}}this.h=j,this.o+=T},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;var k=8*this.o;for(T=R.length-8;T<R.length;++T)R[T]=k&255,k/=256;for(this.u(R),R=Array(16),T=k=0;4>T;++T)for(var N=0;32>N;N+=8)R[k++]=this.g[T]>>>N&255;return R};function l(R,T){var k=f;return Object.prototype.hasOwnProperty.call(k,R)?k[R]:k[R]=T(R)}function h(R,T){this.h=T;for(var k=[],N=!0,j=R.length-1;0<=j;j--){var V=R[j]|0;N&&V==T||(k[j]=V,N=!1)}this.g=k}var f={};function y(R){return-128<=R&&128>R?l(R,function(T){return new h([T|0],0>T?-1:0)}):new h([R|0],0>R?-1:0)}function _(R){if(isNaN(R)||!isFinite(R))return A;if(0>R)return F(_(-R));for(var T=[],k=1,N=0;R>=k;N++)T[N]=R/k|0,k*=4294967296;return new h(T,0)}function E(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return F(E(R.substring(1),T));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=_(Math.pow(T,8)),N=A,j=0;j<R.length;j+=8){var V=Math.min(8,R.length-j),S=parseInt(R.substring(j,j+V),T);8>V?(V=_(Math.pow(T,V)),N=N.j(V).add(_(S))):(N=N.j(k),N=N.add(_(S)))}return N}var A=y(0),b=y(1),M=y(16777216);r=h.prototype,r.m=function(){if(H(this))return-F(this).m();for(var R=0,T=1,k=0;k<this.g.length;k++){var N=this.i(k);R+=(0<=N?N:4294967296+N)*T,T*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P(this))return"0";if(H(this))return"-"+F(this).toString(R);for(var T=_(Math.pow(R,6)),k=this,N="";;){var j=se(k,T).g;k=q(k,j.j(T));var V=((0<k.g.length?k.g[0]:k.h)>>>0).toString(R);if(k=j,P(k))return V+N;for(;6>V.length;)V="0"+V;N=V+N}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function P(R){if(R.h!=0)return!1;for(var T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function H(R){return R.h==-1}r.l=function(R){return R=q(this,R),H(R)?-1:P(R)?0:1};function F(R){for(var T=R.g.length,k=[],N=0;N<T;N++)k[N]=~R.g[N];return new h(k,~R.h).add(b)}r.abs=function(){return H(this)?F(this):this},r.add=function(R){for(var T=Math.max(this.g.length,R.g.length),k=[],N=0,j=0;j<=T;j++){var V=N+(this.i(j)&65535)+(R.i(j)&65535),S=(V>>>16)+(this.i(j)>>>16)+(R.i(j)>>>16);N=S>>>16,V&=65535,S&=65535,k[j]=S<<16|V}return new h(k,k[k.length-1]&-2147483648?-1:0)};function q(R,T){return R.add(F(T))}r.j=function(R){if(P(this)||P(R))return A;if(H(this))return H(R)?F(this).j(F(R)):F(F(this).j(R));if(H(R))return F(this.j(F(R)));if(0>this.l(M)&&0>R.l(M))return _(this.m()*R.m());for(var T=this.g.length+R.g.length,k=[],N=0;N<2*T;N++)k[N]=0;for(N=0;N<this.g.length;N++)for(var j=0;j<R.g.length;j++){var V=this.i(N)>>>16,S=this.i(N)&65535,ot=R.i(j)>>>16,wt=R.i(j)&65535;k[2*N+2*j]+=S*wt,W(k,2*N+2*j),k[2*N+2*j+1]+=V*wt,W(k,2*N+2*j+1),k[2*N+2*j+1]+=S*ot,W(k,2*N+2*j+1),k[2*N+2*j+2]+=V*ot,W(k,2*N+2*j+2)}for(N=0;N<T;N++)k[N]=k[2*N+1]<<16|k[2*N];for(N=T;N<2*T;N++)k[N]=0;return new h(k,0)};function W(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function ne(R,T){this.g=R,this.h=T}function se(R,T){if(P(T))throw Error("division by zero");if(P(R))return new ne(A,A);if(H(R))return T=se(F(R),T),new ne(F(T.g),F(T.h));if(H(T))return T=se(R,F(T)),new ne(F(T.g),T.h);if(30<R.g.length){if(H(R)||H(T))throw Error("slowDivide_ only works with positive integers.");for(var k=b,N=T;0>=N.l(R);)k=Ee(k),N=Ee(N);var j=ie(k,1),V=ie(N,1);for(N=ie(N,2),k=ie(k,2);!P(N);){var S=V.add(N);0>=S.l(R)&&(j=j.add(k),V=S),N=ie(N,1),k=ie(k,1)}return T=q(R,j.j(T)),new ne(j,T)}for(j=A;0<=R.l(T);){for(k=Math.max(1,Math.floor(R.m()/T.m())),N=Math.ceil(Math.log(k)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),V=_(k),S=V.j(T);H(S)||0<S.l(R);)k-=N,V=_(k),S=V.j(T);P(V)&&(V=b),j=j.add(V),R=q(R,S)}return new ne(j,R)}r.A=function(R){return se(this,R).h},r.and=function(R){for(var T=Math.max(this.g.length,R.g.length),k=[],N=0;N<T;N++)k[N]=this.i(N)&R.i(N);return new h(k,this.h&R.h)},r.or=function(R){for(var T=Math.max(this.g.length,R.g.length),k=[],N=0;N<T;N++)k[N]=this.i(N)|R.i(N);return new h(k,this.h|R.h)},r.xor=function(R){for(var T=Math.max(this.g.length,R.g.length),k=[],N=0;N<T;N++)k[N]=this.i(N)^R.i(N);return new h(k,this.h^R.h)};function Ee(R){for(var T=R.g.length+1,k=[],N=0;N<T;N++)k[N]=R.i(N)<<1|R.i(N-1)>>>31;return new h(k,R.h)}function ie(R,T){var k=T>>5;T%=32;for(var N=R.g.length-k,j=[],V=0;V<N;V++)j[V]=0<T?R.i(V+k)>>>T|R.i(V+k+1)<<32-T:R.i(V+k);return new h(j,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Vy=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,_i=h}).apply(typeof dg<"u"?dg:typeof self<"u"?self:typeof window<"u"?window:{});var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ly,Aa,Uy,Du,_d,Fy,zy,By;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,v){return u==Array.prototype||u==Object.prototype||(u[p]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Iu=="object"&&Iu];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var v=i;u=u.split(".");for(var x=0;x<u.length-1;x++){var L=u[x];if(!(L in v))break e;v=v[L]}u=u[u.length-1],x=v[u],p=p(x),p!=x&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var v=0,x=!1,L={next:function(){if(!x&&v<u.length){var $=v++;return{value:p($,u[$]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,v){return v})}});var h=h||{},f=this||self;function y(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function _(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function E(u,p,v){return u.call.apply(u.bind,arguments)}function A(u,p,v){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function b(u,p,v){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,b.apply(null,arguments)}function M(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var x=v.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function P(u,p){function v(){}v.prototype=p.prototype,u.aa=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(x,L,$){for(var ee=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ee[Ke-2]=arguments[Ke];return p.prototype[L].apply(x,ee)}}function H(u){const p=u.length;if(0<p){const v=Array(p);for(let x=0;x<p;x++)v[x]=u[x];return v}return[]}function F(u,p){for(let v=1;v<arguments.length;v++){const x=arguments[v];if(y(x)){const L=u.length||0,$=x.length||0;u.length=L+$;for(let ee=0;ee<$;ee++)u[L+ee]=x[ee]}else u.push(x)}}class q{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function W(u){return/^[\s\xa0]*$/.test(u)}function ne(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function se(u){return se[" "](u),u}se[" "]=function(){};var Ee=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function ie(u,p,v){for(const x in u)p.call(v,u[x],x,u)}function R(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function T(u){const p={};for(const v in u)p[v]=u[v];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,p){let v,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(v in x)u[v]=x[v];for(let $=0;$<k.length;$++)v=k[$],Object.prototype.hasOwnProperty.call(x,v)&&(u[v]=x[v])}}function j(u){var p=1;u=u.split(":");const v=[];for(;0<p&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function V(u){f.setTimeout(()=>{throw u},0)}function S(){var u=ye;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ot{constructor(){this.h=this.g=null}add(p,v){const x=wt.get();x.set(p,v),this.h?this.h.next=x:this.g=x,this.h=x}}var wt=new q(()=>new Pt,u=>u.reset());class Pt{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,te=!1,ye=new ot,oe=()=>{const u=f.Promise.resolve(void 0);ze=()=>{u.then(O)}};var O=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(v){V(v)}var p=wt;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}te=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ce=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};f.addEventListener("test",v,p),f.removeEventListener("test",v,p)}catch{}return u})();function Ne(u,p){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Ee){e:{try{se(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ne.aa.h.call(this)}}P(Ne,fe);var Pe={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function qe(u,p,v,x,L){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!x,this.ha=L,this.key=++Oe,this.da=this.fa=!1}function xt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function jn(u){this.src=u,this.g={},this.h=0}jn.prototype.add=function(u,p,v,x,L){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ee=rr(u,p,x,L);return-1<ee?(p=u[ee],v||(p.fa=!1)):(p=new qe(p,this.src,$,!!x,L),p.fa=v,u.push(p)),p};function ht(u,p){var v=p.type;if(v in u.g){var x=u.g[v],L=Array.prototype.indexOf.call(x,p,void 0),$;($=0<=L)&&Array.prototype.splice.call(x,L,1),$&&(xt(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function rr(u,p,v,x){for(var L=0;L<u.length;++L){var $=u[L];if(!$.da&&$.listener==p&&$.capture==!!v&&$.ha==x)return L}return-1}var Ar="closure_lm_"+(1e6*Math.random()|0),Zr={};function Fs(u,p,v,x,L){if(Array.isArray(p)){for(var $=0;$<p.length;$++)Fs(u,p[$],v,x,L);return null}return v=$s(v),u&&u[je]?u.K(p,v,_(x)?!!x.capture:!1,L):zs(u,p,v,!1,x,L)}function zs(u,p,v,x,L,$){if(!p)throw Error("Invalid event type");var ee=_(L)?!!L.capture:!!L,Ke=ts(u);if(Ke||(u[Ar]=Ke=new jn(u)),v=Ke.add(p,v,x,ee,$),v.proxy)return v;if(x=Pi(),v.proxy=x,x.src=u,x.listener=v,u.addEventListener)Ce||(L=ee),L===void 0&&(L=!1),u.addEventListener(p.toString(),x,L);else if(u.attachEvent)u.attachEvent(Mn(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Pi(){function u(v){return p.call(u.src,u.listener,v)}const p=Bs;return u}function es(u,p,v,x,L){if(Array.isArray(p))for(var $=0;$<p.length;$++)es(u,p[$],v,x,L);else x=_(x)?!!x.capture:!!x,v=$s(v),u&&u[je]?(u=u.i,p=String(p).toString(),p in u.g&&($=u.g[p],v=rr($,v,x,L),-1<v&&(xt($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete u.g[p],u.h--)))):u&&(u=ts(u))&&(p=u.g[p.toString()],u=-1,p&&(u=rr(p,v,x,L)),(v=-1<u?p[u]:null)&&On(v))}function On(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[je])ht(p.i,u);else{var v=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(v,x,u.capture):p.detachEvent?p.detachEvent(Mn(v),x):p.addListener&&p.removeListener&&p.removeListener(x),(v=ts(p))?(ht(v,u),v.h==0&&(v.src=null,p[Ar]=null)):xt(u)}}}function Mn(u){return u in Zr?Zr[u]:Zr[u]="on"+u}function Bs(u,p){if(u.da)u=!0;else{p=new Ne(p,this);var v=u.listener,x=u.ha||u.src;u.fa&&On(u),u=v.call(x,p)}return u}function ts(u){return u=u[Ar],u instanceof jn?u:null}var ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function $s(u){return typeof u=="function"?u:(u[ns]||(u[ns]=function(p){return u.handleEvent(p)}),u[ns])}function mt(){G.call(this),this.i=new jn(this),this.M=this,this.F=null}P(mt,G),mt.prototype[je]=!0,mt.prototype.removeEventListener=function(u,p,v,x){es(this,u,p,v,x)};function gt(u,p){var v,x=u.F;if(x)for(v=[];x;x=x.F)v.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new fe(p,u);else if(p instanceof fe)p.target=p.target||u;else{var L=p;p=new fe(x,u),N(p,L)}if(L=!0,v)for(var $=v.length-1;0<=$;$--){var ee=p.g=v[$];L=Vn(ee,x,!0,p)&&L}if(ee=p.g=u,L=Vn(ee,x,!0,p)&&L,L=Vn(ee,x,!1,p)&&L,v)for($=0;$<v.length;$++)ee=p.g=v[$],L=Vn(ee,x,!1,p)&&L}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var v=u.g[p],x=0;x<v.length;x++)xt(v[x]);delete u.g[p],u.h--}}this.F=null},mt.prototype.K=function(u,p,v,x){return this.i.add(String(u),p,!1,v,x)},mt.prototype.L=function(u,p,v,x){return this.i.add(String(u),p,!0,v,x)};function Vn(u,p,v,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,$=0;$<p.length;++$){var ee=p[$];if(ee&&!ee.da&&ee.capture==v){var Ke=ee.listener,St=ee.ha||ee.src;ee.fa&&ht(u.i,ee),L=Ke.call(St,x)!==!1&&L}}return L&&!x.defaultPrevented}function Hs(u,p,v){if(typeof u=="function")v&&(u=b(u,v));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function re(u){u.g=Hs(()=>{u.g=null,u.i&&(u.i=!1,re(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class le extends G{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ge(u){G.call(this),this.h=u,this.g={}}P(ge,G);var nt=[];function Ge(u){ie(u.g,function(p,v){this.g.hasOwnProperty(v)&&On(p)},u),u.g={}}ge.prototype.N=function(){ge.aa.N.call(this),Ge(this)},ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var We=f.JSON.stringify,Et=f.JSON.parse,Be=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ye(){}Ye.prototype.h=null;function Ln(u){return u.h||(u.h=u.i())}function sr(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ir(){fe.call(this,"d")}P(ir,fe);function bi(){fe.call(this,"c")}P(bi,fe);var or={},Fo=null;function qs(){return Fo=Fo||new mt}or.La="serverreachability";function zo(u){fe.call(this,or.La,u)}P(zo,fe);function Rr(u){const p=qs();gt(p,new zo(p))}or.STAT_EVENT="statevent";function Bo(u,p){fe.call(this,or.STAT_EVENT,u),this.stat=p}P(Bo,fe);function yt(u){const p=qs();gt(p,new Bo(p,u))}or.Ma="timingevent";function Di(u,p){fe.call(this,or.Ma,u),this.size=p}P(Di,fe);function Un(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Ws(){this.g=!0}Ws.prototype.xa=function(){this.g=!1};function Gs(u,p,v,x,L,$){u.info(function(){if(u.g)if($)for(var ee="",Ke=$.split("&"),St=0;St<Ke.length;St++){var Le=Ke[St].split("=");if(1<Le.length){var bt=Le[0];Le=Le[1];var Tt=bt.split("_");ee=2<=Tt.length&&Tt[1]=="type"?ee+(bt+"="+Le+"&"):ee+(bt+"=redacted&")}}else ee=null;else ee=$;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+p+`
`+v+`
`+ee})}function ji(u,p,v,x,L,$,ee){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+p+`
`+v+`
`+$+" "+ee})}function Fn(u,p,v,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ic(u,v)+(x?" "+x:"")})}function $o(u,p){u.info(function(){return"TIMEOUT: "+p})}Ws.prototype.info=function(){};function Ic(u,p){if(!u.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var x=v[u];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var ee=1;ee<L.length;ee++)L[ee]=""}}}}return We(v)}catch{return p}}var Oi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ul={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zn;function Ks(){}P(Ks,Ye),Ks.prototype.g=function(){return new XMLHttpRequest},Ks.prototype.i=function(){return{}},zn=new Ks;function Bn(u,p,v,x){this.j=u,this.i=p,this.l=v,this.R=x||1,this.U=new ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cl}function cl(){this.i=null,this.g="",this.h=!1}var Ho={},Mi={};function Vi(u,p,v){u.L=1,u.v=as(mn(p)),u.m=v,u.P=!0,qo(u,null)}function qo(u,p){u.F=Date.now(),Je(u),u.A=mn(u.v);var v=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),us(v.i,"t",x),u.C=0,v=u.j.J,u.h=new cl,u.g=Rl(u.j,v?p:null,!u.m),0<u.O&&(u.M=new le(b(u.Y,u,u.g),u.O)),p=u.U,v=u.g,x=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(nt[0]=L.toString()),L=nt);for(var $=0;$<L.length;$++){var ee=Fs(v,L[$],x||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Rr(),Gs(u.i,u.u,u.A,u.l,u.R,u.m)}Bn.prototype.ca=function(u){u=u.target;const p=this.M;p&&an(u)==3?p.j():this.Y(u)},Bn.prototype.Y=function(u){try{if(u==this.g)e:{const Tt=an(this.g);var p=this.g.Ba();const Sn=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||Yo(this.g)))){this.J||Tt!=4||p==7||(p==8||0>=Sn?Rr(3):Rr(2)),Qs(this);var v=this.g.Z();this.X=v;t:if(hl(this)){var x=Yo(this.g);u="";var L=x.length,$=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){In(this),rs(this);var ee="";break t}this.h.i=new f.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(x[p],{stream:!($&&p==L-1)});x.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=v==200,ji(this.i,this.u,this.A,this.l,this.R,Tt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,St=this.g;if((Ke=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ke)){var Le=Ke;break t}}Le=null}if(v=Le)Fn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wo(this,v);else{this.o=!1,this.s=3,yt(12),In(this),rs(this);break e}}if(this.P){v=!0;let yn;for(;!this.J&&this.C<ee.length;)if(yn=kc(this,ee),yn==Mi){Tt==4&&(this.s=4,yt(14),v=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Ho){this.s=4,yt(15),Fn(this.i,this.l,ee,"[Invalid Chunk]"),v=!1;break}else Fn(this.i,this.l,yn,null),Wo(this,yn);if(hl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||ee.length!=0||this.h.h||(this.s=1,yt(16),v=!1),this.o=this.o&&v,!v)Fn(this.i,this.l,ee,"[Invalid Chunked Response]"),In(this),rs(this);else if(0<ee.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Zo(bt),bt.M=!0,yt(11))}}else Fn(this.i,this.l,ee,null),Wo(this,ee);Tt==4&&In(this),this.o&&!this.J&&(Tt==4?Ki(this.j,this):(this.o=!1,Je(this)))}else $i(this.g),v==400&&0<ee.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),In(this),rs(this)}}}catch{}};function hl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function kc(u,p){var v=u.C,x=p.indexOf(`
`,v);return x==-1?Mi:(v=Number(p.substring(v,x)),isNaN(v)?Ho:(x+=1,x+v>p.length?Mi:(p=p.slice(x,x+v),u.C=x+v,p)))}Bn.prototype.cancel=function(){this.J=!0,In(this)};function Je(u){u.S=Date.now()+u.I,dl(u,u.I)}function dl(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Un(b(u.ba,u),p)}function Qs(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Bn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($o(this.i,this.A),this.L!=2&&(Rr(),yt(17)),In(this),this.s=2,rs(this)):dl(this,this.S-u)};function rs(u){u.j.G==0||u.J||Ki(u.j,u)}function In(u){Qs(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ge(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Wo(u,p){try{var v=u.j;if(v.G!=0&&(v.g==u||en(v.h,u))){if(!u.K&&en(v.h,u)&&v.G==3){try{var x=v.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Gi(v),Gn(v);else break e;Wi(v),yt(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Un(b(v.Za,v),6e3));if(1>=pl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Dr(v,11)}else if((u.K||v.g==u)&&Gi(v),!W(p))for(L=v.Da.g.parse(p),p=0;p<L.length;p++){let Le=L[p];if(v.T=Le[0],Le=Le[1],v.G==2)if(Le[0]=="c"){v.K=Le[1],v.ia=Le[2];const bt=Le[3];bt!=null&&(v.la=bt,v.j.info("VER="+v.la));const Tt=Le[4];Tt!=null&&(v.Aa=Tt,v.j.info("SVER="+v.Aa));const Sn=Le[5];Sn!=null&&typeof Sn=="number"&&0<Sn&&(x=1.5*Sn,v.L=x,v.j.info("backChannelRequestTimeoutMs_="+x)),x=v;const yn=u.g;if(yn){const ni=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var $=x.h;$.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Go($,$.h),$.h=null))}if(x.D){const Xi=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xi&&(x.ya=Xi,Xe(x.I,x.D,Xi))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),x=v;var ee=u;if(x.qa=Al(x,x.J?x.ia:null,x.W),ee.K){ml(x.h,ee);var Ke=ee,St=x.L;St&&(Ke.I=St),Ke.B&&(Qs(Ke),Je(Ke)),x.g=ee}else ti(x);0<v.i.length&&cr(v)}else Le[0]!="stop"&&Le[0]!="close"||Dr(v,7);else v.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Dr(v,7):Ut(v):Le[0]!="noop"&&v.l&&v.l.ta(Le),v.v=0)}}Rr(4)}catch{}}var fl=class{constructor(u,p){this.g=u,this.map=p}};function Xs(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function pl(u){return u.h?1:u.g?u.g.size:0}function en(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Go(u,p){u.g?u.g.add(p):u.h=p}function ml(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Xs.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.D);return p}return H(u.i)}function Li(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var p=[],v=u.length,x=0;x<v;x++)p.push(u[x]);return p}p=[],v=0;for(x in u)p[v++]=u[x];return p}function Ui(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var p=[];u=u.length;for(var v=0;v<u;v++)p.push(v);return p}p=[],v=0;for(const x in u)p[v++]=x;return p}}}function ss(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var v=Ui(u),x=Li(u),L=x.length,$=0;$<L;$++)p.call(void 0,x[$],v&&v[$],u)}var Ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sc(u,p){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var x=u[v].indexOf("="),L=null;if(0<=x){var $=u[v].substring(0,x);L=u[v].substring(x+1)}else $=u[v];p($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Cr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Cr){this.h=u.h,Js(this,u.j),this.o=u.o,this.g=u.g,is(this,u.s),this.l=u.l;var p=u.i,v=new ar;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),os(this,v),this.m=u.m}else u&&(p=String(u).match(Ys))?(this.h=!1,Js(this,p[1]||"",!0),this.o=Me(p[2]||""),this.g=Me(p[3]||"",!0),is(this,p[4]),this.l=Me(p[5]||"",!0),os(this,p[6]||"",!0),this.m=Me(p[7]||"")):(this.h=!1,this.i=new ar(null,this.h))}Cr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ls(p,Fi,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ls(p,Fi,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ls(v,v.charAt(0)=="/"?_l:vl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ls(v,Ko)),u.join("")};function mn(u){return new Cr(u)}function Js(u,p,v){u.j=v?Me(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function is(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function os(u,p,v){p instanceof ar?(u.i=p,lr(u.i,u.h)):(v||(p=ls(p,wl)),u.i=new ar(p,u.h))}function Xe(u,p,v){u.i.set(p,v)}function as(u){return Xe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Me(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ls(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,yl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fi=/[#\/\?@]/g,vl=/[#\?:]/g,_l=/[#\?]/g,wl=/[#\?@]/g,Ko=/#/g;function ar(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Lt(u){u.g||(u.g=new Map,u.h=0,u.i&&Sc(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=ar.prototype,r.add=function(u,p){Lt(this),this.i=null,u=kn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function $n(u,p){Lt(u),p=kn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Hn(u,p){return Lt(u),p=kn(u,p),u.g.has(p)}r.forEach=function(u,p){Lt(this),this.g.forEach(function(v,x){v.forEach(function(L){u.call(p,L,x,this)},this)},this)},r.na=function(){Lt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let x=0;x<p.length;x++){const L=u[x];for(let $=0;$<L.length;$++)v.push(p[x])}return v},r.V=function(u){Lt(this);let p=[];if(typeof u=="string")Hn(this,u)&&(p=p.concat(this.g.get(kn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)p=p.concat(u[v])}return p},r.set=function(u,p){return Lt(this),this.i=null,u=kn(this,u),Hn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function us(u,p,v){$n(u,p),0<v.length&&(u.i=null,u.g.set(kn(u,p),H(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var x=p[v];const $=encodeURIComponent(String(x)),ee=this.V(x);for(x=0;x<ee.length;x++){var L=$;ee[x]!==""&&(L+="="+encodeURIComponent(String(ee[x]))),u.push(L)}}return this.i=u.join("&")};function kn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function lr(u,p){p&&!u.j&&(Lt(u),u.i=null,u.g.forEach(function(v,x){var L=x.toLowerCase();x!=L&&($n(this,x),us(this,L,v))},u)),u.j=p}function Ac(u,p){const v=new Ws;if(f.Image){const x=new Image;x.onload=M(on,v,"TestLoadImage: loaded",!0,p,x),x.onerror=M(on,v,"TestLoadImage: error",!1,p,x),x.onabort=M(on,v,"TestLoadImage: abort",!1,p,x),x.ontimeout=M(on,v,"TestLoadImage: timeout",!1,p,x),f.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function xl(u,p){const v=new Ws,x=new AbortController,L=setTimeout(()=>{x.abort(),on(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then($=>{clearTimeout(L),$.ok?on(v,"TestPingServer: ok",!0,p):on(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),on(v,"TestPingServer: error",!1,p)})}function on(u,p,v,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(v)}catch{}}function Rc(){this.g=new Be}function El(u,p,v){const x=v||"";try{ss(u,function(L,$){let ee=L;_(L)&&(ee=We(L)),p.push(x+$+"="+encodeURIComponent(ee))})}catch(L){throw p.push(x+"type="+encodeURIComponent("_badmap")),L}}function Nr(u){this.l=u.Ub||null,this.j=u.eb||!1}P(Nr,Ye),Nr.prototype.g=function(){return new Zs(this.l,this.j)},Nr.prototype.i=(function(u){return function(){return u}})({});function Zs(u,p){mt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Zs,mt),r=Zs.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Wn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?qn(this):Wn(this),this.readyState==3&&Tl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,qn(this))},r.Qa=function(u){this.g&&(this.response=u,qn(this))},r.ga=function(){this.g&&qn(this)};function qn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wn(u)}r.setRequestHeader=function(u,p){this.u.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Pr(u){let p="";return ie(u,function(v,x){p+=x,p+=":",p+=v,p+=`\r
`}),p}function cs(u,p,v){e:{for(x in v){var x=!1;break e}x=!0}x||(v=Pr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Xe(u,p,v))}function rt(u){mt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(rt,mt);var Cc=/^https?$/i,Qo=["POST","PUT"];r=rt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,p,v,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zn.g(),this.v=this.o?Ln(this.o):Ln(zn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch($){ei(this,$);return}if(u=v||"",v=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)v.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const $ of x.keys())v.set($,x.get($));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),L=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Qo,p,void 0))||x||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of v)this.g.setRequestHeader($,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bi(this),this.u=!0,this.g.send(u),this.u=!1}catch($){ei(this,$)}};function ei(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,zi(u),gn(u)}function zi(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),gn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gn(this,!0)),rt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Xo(this):this.bb())},r.bb=function(){Xo(this)};function Xo(u){if(u.h&&typeof h<"u"&&(!u.v[1]||an(u)!=4||u.Z()!=2)){if(u.u&&an(u)==4)Hs(u.Ea,0,u);else if(gt(u,"readystatechange"),an(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var x;if(x=ee===0){var L=String(u.D).match(Ys)[1]||null;!L&&f.self&&f.self.location&&(L=f.self.location.protocol.slice(0,-1)),x=!Cc.test(L?L.toLowerCase():"")}v=x}if(v)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var $=2<an(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",zi(u)}}finally{gn(u)}}}}function gn(u,p){if(u.g){Bi(u);const v=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||gt(u,"ready");try{v.onreadystatechange=x}catch{}}}function Bi(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function an(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Et(p)}};function Yo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(u){const p={};u=(u.g&&2<=an(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(W(u[x]))continue;var v=j(u[x]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=p[L]||[];p[L]=$,$.push(v)}R(p,function(x){return x.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ur(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function Jo(u){this.Aa=0,this.i=[],this.j=new Ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ur("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ur("baseRetryDelayMs",5e3,u),this.cb=ur("retryDelaySeedMs",1e4,u),this.Wa=ur("forwardChannelMaxRetries",2,u),this.wa=ur("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Xs(u&&u.concurrentRequestLimit),this.Da=new Rc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Jo.prototype,r.la=8,r.G=1,r.connect=function(u,p,v,x){yt(0),this.W=u,this.H=p||{},v&&x!==void 0&&(this.H.OSID=v,this.H.OAID=x),this.F=this.X,this.I=Al(this,null,this.W),cr(this)};function Ut(u){if(Hi(u),u.G==3){var p=u.U++,v=mn(u.I);if(Xe(v,"SID",u.K),Xe(v,"RID",p),Xe(v,"TYPE","terminate"),br(u,v),p=new Bn(u,u.j,p),p.L=2,p.v=as(mn(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=p.v,v=!0),v||(p.g=Rl(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Je(p)}Sl(u)}function Gn(u){u.g&&(Zo(u),u.g.cancel(),u.g=null)}function Hi(u){Gn(u),u.u&&(f.clearTimeout(u.u),u.u=null),Gi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function cr(u){if(!pn(u.h)&&!u.s){u.s=!0;var p=u.Ga;ze||oe(),te||(ze(),te=!0),ye.add(p,u),u.B=0}}function Nc(u,p){return pl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Un(b(u.Ga,u,p),kl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Bn(this,this.j,u);let $=this.o;if(this.S&&($?($=T($),N($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var x=this.i[v];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=hs(this,L,p),v=mn(this.I),Xe(v,"RID",u),Xe(v,"CVER",22),this.D&&Xe(v,"X-HTTP-Session-Id",this.D),br(this,v),$&&(this.O?p="headers="+encodeURIComponent(String(Pr($)))+"&"+p:this.m&&cs(v,this.m,$)),Go(this.h,L),this.Ua&&Xe(v,"TYPE","init"),this.P?(Xe(v,"$req",p),Xe(v,"SID","null"),L.T=!0,Vi(L,v,null)):Vi(L,v,p),this.G=2}}else this.G==3&&(u?qi(this,u):this.i.length==0||pn(this.h)||qi(this))};function qi(u,p){var v;p?v=p.l:v=u.U++;const x=mn(u.I);Xe(x,"SID",u.K),Xe(x,"RID",v),Xe(x,"AID",u.T),br(u,x),u.m&&u.o&&cs(x,u.m,u.o),v=new Bn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),p&&(u.i=p.D.concat(u.i)),p=hs(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Go(u.h,v),Vi(v,x,p)}function br(u,p){u.H&&ie(u.H,function(v,x){Xe(p,x,v)}),u.l&&ss({},function(v,x){Xe(p,x,v)})}function hs(u,p,v){v=Math.min(u.i.length,v);var x=u.l?b(u.l.Na,u.l,u):null;e:{var L=u.i;let $=-1;for(;;){const ee=["count="+v];$==-1?0<v?($=L[0].g,ee.push("ofs="+$)):$=0:ee.push("ofs="+$);let Ke=!0;for(let St=0;St<v;St++){let Le=L[St].g;const bt=L[St].map;if(Le-=$,0>Le)$=Math.max(0,L[St].g-100),Ke=!1;else try{El(bt,ee,"req"+Le+"_")}catch{x&&x(bt)}}if(Ke){x=ee.join("&");break e}}}return u=u.i.splice(0,v),p.D=u,x}function ti(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;ze||oe(),te||(ze(),te=!0),ye.add(p,u),u.v=0}}function Wi(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Un(b(u.Fa,u),kl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Il(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Un(b(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Gn(this),Il(this))};function Zo(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Il(u){u.g=new Bn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=mn(u.qa);Xe(p,"RID","rpc"),Xe(p,"SID",u.K),Xe(p,"AID",u.T),Xe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xe(p,"TO",u.ja),Xe(p,"TYPE","xmlhttp"),br(u,p),u.m&&u.o&&cs(p,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=as(mn(p)),v.m=null,v.P=!0,qo(v,u)}r.Za=function(){this.C!=null&&(this.C=null,Gn(this),Wi(this),yt(19))};function Gi(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Ki(u,p){var v=null;if(u.g==p){Gi(u),Zo(u),u.g=null;var x=2}else if(en(u.h,p))v=p.D,ml(u.h,p),x=1;else return;if(u.G!=0){if(p.o)if(x==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;x=qs(),gt(x,new Di(x,v)),cr(u)}else ti(u);else if(L=p.s,L==3||L==0&&0<p.X||!(x==1&&Nc(u,p)||x==2&&Wi(u)))switch(v&&0<v.length&&(p=u.h,p.i=p.i.concat(v)),L){case 1:Dr(u,5);break;case 4:Dr(u,10);break;case 3:Dr(u,6);break;default:Dr(u,2)}}}function kl(u,p){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*p}function Dr(u,p){if(u.j.info("Error code "+p),p==2){var v=b(u.fb,u),x=u.Xa;const L=!x;x=new Cr(x||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Js(x,"https"),as(x),L?Ac(x.toString(),v):xl(x.toString(),v)}else yt(2);u.G=0,u.l&&u.l.sa(p),Sl(u),Hi(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Sl(u){if(u.G=0,u.ka=[],u.l){const p=gl(u.h);(p.length!=0||u.i.length!=0)&&(F(u.ka,p),F(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function Al(u,p,v){var x=v instanceof Cr?mn(v):new Cr(v);if(x.g!="")p&&(x.g=p+"."+x.g),is(x,x.s);else{var L=f.location;x=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var $=new Cr(null);x&&Js($,x),p&&($.g=p),L&&is($,L),v&&($.l=v),x=$}return v=u.D,p=u.ya,v&&p&&Xe(x,v,p),Xe(x,"VER",u.la),br(u,x),x}function Rl(u,p,v){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new rt(new Nr({eb:v})):new rt(u.pa),p.Ha(u.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ea(){}r=ea.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Qi(){}Qi.prototype.g=function(u,p){return new tn(u,p)};function tn(u,p){mt.call(this),this.g=new Jo(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!W(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!W(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new hr(this)}P(tn,mt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Ut(this.g)},tn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=We(u),u=v);p.i.push(new fl(p.Ya++,u)),p.G==3&&cr(p)},tn.prototype.N=function(){this.g.l=null,delete this.j,Ut(this.g),delete this.g,tn.aa.N.call(this)};function Cl(u){ir.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}P(Cl,ir);function Nl(){bi.call(this),this.status=1}P(Nl,bi);function hr(u){this.g=u}P(hr,ea),hr.prototype.ua=function(){gt(this.g,"a")},hr.prototype.ta=function(u){gt(this.g,new Cl(u))},hr.prototype.sa=function(u){gt(this.g,new Nl)},hr.prototype.ra=function(){gt(this.g,"b")},Qi.prototype.createWebChannel=Qi.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,By=function(){return new Qi},zy=function(){return qs()},Fy=or,_d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,Du=Oi,ul.COMPLETE="complete",Uy=ul,sr.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Aa=sr,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,Ly=rt}).apply(typeof Iu<"u"?Iu:typeof self<"u"?self:typeof window<"u"?window:{});const fg="@firebase/firestore";let Yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let Oo="10.14.0";const Ti=new Hd("@firebase/firestore");function ka(){return Ti.logLevel}function de(r,...e){if(Ti.logLevel<=Ve.DEBUG){const t=e.map(Gd);Ti.debug(`Firestore (${Oo}): ${r}`,...t)}}function Xr(r,...e){if(Ti.logLevel<=Ve.ERROR){const t=e.map(Gd);Ti.error(`Firestore (${Oo}): ${r}`,...t)}}function So(r,...e){if(Ti.logLevel<=Ve.WARN){const t=e.map(Gd);Ti.warn(`Firestore (${Oo}): ${r}`,...t)}}function Gd(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Se(r="Unexpected state"){const e=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: `+r;throw Xr(e),new Error(e)}function Qe(r,e){r||Se()}function Re(r,e){return r}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Sr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class js{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $y{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yt.UNAUTHENTICATED)))}shutdown(){}}class eE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class tE{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new js;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new js,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},f=y=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>f(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new js)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string"),new $y(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Yt(e)}}class nE{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rE{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new nE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,de("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new sE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function oE(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class Hy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=oE(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function He(r,e){return r<e?-1:r>e?1:0}function Ao(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}class Nt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ve(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Nt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Nt(0,0))}static max(){return new Ae(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ua{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(),i===void 0?i=e.length-t:i>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ua.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ua?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class it extends Ua{construct(e,t,i){return new it(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new it(t)}static emptyPath(){return new it([])}}const aE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Ua{construct(e,t,i){return new $t(e,t,i)}static isValidIdentifier(e){return aE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ve(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ve(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ve(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new ve(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(it.fromString(e))}static fromName(e){return new xe(it.fromString(e).popFirst(5))}static empty(){return new xe(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new it(e.slice()))}}function lE(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Nt(t+1,0):new Nt(t,i));return new Vs(o,xe.empty(),e)}function uE(r){return new Vs(r.readTime,r.key,-1)}class Vs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Vs(Ae.min(),xe.empty(),-1)}static max(){return new Vs(Ae.max(),xe.empty(),-1)}}function cE(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(r.documentKey,e.documentKey),t!==0?t:He(r.largestBatchId,e.largestBatchId))}const hE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ja(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==hE)throw r;de("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,i)=>{t(e)}))}static reject(e){return new X(((t,i)=>{i(e)}))}static waitFor(e){return new X(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(y=>i(y)))})),h=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next((o=>o?X.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new X(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let y=0;y<l;y++){const _=y;t(e[_]).next((E=>{h[_]=E,++f,f===l&&i(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new X(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function fE(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Za(r){return r.name==="IndexedDbTransactionError"}class Kd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Kd.oe=-1;function cc(r){return r==null}function Wu(r){return r===0&&1/r==-1/0}function pE(r){return typeof r=="number"&&Number.isInteger(r)&&!Wu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function pg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Mo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function qy(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class ct{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Bt.RED,this.left=o??Bt.EMPTY,this.right=l??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Bt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Bt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ht{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mg(this.data.getIterator())}getIteratorFrom(e){return new mg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class mg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class tr{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new tr([])}unionWith(e){let t=new Ht($t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Wy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Wy("Invalid base64 string: "+l):l}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const mE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(r){if(Qe(!!r),typeof r=="string"){let e=0;const t=mE.exec(r);if(Qe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:_t(r.seconds),nanos:_t(r.nanos)}}function _t(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ii(r){return typeof r=="string"?qt.fromBase64String(r):qt.fromUint8Array(r)}function Qd(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Xd(r){const e=r.mapValue.fields.__previous_value__;return Qd(e)?Xd(e):e}function Fa(r){const e=Ls(r.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}class gE{constructor(e,t,i,o,l,h,f,y,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=_}}class za{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new za("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof za&&e.projectId===this.projectId&&e.database===this.database}}const Su={mapValue:{}};function ki(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Qd(r)?4:vE(r)?9007199254740991:yE(r)?10:11:Se()}function Tr(r,e){if(r===e)return!0;const t=ki(r);if(t!==ki(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Fa(r).isEqual(Fa(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ls(o.timestampValue),f=Ls(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ii(o.bytesValue).isEqual(Ii(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return _t(o.geoPointValue.latitude)===_t(l.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return _t(o.integerValue)===_t(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=_t(o.doubleValue),f=_t(l.doubleValue);return h===f?Wu(h)===Wu(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return Ao(r.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(pg(h)!==pg(f))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(f[y]===void 0||!Tr(h[y],f[y])))return!1;return!0})(r,e);default:return Se()}}function Ba(r,e){return(r.values||[]).find((t=>Tr(t,e)))!==void 0}function Ro(r,e){if(r===e)return 0;const t=ki(r),i=ki(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=_t(l.integerValue||l.doubleValue),y=_t(h.integerValue||h.doubleValue);return f<y?-1:f>y?1:f===y?0:isNaN(f)?isNaN(y)?0:-1:1})(r,e);case 3:return gg(r.timestampValue,e.timestampValue);case 4:return gg(Fa(r),Fa(e));case 5:return He(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Ii(l),y=Ii(h);return f.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),y=h.split("/");for(let _=0;_<f.length&&_<y.length;_++){const E=He(f[_],y[_]);if(E!==0)return E}return He(f.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=He(_t(l.latitude),_t(h.latitude));return f!==0?f:He(_t(l.longitude),_t(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return yg(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var f,y,_,E;const A=l.fields||{},b=h.fields||{},M=(f=A.value)===null||f===void 0?void 0:f.arrayValue,P=(y=b.value)===null||y===void 0?void 0:y.arrayValue,H=He(((_=M?.values)===null||_===void 0?void 0:_.length)||0,((E=P?.values)===null||E===void 0?void 0:E.length)||0);return H!==0?H:yg(M,P)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Su.mapValue&&h===Su.mapValue)return 0;if(l===Su.mapValue)return 1;if(h===Su.mapValue)return-1;const f=l.fields||{},y=Object.keys(f),_=h.fields||{},E=Object.keys(_);y.sort(),E.sort();for(let A=0;A<y.length&&A<E.length;++A){const b=He(y[A],E[A]);if(b!==0)return b;const M=Ro(f[y[A]],_[E[A]]);if(M!==0)return M}return He(y.length,E.length)})(r.mapValue,e.mapValue);default:throw Se()}}function gg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return He(r,e);const t=Ls(r),i=Ls(e),o=He(t.seconds,i.seconds);return o!==0?o:He(t.nanos,i.nanos)}function yg(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ro(t[o],i[o]);if(l)return l}return He(t.length,i.length)}function Co(r){return wd(r)}function wd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ls(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ii(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return xe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=wd(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${wd(t.fields[h])}`;return o+"}"})(r.mapValue):Se()}function xd(r){return!!r&&"integerValue"in r}function Yd(r){return!!r&&"arrayValue"in r}function vg(r){return!!r&&"nullValue"in r}function _g(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ju(r){return!!r&&"mapValue"in r}function yE(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Pa(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Mo(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Pa(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pa(r.arrayValue.values[t]);return e}return Object.assign({},r)}function vE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(t)}setAll(e){let t=$t.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=Pa(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ju(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Mo(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Dn(Pa(this.value))}}function Gy(r){const e=[];return Mo(r.fields,((t,i)=>{const o=new $t([t]);if(ju(i)){const l=Gy(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new tr(e)}class Jt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Jt(e,0,Ae.min(),Ae.min(),Ae.min(),Dn.empty(),0)}static newFoundDocument(e,t,i,o){return new Jt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Jt(e,2,t,Ae.min(),Ae.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Ae.min(),Ae.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gu{constructor(e,t){this.position=e,this.inclusive=t}}function wg(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=xe.comparator(xe.fromName(h.referenceValue),t.key):i=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function xg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Tr(r.position[t],e.position[t]))return!1;return!0}class Ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function _E(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Ky{}class Ct extends Ky{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new xE(e,t,i):t==="array-contains"?new IE(e,i):t==="in"?new kE(e,i):t==="not-in"?new SE(e,i):t==="array-contains-any"?new AE(e,i):new Ct(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new EE(e,i):new TE(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ro(t,this.value)):t!==null&&ki(this.value)===ki(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ir extends Ky{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ir(e,t)}matches(e){return Qy(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qy(r){return r.op==="and"}function Xy(r){return wE(r)&&Qy(r)}function wE(r){for(const e of r.filters)if(e instanceof Ir)return!1;return!0}function Ed(r){if(r instanceof Ct)return r.field.canonicalString()+r.op.toString()+Co(r.value);if(Xy(r))return r.filters.map((e=>Ed(e))).join(",");{const e=r.filters.map((t=>Ed(t))).join(",");return`${r.op}(${e})`}}function Yy(r,e){return r instanceof Ct?(function(i,o){return o instanceof Ct&&i.op===o.op&&i.field.isEqual(o.field)&&Tr(i.value,o.value)})(r,e):r instanceof Ir?(function(i,o){return o instanceof Ir&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&Yy(h,o.filters[f])),!0):!1})(r,e):void Se()}function Jy(r){return r instanceof Ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${Co(t.value)}`})(r):r instanceof Ir?(function(t){return t.op.toString()+" {"+t.getFilters().map(Jy).join(" ,")+"}"})(r):"Filter"}class xE extends Ct{constructor(e,t,i){super(e,t,i),this.key=xe.fromName(i.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class EE extends Ct{constructor(e,t){super(e,"in",t),this.keys=Zy("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class TE extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=Zy("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Zy(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>xe.fromName(i.referenceValue)))}class IE extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yd(t)&&Ba(t.arrayValue,this.value)}}class kE extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ba(this.value.arrayValue,t)}}class SE extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ba(this.value.arrayValue,t)}}class AE extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ba(this.value.arrayValue,i)))}}class RE{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.ue=null}}function Eg(r,e=null,t=[],i=[],o=null,l=null,h=null){return new RE(r,e,t,i,o,l,h)}function Jd(r){const e=Re(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ed(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Co(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Co(i))).join(",")),e.ue=t}return e.ue}function Zd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!_E(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Yy(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!xg(r.startAt,e.startAt)&&xg(r.endAt,e.endAt)}function Td(r){return xe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class hc{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function CE(r,e,t,i,o,l,h,f){return new hc(r,e,t,i,o,l,h,f)}function ef(r){return new hc(r)}function Tg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function NE(r){return r.collectionGroup!==null}function ba(r){const e=Re(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Ht($t.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(f=f.add(_.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Ku(l,i))})),t.has($t.keyField().canonicalString())||e.ce.push(new Ku($t.keyField(),i))}return e.ce}function _r(r){const e=Re(r);return e.le||(e.le=PE(e,ba(r))),e.le}function PE(r,e){if(r.limitType==="F")return Eg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ku(o.field,l)}));const t=r.endAt?new Gu(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Gu(r.startAt.position,r.startAt.inclusive):null;return Eg(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Id(r,e,t){return new hc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function dc(r,e){return Zd(_r(r),_r(e))&&r.limitType===e.limitType}function ev(r){return`${Jd(_r(r))}|lt:${r.limitType}`}function vo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Jy(o))).join(", ")}]`),cc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Co(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Co(o))).join(",")),`Target(${i})`})(_r(r))}; limitType=${r.limitType})`}function fc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):xe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of ba(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,y){const _=wg(h,f,y);return h.inclusive?_<=0:_<0})(i.startAt,ba(i),o)||i.endAt&&!(function(h,f,y){const _=wg(h,f,y);return h.inclusive?_>=0:_>0})(i.endAt,ba(i),o))})(r,e)}function bE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function tv(r){return(e,t)=>{let i=!1;for(const o of ba(r)){const l=DE(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function DE(r,e,t){const i=r.field.isKeyField()?xe.comparator(e.key,t.key):(function(l,h,f){const y=h.data.field(l),_=f.data.field(l);return y!==null&&_!==null?Ro(y,_):Se()})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Se()}}class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mo(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return qy(this.inner)}size(){return this.innerSize}}const jE=new ct(xe.comparator);function Yr(){return jE}const nv=new ct(xe.comparator);function Ra(...r){let e=nv;for(const t of r)e=e.insert(t.key,t);return e}function rv(r){let e=nv;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function yi(){return Da()}function sv(){return Da()}function Da(){return new Vo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const OE=new ct(xe.comparator),ME=new Ht(xe.comparator);function De(...r){let e=ME;for(const t of r)e=e.add(t);return e}const VE=new Ht(He);function LE(){return VE}function tf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function iv(r){return{integerValue:""+r}}function UE(r,e){return pE(e)?iv(e):tf(r,e)}class pc{constructor(){this._=void 0}}function FE(r,e,t){return r instanceof Qu?(function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Qd(l)&&(l=Xd(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}})(t,e):r instanceof $a?av(r,e):r instanceof Ha?lv(r,e):(function(o,l){const h=ov(o,l),f=Ig(h)+Ig(o.Pe);return xd(h)&&xd(o.Pe)?iv(f):tf(o.serializer,f)})(r,e)}function zE(r,e,t){return r instanceof $a?av(r,e):r instanceof Ha?lv(r,e):t}function ov(r,e){return r instanceof Xu?(function(i){return xd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Qu extends pc{}class $a extends pc{constructor(e){super(),this.elements=e}}function av(r,e){const t=uv(e);for(const i of r.elements)t.some((o=>Tr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Ha extends pc{constructor(e){super(),this.elements=e}}function lv(r,e){let t=uv(e);for(const i of r.elements)t=t.filter((o=>!Tr(o,i)));return{arrayValue:{values:t}}}class Xu extends pc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ig(r){return _t(r.integerValue||r.doubleValue)}function uv(r){return Yd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function BE(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof $a&&o instanceof $a||i instanceof Ha&&o instanceof Ha?Ao(i.elements,o.elements,Tr):i instanceof Xu&&o instanceof Xu?Tr(i.Pe,o.Pe):i instanceof Qu&&o instanceof Qu})(r.transform,e.transform)}class $E{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class mc{}function cv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new nf(r.key,wr.none()):new el(r.key,r.data,wr.none());{const t=r.data,i=Dn.empty();let o=new Ht($t.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ci(r.key,i,new tr(o.toArray()),wr.none())}}function HE(r,e,t){r instanceof el?(function(o,l,h){const f=o.value.clone(),y=Sg(o.fieldTransforms,l,h.transformResults);f.setAll(y),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Ci?(function(o,l,h){if(!Ou(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=Sg(o.fieldTransforms,l,h.transformResults),y=l.data;y.setAll(hv(o)),y.setAll(f),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function ja(r,e,t,i){return r instanceof el?(function(l,h,f,y){if(!Ou(l.precondition,h))return f;const _=l.value.clone(),E=Ag(l.fieldTransforms,y,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ci?(function(l,h,f,y){if(!Ou(l.precondition,h))return f;const _=Ag(l.fieldTransforms,y,h),E=h.data;return E.setAll(hv(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((A=>A.field)))})(r,e,t,i):(function(l,h,f){return Ou(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function qE(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=ov(i.transform,o||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(i.field,l))}return t||null}function kg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ao(i,o,((l,h)=>BE(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class el extends mc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ci extends mc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function hv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Sg(r,e,t){const i=new Map;Qe(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,zE(h,f,t[o]))}return i}function Ag(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,FE(l,h,e))}return i}class nf extends mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WE extends mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GE{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&HE(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ja(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ja(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=sv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const y=cv(h,f);y!==null&&i.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((t,i)=>kg(t,i)))&&Ao(this.baseMutations,e.baseMutations,((t,i)=>kg(t,i)))}}class rf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length);let o=(function(){return OE})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new rf(e,t,i,o)}}class KE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class QE{constructor(e,t){this.count=e,this.unchangedNames=t}}var kt,Ue;function XE(r){switch(r){default:return Se();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function dv(r){if(r===void 0)return Xr("GRPC error has no .code"),Y.UNKNOWN;switch(r){case kt.OK:return Y.OK;case kt.CANCELLED:return Y.CANCELLED;case kt.UNKNOWN:return Y.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Y.INTERNAL;case kt.UNAVAILABLE:return Y.UNAVAILABLE;case kt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case kt.NOT_FOUND:return Y.NOT_FOUND;case kt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case kt.ABORTED:return Y.ABORTED;case kt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case kt.DATA_LOSS:return Y.DATA_LOSS;default:return Se()}}(Ue=kt||(kt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";function YE(){return new TextEncoder}const JE=new _i([4294967295,4294967295],0);function Rg(r){const e=YE().encode(r),t=new Vy;return t.update(e),new Uint8Array(t.digest())}function Cg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _i([t,i],0),new _i([o,l],0)]}class sf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ca(`Invalid padding: ${t}`);if(i<0)throw new Ca(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=_i.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(_i.fromNumber(i)));return o.compare(JE)===1&&(o=new _i([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Rg(e),[i,o]=Cg(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new sf(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.Ie===0)return;const t=Rg(e),[i,o]=Cg(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(i,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new gc(Ae.min(),o,new ct(He),Yr(),De())}}class tl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new tl(i,t,De(),De(),De())}}class Mu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class fv{constructor(e,t){this.targetId=e,this.me=t}}class pv{constructor(e,t,i=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ng{constructor(){this.fe=0,this.ge=bg(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=De(),t=De(),i=De();return this.ge.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se()}})),new tl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=bg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ZE{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yr(),this.qe=Pg(),this.Qe=new ct(He)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Se()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const l=o.target;if(Td(l))if(i===0){const h=new xe(l.path);this.Ue(t,h,Jt.newNoDocument(h,Ae.min()))}else Qe(i===1);else{const h=this.Ye(t);if(h!==i){const f=this.Ze(e),y=f?this.Xe(f,e,h):1;if(y!==0){this.je(t);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,_)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Ii(i).toUint8Array()}catch(y){if(y instanceof Wy)return So("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{f=new sf(h,o,l)}catch(y){return So(y instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return f.Ie===0?null:f}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Le.tt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,l,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((l,h)=>{const f=this.Je(h);if(f){if(l.current&&Td(f.target)){const y=new xe(f.target.path);this.ke.get(y)!==null||this.it(h,y)||this.Ue(h,y,Jt.newNoDocument(y,e))}l.be&&(t.set(h,l.ve()),l.Ce())}}));let i=De();this.qe.forEach(((l,h)=>{let f=!0;h.forEachWhile((y=>{const _=this.Je(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.ke.forEach(((l,h)=>h.setReadTime(e)));const o=new gc(e,t,this.Qe,this.ke,i);return this.ke=Yr(),this.qe=Pg(),this.Qe=new ct(He),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ng,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ht(He),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ng),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Pg(){return new ct(xe.comparator)}function bg(){return new ct(xe.comparator)}const e1={asc:"ASCENDING",desc:"DESCENDING"},t1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n1={and:"AND",or:"OR"};class r1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function kd(r,e){return r.useProto3Json||cc(e)?e:{value:e}}function Yu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function s1(r,e){return Yu(r,e.toTimestamp())}function xr(r){return Qe(!!r),Ae.fromTimestamp((function(t){const i=Ls(t);return new Nt(i.seconds,i.nanos)})(r))}function of(r,e){return Sd(r,e).canonicalString()}function Sd(r,e){const t=(function(o){return new it(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function gv(r){const e=it.fromString(r);return Qe(xv(e)),e}function Ad(r,e){return of(r.databaseId,e.path)}function od(r,e){const t=gv(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new xe(vv(t))}function yv(r,e){return of(r.databaseId,e)}function i1(r){const e=gv(r);return e.length===4?it.emptyPath():vv(e)}function Rd(r){return new it(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function vv(r){return Qe(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Dg(r,e,t){return{name:Ad(r,e),fields:t.value.mapValue.fields}}function o1(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Se()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(_,E){return _.useProto3Json?(Qe(E===void 0||typeof E=="string"),qt.fromBase64String(E||"")):(Qe(E===void 0||E instanceof Buffer||E instanceof Uint8Array),qt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(_){const E=_.code===void 0?Y.UNKNOWN:dv(_.code);return new ve(E,_.message||"")})(h);t=new pv(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=od(r,i.document.name),l=xr(i.document.updateTime),h=i.document.createTime?xr(i.document.createTime):Ae.min(),f=new Dn({mapValue:{fields:i.document.fields}}),y=Jt.newFoundDocument(o,l,h,f),_=i.targetIds||[],E=i.removedTargetIds||[];t=new Mu(_,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=od(r,i.document),l=i.readTime?xr(i.readTime):Ae.min(),h=Jt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Mu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=od(r,i.document),l=i.removedTargetIds||[];t=new Mu([],l,o,null)}else{if(!("filter"in e))return Se();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new QE(o,l),f=i.targetId;t=new fv(f,h)}}return t}function a1(r,e){let t;if(e instanceof el)t={update:Dg(r,e.key,e.value)};else if(e instanceof nf)t={delete:Ad(r,e.key)};else if(e instanceof Ci)t={update:Dg(r,e.key,e.data),updateMask:g1(e.fieldMask)};else{if(!(e instanceof WE))return Se();t={verify:Ad(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof Qu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof $a)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ha)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Xu)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw Se()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:s1(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se()})(r,e.precondition)),t}function l1(r,e){return r&&r.length>0?(Qe(e!==void 0),r.map((t=>(function(o,l){let h=o.updateTime?xr(o.updateTime):xr(l);return h.isEqual(Ae.min())&&(h=xr(l)),new $E(h,o.transformResults||[])})(t,e)))):[]}function u1(r,e){return{documents:[yv(r,e.path)]}}function c1(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=yv(r,o);const l=(function(_){if(_.length!==0)return wv(Ir.create(_,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(_){if(_.length!==0)return _.map((E=>(function(b){return{field:_o(b.field),direction:f1(b.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=kd(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{_t:t,parent:o}}function h1(r){let e=i1(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(A){const b=_v(A);return b instanceof Ir&&Xy(b)?b.getFilters():[b]})(t.where));let h=[];t.orderBy&&(h=(function(A){return A.map((b=>(function(P){return new Ku(wo(P.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(A){let b;return b=typeof A=="object"?A.value:A,cc(b)?null:b})(t.limit));let y=null;t.startAt&&(y=(function(A){const b=!!A.before,M=A.values||[];return new Gu(M,b)})(t.startAt));let _=null;return t.endAt&&(_=(function(A){const b=!A.before,M=A.values||[];return new Gu(M,b)})(t.endAt)),CE(e,o,h,l,f,"F",y,_)}function d1(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _v(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=wo(t.unaryFilter.field);return Ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(t.unaryFilter.field);return Ct.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return Ct.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=wo(t.unaryFilter.field);return Ct.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Se()}})(r):r.fieldFilter!==void 0?(function(t){return Ct.create(wo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ir.create(t.compositeFilter.filters.map((i=>_v(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se()}})(t.compositeFilter.op))})(r):Se()}function f1(r){return e1[r]}function p1(r){return t1[r]}function m1(r){return n1[r]}function _o(r){return{fieldPath:r.canonicalString()}}function wo(r){return $t.fromServerFormat(r.fieldPath)}function wv(r){return r instanceof Ct?(function(t){if(t.op==="=="){if(_g(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(vg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_g(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(vg(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:p1(t.op),value:t.value}}})(r):r instanceof Ir?(function(t){const i=t.getFilters().map((o=>wv(o)));return i.length===1?i[0]:{compositeFilter:{op:m1(t.op),filters:i}}})(r):Se()}function g1(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Ps{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),f=qt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class y1{constructor(e){this.ct=e}}function v1(r){const e=h1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Id(e,e.limit,"L"):e}class _1{constructor(){this.un=new w1}addToCollectionParentIndex(e,t){return this.un.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Vs.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class w1{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ht(it.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ht(it.comparator)).toArray()}}class No{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new No(0)}static kn(){return new No(-1)}}class x1{constructor(){this.changes=new Vo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class E1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class T1{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&ja(i.mutation,o,tr.empty(),Nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,De()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=De()){const o=yi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ra();return l.forEach(((f,y)=>{h=h.insert(f,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=yi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,De())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=Yr();const h=Da(),f=(function(){return Da()})();return t.forEach(((y,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Ci)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),ja(E.mutation,_,E.mutation.getFieldMask(),Nt.now())):h.set(_.key,tr.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((_,E)=>h.set(_,E))),t.forEach(((_,E)=>{var A;return f.set(_,new E1(E,(A=h.get(_))!==null&&A!==void 0?A:null))})),f)))}recalculateAndSaveOverlays(e,t){const i=Da();let o=new ct(((h,f)=>h-f)),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((y=>{const _=t.get(y);if(_===null)return;let E=i.get(y)||tr.empty();E=f.applyToLocalView(_,E),i.set(y,E);const A=(o.get(f.batchId)||De()).add(y);o=o.insert(f.batchId,A)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),_=y.key,E=y.value,A=sv();E.forEach((b=>{if(!l.has(b)){const M=cv(t.get(b),i.get(b));M!==null&&A.set(b,M),l=l.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,A))}return X.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return xe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):X.resolve(yi());let f=-1,y=l;return h.next((_=>X.forEach(_,((E,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),l.get(E)?X.resolve():this.remoteDocumentCache.getEntry(e,E).next((b=>{y=y.insert(E,b)}))))).next((()=>this.populateOverlays(e,_,l))).next((()=>this.computeViews(e,y,_,De()))).next((E=>({batchId:f,changes:rv(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((i=>{let o=Ra();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ra();return this.indexManager.getCollectionParents(e,l).next((f=>X.forEach(f,(y=>{const _=(function(A,b){return new hc(b,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((E=>{E.forEach(((A,b)=>{h=h.insert(A,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((y,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Jt.newInvalidDocument(E)))}));let f=Ra();return h.forEach(((y,_)=>{const E=l.get(y);E!==void 0&&ja(E.mutation,_,tr.empty(),Nt.now()),fc(t,_)&&(f=f.insert(y,_))})),f}))}}class I1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return X.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:xr(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:v1(o.bundledQuery),readTime:xr(o.readTime)}})(t)),X.resolve()}}class k1{constructor(){this.overlays=new ct(xe.comparator),this.Ir=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=yi();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.ht(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const o=yi(),l=t.length+1,h=new xe(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const y=f.getNext().value,_=y.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new ct(((_,E)=>_-E));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=l.get(_.largestBatchId);E===null&&(E=yi(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const f=yi(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,E)=>f.set(_,E))),!(f.size()>=o)););return X.resolve(f)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new KE(t,i));let l=this.Ir.get(t);l===void 0&&(l=De(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}class S1{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class af{constructor(){this.Tr=new Ht(Mt.Er),this.dr=new Ht(Mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Mt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new Mt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new xe(new it([])),i=new Mt(t,e),o=new Mt(t,e+1),l=[];return this.dr.forEachInRange([i,o],(h=>{this.Vr(h),l.push(h.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new xe(new it([])),i=new Mt(t,e),o=new Mt(t,e+1);let l=De();return this.dr.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Mt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Mt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return xe.comparator(e.key,t.key)||He(e.wr,t.wr)}static Ar(e,t){return He(e.wr,t.wr)||xe.comparator(e.key,t.key)}}class A1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ht(Mt.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new GE(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.br=this.br.add(new Mt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(h)}lookupMutationBatch(e,t){return X.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Mt(t,0),o=new Mt(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,o],(h=>{const f=this.Dr(h.wr);l.push(f)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ht(He);return t.forEach((o=>{const l=new Mt(o,0),h=new Mt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],(f=>{i=i.add(f.wr)}))})),X.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;xe.isDocumentKey(l)||(l=l.child(""));const h=new Mt(new xe(l),0);let f=new Ht(He);return this.br.forEachWhile((y=>{const _=y.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(f=f.add(y.wr)),!0)}),h),X.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return X.forEach(t.mutations,(o=>{const l=new Mt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new Mt(t,0),o=this.br.firstAfterOrEqual(i);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class R1{constructor(e){this.Mr=e,this.docs=(function(){return new ct(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let i=Yr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Jt.newInvalidDocument(o))})),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Yr();const h=t.path,f=new xe(h.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:_,value:{document:E}}=y.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||cE(uE(E),i)<=0||(o.has(E.key)||fc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se()}Or(e,t){return X.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new C1(this)}getSize(e){return X.resolve(this.size)}}class C1 extends x1{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),X.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class N1{constructor(e){this.persistence=e,this.Nr=new Vo((t=>Jd(t)),Zd),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new af,this.targetCount=0,this.kr=No.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),X.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new No(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Kn(t),X.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Nr.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.Br.containsKey(t))}}class P1{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Kd(0),this.Kr=!1,this.Kr=!0,this.$r=new S1,this.referenceDelegate=e(this),this.Ur=new N1(this),this.indexManager=new _1,this.remoteDocumentCache=(function(o){return new R1(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new y1(t),this.Gr=new I1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new A1(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const o=new b1(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((l=>this.referenceDelegate.jr(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Hr(e,t){return X.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class b1 extends dE{constructor(e){super(),this.currentSequenceNumber=e}}class lf{constructor(e){this.persistence=e,this.Jr=new af,this.Yr=null}static Zr(e){return new lf(e)}get Xr(){if(this.Yr)return this.Yr;throw Se()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),X.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.Xr.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,(i=>{const o=xe.fromPath(i);return this.ei(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return X.or([()=>X.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class uf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=De(),o=De();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new uf(e,t.fromCache,i,o)}}class D1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class j1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Mw()?8:fE(Zt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Yi(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.Zi(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new D1;return this.Xi(e,t,h).next((f=>{if(l.result=f,this.zi)return this.es(e,t,h,f.size)}))})).next((()=>l.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(ka()<=Ve.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",vo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(ka()<=Ve.DEBUG&&de("QueryEngine","Query:",vo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(ka()<=Ve.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",vo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):X.resolve())}Yi(e,t){if(Tg(t))return X.resolve(null);let i=_r(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Id(t,null,"F"),i=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=De(...l);return this.Ji.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((y=>{const _=this.ts(t,f);return this.ns(t,_,h,y.readTime)?this.Yi(e,Id(t,null,"F")):this.rs(e,_,t,y)}))))})))))}Zi(e,t,i,o){return Tg(t)||o.isEqual(Ae.min())?X.resolve(null):this.Ji.getDocuments(e,i).next((l=>{const h=this.ts(t,l);return this.ns(t,h,i,o)?X.resolve(null):(ka()<=Ve.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vo(t)),this.rs(e,h,t,lE(o,-1)).next((f=>f)))}))}ts(e,t){let i=new Ht(tv(e));return t.forEach(((o,l)=>{fc(e,l)&&(i=i.add(l))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Xi(e,t,i){return ka()<=Ve.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",vo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Vs.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}class O1{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ct(He),this._s=new Vo((l=>Jd(l)),Zd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new T1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function M1(r,e,t,i){return new O1(r,e,t,i)}async function Ev(r,e){const t=Re(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let y=De();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)y=y.add(E.key)}for(const _ of l){f.push(_.batchId);for(const E of _.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next((_=>({hs:_,removedBatchIds:h,addedBatchIds:f})))}))}))}function V1(r,e){const t=Re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(f,y,_,E){const A=_.batch,b=A.keys();let M=X.resolve();return b.forEach((P=>{M=M.next((()=>E.getEntry(y,P))).next((H=>{const F=_.docVersions.get(P);Qe(F!==null),H.version.compareTo(F)<0&&(A.applyToRemoteDocument(H,_),H.isValidDocument()&&(H.setReadTime(_.commitVersion),E.addEntry(H)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(y,A)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let y=De();for(let _=0;_<f.mutationResults.length;++_)f.mutationResults[_].transformResults.length>0&&(y=y.add(f.batch.mutations[_].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Tv(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function L1(r,e){const t=Re(r),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const f=[];e.targetChanges.forEach(((E,A)=>{const b=o.get(A);if(!b)return;f.push(t.Ur.removeMatchingKeys(l,E.removedDocuments,A).next((()=>t.Ur.addMatchingKeys(l,E.addedDocuments,A))));let M=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(A)!==null?M=M.withResumeToken(qt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,i)),o=o.insert(A,M),(function(H,F,q){return H.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(b,M,E)&&f.push(t.Ur.updateTargetData(l,M))}));let y=Yr(),_=De();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),f.push(U1(l,h,e.documentUpdates).next((E=>{y=E.Ps,_=E.Is}))),!i.isEqual(Ae.min())){const E=t.Ur.getLastRemoteSnapshotVersion(l).next((A=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(E)}return X.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,_))).next((()=>y))})).then((l=>(t.os=o,l)))}function U1(r,e,t){let i=De(),o=De();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Yr();return t.forEach(((f,y)=>{const _=l.get(f);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(f)),y.isNoDocument()&&y.version.isEqual(Ae.min())?(e.removeEntry(f,y.readTime),h=h.insert(f,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),h=h.insert(f,y)):de("LocalStore","Ignoring outdated watch update for ",f,". Current version:",_.version," Watch version:",y.version)})),{Ps:h,Is:o}}))}function F1(r,e){const t=Re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function z1(r,e){const t=Re(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((l=>l?(o=l,X.resolve(o)):t.Ur.allocateTargetId(i).next((h=>(o=new Ps(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function Cd(r,e,t){const i=Re(r),o=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Za(h))throw h;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function jg(r,e,t){const i=Re(r);let o=Ae.min(),l=De();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,_,E){const A=Re(y),b=A._s.get(E);return b!==void 0?X.resolve(A.os.get(b)):A.Ur.getTargetData(_,E)})(i,h,_r(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,f.targetId).next((y=>{l=y}))})).next((()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:De()))).next((f=>(B1(i,bE(e),f),{documents:f,Ts:l})))))}function B1(r,e,t){let i=r.us.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.us.set(e,i)}class Og{constructor(){this.activeTargetIds=LE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $1{constructor(){this.so=new Og,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Og,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class H1{_o(e){}shutdown(){}}class Mg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Au=null;function ad(){return Au===null?Au=(function(){return 268435456+Math.round(2147483648*Math.random())})():Au++,"0x"+Au.toString(16)}const q1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Xt="WebChannelConnection";class G1 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}get Fo(){return!1}Mo(t,i,o,l,h){const f=ad(),y=this.xo(t,i.toUriEncodedString());de("RestConnection",`Sending RPC '${t}' ${f}:`,y,o);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,l,h),this.No(t,y,_,o).then((E=>(de("RestConnection",`Received RPC '${t}' ${f}: `,E),E)),(E=>{throw So("RestConnection",`RPC '${t}' ${f} failed with error: `,E,"url: ",y,"request:",o),E}))}Lo(t,i,o,l,h,f){return this.Mo(t,i,o,l,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,h)=>t[h]=l)),o&&o.headers.forEach(((l,h)=>t[h]=l))}xo(t,i){const o=q1[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const l=ad();return new Promise(((h,f)=>{const y=new Ly;y.setWithCredentials(!0),y.listenOnce(Uy.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Du.NO_ERROR:const E=y.getResponseJson();de(Xt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case Du.TIMEOUT:de(Xt,`RPC '${e}' ${l} timed out`),f(new ve(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:const A=y.getStatus();if(de(Xt,`RPC '${e}' ${l} failed with status:`,A,"response text:",y.getResponseText()),A>0){let b=y.getResponseJson();Array.isArray(b)&&(b=b[0]);const M=b?.error;if(M&&M.status&&M.message){const P=(function(F){const q=F.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(q)>=0?q:Y.UNKNOWN})(M.status);f(new ve(P,M.message))}else f(new ve(Y.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new ve(Y.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{de(Xt,`RPC '${e}' ${l} completed.`)}}));const _=JSON.stringify(o);de(Xt,`RPC '${e}' ${l} sending request:`,o),y.send(t,"POST",_,i,15)}))}Bo(e,t,i){const o=ad(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=By(),f=zy(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const E=l.join("");de(Xt,`Creating RPC '${e}' stream ${o}: ${E}`,y);const A=h.createWebChannel(E,y);let b=!1,M=!1;const P=new W1({Io:F=>{M?de(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(b||(de(Xt,`Opening RPC '${e}' stream ${o} transport.`),A.open(),b=!0),de(Xt,`RPC '${e}' stream ${o} sending:`,F),A.send(F))},To:()=>A.close()}),H=(F,q,W)=>{F.listen(q,(ne=>{try{W(ne)}catch(se){setTimeout((()=>{throw se}),0)}}))};return H(A,Aa.EventType.OPEN,(()=>{M||(de(Xt,`RPC '${e}' stream ${o} transport opened.`),P.yo())})),H(A,Aa.EventType.CLOSE,(()=>{M||(M=!0,de(Xt,`RPC '${e}' stream ${o} transport closed`),P.So())})),H(A,Aa.EventType.ERROR,(F=>{M||(M=!0,So(Xt,`RPC '${e}' stream ${o} transport errored:`,F),P.So(new ve(Y.UNAVAILABLE,"The operation could not be completed")))})),H(A,Aa.EventType.MESSAGE,(F=>{var q;if(!M){const W=F.data[0];Qe(!!W);const ne=W,se=ne.error||((q=ne[0])===null||q===void 0?void 0:q.error);if(se){de(Xt,`RPC '${e}' stream ${o} received error:`,se);const Ee=se.status;let ie=(function(k){const N=kt[k];if(N!==void 0)return dv(N)})(Ee),R=se.message;ie===void 0&&(ie=Y.INTERNAL,R="Unknown error status: "+Ee+" with message "+se.message),M=!0,P.So(new ve(ie,R)),A.close()}else de(Xt,`RPC '${e}' stream ${o} received:`,W),P.bo(W)}})),H(f,Fy.STAT_EVENT,(F=>{F.stat===_d.PROXY?de(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===_d.NOPROXY&&de(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.wo()}),0),P}}function ld(){return typeof document<"u"?document:null}function yc(r){return new r1(r,!0)}class Iv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class kv{constructor(e,t,i,o,l,h,f,y){this.ui=e,this.Ho=i,this.Jo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Iv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new ve(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class K1 extends kv{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=o1(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?xr(h.readTime):Ae.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Rd(this.serializer),t.addTarget=(function(l,h){let f;const y=h.target;if(f=Td(y)?{documents:u1(l,y)}:{query:c1(l,y)._t},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=mv(l,h.resumeToken);const _=kd(l,h.expectedCount);_!==null&&(f.expectedCount=_)}else if(h.snapshotVersion.compareTo(Ae.min())>0){f.readTime=Yu(l,h.snapshotVersion.toTimestamp());const _=kd(l,h.expectedCount);_!==null&&(f.expectedCount=_)}return f})(this.serializer,e);const i=d1(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Rd(this.serializer),t.removeTarget=e,this.a_(t)}}class Q1 extends kv{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=l1(e.writeResults,e.commitTime),i=xr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Rd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>a1(this.serializer,i)))};this.a_(t)}}class X1 extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new ve(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Mo(e,Sd(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(Y.UNKNOWN,l.toString())}))}Lo(e,t,i,o,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Lo(e,Sd(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ve(Y.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Y1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xr(t),this.D_=!1):de("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class J1{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((h=>{i.enqueueAndForget((async()=>{Ni(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await(async function(y){const _=Re(y);_.L_.add(4),await nl(_),_.q_.set("Unknown"),_.L_.delete(4),await vc(_)})(this))}))})),this.q_=new Y1(i,o)}}async function vc(r){if(Ni(r))for(const e of r.B_)await e(!0)}async function nl(r){for(const e of r.B_)await e(!1)}function Sv(r,e){const t=Re(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ff(t)?df(t):Lo(t).r_()&&hf(t,e))}function cf(r,e){const t=Re(r),i=Lo(t);t.N_.delete(e),i.r_()&&Av(t,e),t.N_.size===0&&(i.r_()?i.o_():Ni(t)&&t.q_.set("Unknown"))}function hf(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lo(r).A_(e)}function Av(r,e){r.Q_.xe(e),Lo(r).R_(e)}function df(r){r.Q_=new ZE({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Lo(r).start(),r.q_.v_()}function ff(r){return Ni(r)&&!Lo(r).n_()&&r.N_.size>0}function Ni(r){return Re(r).L_.size===0}function Rv(r){r.Q_=void 0}async function Z1(r){r.q_.set("Online")}async function eT(r){r.N_.forEach(((e,t)=>{hf(r,e)}))}async function tT(r,e){Rv(r),ff(r)?(r.q_.M_(e),df(r)):r.q_.set("Unknown")}async function nT(r,e,t){if(r.q_.set("Online"),e instanceof pv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.N_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.N_.delete(f),o.Q_.removeTarget(f))})(r,e)}catch(i){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ju(r,i)}else if(e instanceof Mu?r.Q_.Ke(e):e instanceof fv?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Ae.min()))try{const i=await Tv(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Q_.rt(h);return f.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.N_.get(_);E&&l.N_.set(_,E.withResumeToken(y.resumeToken,h))}})),f.targetMismatches.forEach(((y,_)=>{const E=l.N_.get(y);if(!E)return;l.N_.set(y,E.withResumeToken(qt.EMPTY_BYTE_STRING,E.snapshotVersion)),Av(l,y);const A=new Ps(E.target,y,_,E.sequenceNumber);hf(l,A)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){de("RemoteStore","Failed to raise snapshot:",i),await Ju(r,i)}}async function Ju(r,e,t){if(!Za(e))throw e;r.L_.add(1),await nl(r),r.q_.set("Offline"),t||(t=()=>Tv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{de("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await vc(r)}))}function Cv(r,e){return e().catch((t=>Ju(r,t,e)))}async function _c(r){const e=Re(r),t=Us(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;rT(e);)try{const o=await F1(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,sT(e,o)}catch(o){await Ju(e,o)}Nv(e)&&Pv(e)}function rT(r){return Ni(r)&&r.O_.length<10}function sT(r,e){r.O_.push(e);const t=Us(r);t.r_()&&t.V_&&t.m_(e.mutations)}function Nv(r){return Ni(r)&&!Us(r).n_()&&r.O_.length>0}function Pv(r){Us(r).start()}async function iT(r){Us(r).p_()}async function oT(r){const e=Us(r);for(const t of r.O_)e.m_(t.mutations)}async function aT(r,e,t){const i=r.O_.shift(),o=rf.from(i,e,t);await Cv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await _c(r)}async function lT(r,e){e&&Us(r).V_&&await(async function(i,o){if((function(h){return XE(h)&&h!==Y.ABORTED})(o.code)){const l=i.O_.shift();Us(i).s_(),await Cv(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await _c(i)}})(r,e),Nv(r)&&Pv(r)}async function Vg(r,e){const t=Re(r);t.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const i=Ni(t);t.L_.add(3),await nl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await vc(t)}async function uT(r,e){const t=Re(r);e?(t.L_.delete(2),await vc(t)):e||(t.L_.add(2),await nl(t),t.q_.set("Unknown"))}function Lo(r){return r.K_||(r.K_=(function(t,i,o){const l=Re(t);return l.w_(),new K1(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Eo:Z1.bind(null,r),Ro:eT.bind(null,r),mo:tT.bind(null,r),d_:nT.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),ff(r)?df(r):r.q_.set("Unknown")):(await r.K_.stop(),Rv(r))}))),r.K_}function Us(r){return r.U_||(r.U_=(function(t,i,o){const l=Re(t);return l.w_(),new Q1(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iT.bind(null,r),mo:lT.bind(null,r),f_:oT.bind(null,r),g_:aT.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await _c(r)):(await r.U_.stop(),r.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}class pf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new pf(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mf(r,e){if(Xr("AsyncQueue",`${e}: ${r}`),Za(r))return new ve(Y.UNAVAILABLE,`${e}: ${r}`);throw r}class xo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||xe.comparator(t.key,i.key):(t,i)=>xe.comparator(t.key,i.key),this.keyedMap=Ra(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new xo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Lg{constructor(){this.W_=new ct(xe.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Se():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Po{constructor(e,t,i,o,l,h,f,y,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Po(e,t,xo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class cT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class hT{constructor(){this.queries=Ug(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=Ug(),l.forEach(((h,f)=>{for(const y of f.j_)y.onError(i)}))})(this,new ve(Y.ABORTED,"Firestore shutting down"))}}function Ug(){return new Vo((r=>ev(r)),dc)}async function bv(r,e){const t=Re(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.H_()&&e.J_()&&(i=2):(l=new cT,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(o,!0);break;case 1:l.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=mf(h,`Initialization of query '${vo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&gf(t)}async function Dv(r,e){const t=Re(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.j_.indexOf(e);h>=0&&(l.j_.splice(h,1),l.j_.length===0?o=e.J_()?0:1:!l.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function dT(r,e){const t=Re(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.j_)f.X_(o)&&(i=!0);h.z_=o}}i&&gf(t)}function fT(r,e,t){const i=Re(r),o=i.queries.get(e);if(o)for(const l of o.j_)l.onError(t);i.queries.delete(e)}function gf(r){r.Y_.forEach((e=>{e.next()}))}var Nd,Fg;(Fg=Nd||(Nd={})).ea="default",Fg.Cache="cache";class jv{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Po(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nd.Cache}}class Ov{constructor(e){this.key=e}}class Mv{constructor(e){this.key=e}}class pT{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=De(),this.mutatedKeys=De(),this.Aa=tv(e),this.Ra=new xo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new Lg,o=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,A)=>{const b=o.get(E),M=fc(this.query,A)?A:null,P=!!b&&this.mutatedKeys.has(b.key),H=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let F=!1;b&&M?b.data.isEqual(M.data)?P!==H&&(i.track({type:3,doc:M}),F=!0):this.ga(b,M)||(i.track({type:2,doc:M}),F=!0,(y&&this.Aa(M,y)>0||_&&this.Aa(M,_)<0)&&(f=!0)):!b&&M?(i.track({type:0,doc:M}),F=!0):b&&!M&&(i.track({type:1,doc:b}),F=!0,(y||_)&&(f=!0)),F&&(M?(h=h.add(M),l=H?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{Ra:h,fa:i,ns:f,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((E,A)=>(function(M,P){const H=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return H(M)-H(P)})(E.type,A.type)||this.Aa(E.doc,A.doc))),this.pa(i),o=o!=null&&o;const f=t&&!o?this.ya():[],y=this.da.size===0&&this.current&&!o?1:0,_=y!==this.Ea;return this.Ea=y,h.length!==0||_?{snapshot:new Po(this.query,e.Ra,l,h,e.mutatedKeys,y===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Lg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=De(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new Mv(i))})),this.da.forEach((i=>{e.has(i)||t.push(new Ov(i))})),t}ba(e){this.Ta=e.Ts,this.da=De();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Po.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class mT{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class gT{constructor(e){this.key=e,this.va=!1}}class yT{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Vo((f=>ev(f)),dc),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(xe.comparator),this.Na=new Map,this.La=new af,this.Ba={},this.ka=new Map,this.qa=No.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vT(r,e,t=!0){const i=Bv(r);let o;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Da()):o=await Vv(i,e,t,!0),o}async function _T(r,e){const t=Bv(r);await Vv(t,e,!0,!1)}async function Vv(r,e,t,i){const o=await z1(r.localStore,_r(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await wT(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Sv(r.remoteStore,o),f}async function wT(r,e,t,i,o){r.Ka=(A,b,M)=>(async function(H,F,q,W){let ne=F.view.ma(q);ne.ns&&(ne=await jg(H.localStore,F.query,!1).then((({documents:R})=>F.view.ma(R,ne))));const se=W&&W.targetChanges.get(F.targetId),Ee=W&&W.targetMismatches.get(F.targetId)!=null,ie=F.view.applyChanges(ne,H.isPrimaryClient,se,Ee);return Bg(H,F.targetId,ie.wa),ie.snapshot})(r,A,b,M);const l=await jg(r.localStore,e,!0),h=new pT(e,l.Ts),f=h.ma(l.documents),y=tl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=h.applyChanges(f,r.isPrimaryClient,y);Bg(r,t,_.wa);const E=new mT(e,t,h);return r.Fa.set(e,E),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),_.snapshot}async function xT(r,e,t){const i=Re(r),o=i.Fa.get(e),l=i.Ma.get(o.targetId);if(l.length>1)return i.Ma.set(o.targetId,l.filter((h=>!dc(h,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Cd(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&cf(i.remoteStore,o.targetId),Pd(i,o.targetId)})).catch(Ja)):(Pd(i,o.targetId),await Cd(i.localStore,o.targetId,!0))}async function ET(r,e){const t=Re(r),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),cf(t.remoteStore,i.targetId))}async function TT(r,e,t){const i=NT(r);try{const o=await(function(h,f){const y=Re(h),_=Nt.now(),E=f.reduce(((M,P)=>M.add(P.key)),De());let A,b;return y.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let P=Yr(),H=De();return y.cs.getEntries(M,E).next((F=>{P=F,P.forEach(((q,W)=>{W.isValidDocument()||(H=H.add(q))}))})).next((()=>y.localDocuments.getOverlayedDocuments(M,P))).next((F=>{A=F;const q=[];for(const W of f){const ne=qE(W,A.get(W.key).overlayedDocument);ne!=null&&q.push(new Ci(W.key,ne,Gy(ne.value.mapValue),wr.exists(!0)))}return y.mutationQueue.addMutationBatch(M,_,q,f)})).next((F=>{b=F;const q=F.applyToLocalDocumentSet(A,H);return y.documentOverlayCache.saveOverlays(M,F.batchId,q)}))})).then((()=>({batchId:b.batchId,changes:rv(A)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,y){let _=h.Ba[h.currentUser.toKey()];_||(_=new ct(He)),_=_.insert(f,y),h.Ba[h.currentUser.toKey()]=_})(i,o.batchId,t),await rl(i,o.changes),await _c(i.remoteStore)}catch(o){const l=mf(o,"Failed to persist write");t.reject(l)}}async function Lv(r,e){const t=Re(r);try{const i=await L1(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Na.get(l);h&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Qe(h.va):o.removedDocuments.size>0&&(Qe(h.va),h.va=!1))})),await rl(t,i,e)}catch(i){await Ja(i)}}function zg(r,e,t){const i=Re(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((l,h)=>{const f=h.view.Z_(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const y=Re(h);y.onlineState=f;let _=!1;y.queries.forEach(((E,A)=>{for(const b of A.j_)b.Z_(f)&&(_=!0)})),_&&gf(y)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function IT(r,e,t){const i=Re(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),l=o&&o.key;if(l){let h=new ct(xe.comparator);h=h.insert(l,Jt.newNoDocument(l,Ae.min()));const f=De().add(l),y=new gc(Ae.min(),new Map,new ct(He),h,f);await Lv(i,y),i.Oa=i.Oa.remove(l),i.Na.delete(e),yf(i)}else await Cd(i.localStore,e,!1).then((()=>Pd(i,e,t))).catch(Ja)}async function kT(r,e){const t=Re(r),i=e.batch.batchId;try{const o=await V1(t.localStore,e);Fv(t,i,null),Uv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await rl(t,o)}catch(o){await Ja(o)}}async function ST(r,e,t){const i=Re(r);try{const o=await(function(h,f){const y=Re(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return y.mutationQueue.lookupMutationBatch(_,f).next((A=>(Qe(A!==null),E=A.keys(),y.mutationQueue.removeMutationBatch(_,A)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,E,f))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>y.localDocuments.getDocuments(_,E)))}))})(i.localStore,e);Fv(i,e,t),Uv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await rl(i,o)}catch(o){await Ja(o)}}function Uv(r,e){(r.ka.get(e)||[]).forEach((t=>{t.resolve()})),r.ka.delete(e)}function Fv(r,e,t){const i=Re(r);let o=i.Ba[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Pd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Ma.get(e))r.Fa.delete(i),t&&r.Ca.$a(i,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((i=>{r.La.containsKey(i)||zv(r,i)}))}function zv(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(cf(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),yf(r))}function Bg(r,e,t){for(const i of t)i instanceof Ov?(r.La.addReference(i.key,e),AT(r,i)):i instanceof Mv?(de("SyncEngine","Document no longer in limbo: "+i.key),r.La.removeReference(i.key,e),r.La.containsKey(i.key)||zv(r,i.key)):Se()}function AT(r,e){const t=e.key,i=t.path.canonicalString();r.Oa.get(t)||r.xa.has(i)||(de("SyncEngine","New document in limbo: "+t),r.xa.add(i),yf(r))}function yf(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new xe(it.fromString(e)),i=r.qa.next();r.Na.set(i,new gT(t)),r.Oa=r.Oa.insert(t,i),Sv(r.remoteStore,new Ps(_r(ef(t.path)),i,"TargetPurposeLimboResolution",Kd.oe))}}async function rl(r,e,t){const i=Re(r),o=[],l=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach(((f,y)=>{h.push(i.Ka(y,e,t).then((_=>{var E;if((_||t)&&i.isPrimaryClient){const A=_?!_.fromCache:(E=t?.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,A?"current":"not-current")}if(_){o.push(_);const A=uf.Wi(y.targetId,_);l.push(A)}})))})),await Promise.all(h),i.Ca.d_(o),await(async function(y,_){const E=Re(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>X.forEach(_,(b=>X.forEach(b.$i,(M=>E.persistence.referenceDelegate.addReference(A,b.targetId,M))).next((()=>X.forEach(b.Ui,(M=>E.persistence.referenceDelegate.removeReference(A,b.targetId,M)))))))))}catch(A){if(!Za(A))throw A;de("LocalStore","Failed to update sequence numbers: "+A)}for(const A of _){const b=A.targetId;if(!A.fromCache){const M=E.os.get(b),P=M.snapshotVersion,H=M.withLastLimboFreeSnapshotVersion(P);E.os=E.os.insert(b,H)}}})(i.localStore,l))}async function RT(r,e){const t=Re(r);if(!t.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const i=await Ev(t.localStore,e);t.currentUser=e,(function(l,h){l.ka.forEach((f=>{f.forEach((y=>{y.reject(new ve(Y.CANCELLED,h))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rl(t,i.hs)}}function CT(r,e){const t=Re(r),i=t.Na.get(e);if(i&&i.va)return De().add(i.key);{let o=De();const l=t.Ma.get(e);if(!l)return o;for(const h of l){const f=t.Fa.get(h);o=o.unionWith(f.view.Va)}return o}}function Bv(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IT.bind(null,e),e.Ca.d_=dT.bind(null,e.eventManager),e.Ca.$a=fT.bind(null,e.eventManager),e}function NT(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ST.bind(null,e),e}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return M1(this.persistence,new j1,e.initialUser,this.serializer)}Ga(e){return new P1(lf.Zr,this.serializer)}Wa(e){return new $1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class bd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RT.bind(null,this.syncEngine),await uT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hT})()}createDatastore(e){const t=yc(e.databaseInfo.databaseId),i=(function(l){return new G1(l)})(e.databaseInfo);return(function(l,h,f,y){return new X1(l,h,f,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new J1(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>zg(this.syncEngine,t,0)),(function(){return Mg.D()?new Mg:new H1})())}createSyncEngine(e,t){return(function(o,l,h,f,y,_,E){const A=new yT(o,l,h,f,y,_);return E&&(A.Qa=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);de("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await nl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bd.provider={build:()=>new bd};class $v{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class PT{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Yt.UNAUTHENTICATED,this.clientId=Hy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{de("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(de("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=mf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ud(r,e){r.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Ev(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function $g(r,e){r.asyncQueue.verifyOperationInProgress();const t=await bT(r);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Vg(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Vg(e.remoteStore,o))),r._onlineComponents=e}async function bT(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await ud(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Y.FAILED_PRECONDITION||o.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),await ud(r,new Zu)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await ud(r,new Zu);return r._offlineComponents}async function Hv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await $g(r,r._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await $g(r,new bd))),r._onlineComponents}function DT(r){return Hv(r).then((e=>e.syncEngine))}async function Dd(r){const e=await Hv(r),t=e.eventManager;return t.onListen=vT.bind(null,e.syncEngine),t.onUnlisten=xT.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_T.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ET.bind(null,e.syncEngine),t}function jT(r,e,t={}){const i=new js;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,y,_){const E=new $v({next:b=>{E.Za(),h.enqueueAndForget((()=>Dv(l,A))),b.fromCache&&y.source==="server"?_.reject(new ve(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(b)},error:b=>_.reject(b)}),A=new jv(f,E,{includeMetadataChanges:!0,_a:!0});return bv(l,A)})(await Dd(r),r.asyncQueue,e,t,i))),i.promise}function qv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Hg=new Map;function Wv(r,e,t){if(!t)throw new ve(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function OT(r,e,t,i){if(e===!0&&i===!0)throw new ve(Y.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function qg(r){if(!xe.isDocumentKey(r))throw new ve(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Wg(r){if(xe.isDocumentKey(r))throw new ve(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function vf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se()}function Kr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vf(r);throw new ve(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}class Gg{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qv((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ve(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ve(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ve(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gg(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Zx;switch(i.type){case"firstParty":return new rE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Hg.get(t);i&&(de("ComponentProvider","Removing Datastore"),Hg.delete(t),i.terminate())})(this),Promise.resolve()}}function MT(r,e,t,i={}){var o;const l=(r=Kr(r,wc))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let f,y;if(typeof i.mockUserToken=="string")f=i.mockUserToken,y=Yt.MOCK_USER;else{f=Py(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new ve(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Yt(_)}r._authCredentials=new eE(new $y(f,y))}}class sl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class En{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Os extends sl{constructor(e,t,i){super(e,t,ef(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new xe(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function jd(r,e,...t){if(r=Vt(r),Wv("collection","path",e),r instanceof wc){const i=it.fromString(e,...t);return Wg(i),new Os(r,null,i)}{if(!(r instanceof En||r instanceof Os))throw new ve(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(it.fromString(e,...t));return Wg(i),new Os(r.firestore,null,i)}}function er(r,e,...t){if(r=Vt(r),arguments.length===1&&(e=Hy.newId()),Wv("doc","path",e),r instanceof wc){const i=it.fromString(e,...t);return qg(i),new En(r,null,new xe(i))}{if(!(r instanceof En||r instanceof Os))throw new ve(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(it.fromString(e,...t));return qg(i),new En(r.firestore,r instanceof Os?r.converter:null,new xe(i))}}class Kg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Iv(this,"async_queue_retry"),this.Vu=()=>{const i=ld();i&&de("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=ld();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=ld();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new js;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Za(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f})(i);throw Xr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=pf.createAndSchedule(this,e,t,i,(l=>this.yu(l)));return this.Tu.push(o),o}fu(){this.Eu&&Se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Qg(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class bo extends wc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Kg,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kg(e),this._firestoreClient=void 0,await e}}}function VT(r,e){const t=typeof r=="object"?r:Wd(),i=typeof r=="string"?r:"(default)",o=uc(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=Ry("firestore");l&&MT(o,...l)}return o}function _f(r){if(r._terminated)throw new ve(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||LT(r),r._firestoreClient}function LT(r){var e,t,i;const o=r._freezeSettings(),l=(function(f,y,_,E){return new gE(f,y,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,qv(E.experimentalLongPollingOptions),E.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new PT(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&(function(f){const y=f?._online.build();return{_offline:f?._offline.build(y),_online:y}})(r._componentsProvider))}class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do(qt.fromBase64String(e))}catch(t){throw new ve(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Do(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gv{constructor(e){this._methodName=e}}class xf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}class Ef{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}}const UT=/^__.*__$/;class FT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms):new el(e,this.data,t,this.fieldTransforms)}}function Kv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Tf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Tf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ec(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Kv(this.Cu)&&UT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zT{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||yc(e)}Qu(e,t,i,o=!1){return new Tf({Cu:e,methodName:t,qu:i,path:$t.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BT(r){const e=r._freezeSettings(),t=yc(r._databaseId);return new zT(r._databaseId,!!e.ignoreUndefinedProperties,t)}function $T(r,e,t,i,o,l={}){const h=r.Qu(l.merge||l.mergeFields?2:0,e,t,o);Jv("Data must be an object, but it was:",h,i);const f=Xv(i,h);let y,_;if(l.merge)y=new tr(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const A of l.mergeFields){const b=HT(e,A,t);if(!h.contains(b))throw new ve(Y.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);WT(E,b)||E.push(b)}y=new tr(E),_=h.fieldTransforms.filter((A=>y.covers(A.field)))}else y=null,_=h.fieldTransforms;return new FT(new Dn(f),y,_)}function Qv(r,e){if(Yv(r=Vt(r)))return Jv("Unsupported field value:",e,r),Xv(r,e);if(r instanceof Gv)return(function(i,o){if(!Kv(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let y=Qv(f,o.Lu(h));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return UE(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Nt.fromDate(i);return{timestampValue:Yu(o.serializer,l)}}if(i instanceof Nt){const l=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Yu(o.serializer,l)}}if(i instanceof xf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Do)return{bytesValue:mv(o.serializer,i._byteString)};if(i instanceof En){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:of(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ef)return(function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Bu("VectorValues must only contain numeric values.");return tf(f.serializer,y)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${vf(i)}`)})(r,e)}function Xv(r,e){const t={};return qy(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mo(r,((i,o)=>{const l=Qv(o,e.Mu(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Yv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Nt||r instanceof xf||r instanceof Do||r instanceof En||r instanceof Gv||r instanceof Ef)}function Jv(r,e,t){if(!Yv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=vf(t);throw i==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+i)}}function HT(r,e,t){if((e=Vt(e))instanceof wf)return e._internalPath;if(typeof e=="string")return Zv(r,e);throw ec("Field path arguments must be of type string or ",r,!1,void 0,t)}const qT=new RegExp("[~\\*/\\[\\]]");function Zv(r,e,t){if(e.search(qT)>=0)throw ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new wf(...e.split("."))._internalPath}catch{throw ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function ec(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(l||h)&&(y+=" (found",l&&(y+=` in field ${i}`),h&&(y+=` in document ${o}`),y+=")"),new ve(Y.INVALID_ARGUMENT,f+r+y)}function WT(r,e){return r.some((t=>t.isEqual(e)))}class e0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(t0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GT extends e0{data(){return super.data()}}function t0(r,e){return typeof e=="string"?Zv(r,e):e instanceof wf?e._internalPath:e._delegate._internalPath}function n0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KT{convertValue(e,t="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Mo(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>_t(h.doubleValue)));return new Ef(l)}convertGeoPoint(e){return new xf(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Xd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const t=Ls(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=it.fromString(e);Qe(xv(i));const o=new za(i.get(1),i.get(3)),l=new xe(i.popFirst(5));return o.isEqual(t)||Xr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function QT(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Na{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class r0 extends e0{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(t0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Vu extends r0{data(e={}){return super.data(e)}}class s0{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Na(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Vu(this._firestore,this._userDataWriter,i.key,i,new Na(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const y=new Vu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Na(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const y=new Vu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Na(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return f.type!==0&&(_=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:XT(f.type),doc:y,oldIndex:_,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XT(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}class If extends KT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function i0(r){r=Kr(r,sl);const e=Kr(r.firestore,bo),t=_f(e),i=new If(e);return n0(r._query),jT(t,r._query).then((o=>new s0(e,i,r,o)))}function Ru(r,e,t){r=Kr(r,En);const i=Kr(r.firestore,bo),o=QT(r.converter,e,t);return o0(i,[$T(BT(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,wr.none())])}function YT(r){return o0(Kr(r.firestore,bo),[new nf(r._key,wr.none())])}function mi(r,...e){var t,i,o;r=Vt(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Qg(e[h])||(l=e[h],h++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Qg(e[h])){const A=e[h];e[h]=(t=A.next)===null||t===void 0?void 0:t.bind(A),e[h+1]=(i=A.error)===null||i===void 0?void 0:i.bind(A),e[h+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let y,_,E;if(r instanceof En)_=Kr(r.firestore,bo),E=ef(r._key.path),y={next:A=>{e[h]&&e[h](JT(_,r,A))},error:e[h+1],complete:e[h+2]};else{const A=Kr(r,sl);_=Kr(A.firestore,bo),E=A._query;const b=new If(_);y={next:M=>{e[h]&&e[h](new s0(_,b,A,M))},error:e[h+1],complete:e[h+2]},n0(r._query)}return(function(b,M,P,H){const F=new $v(H),q=new jv(M,F,P);return b.asyncQueue.enqueueAndForget((async()=>bv(await Dd(b),q))),()=>{F.Za(),b.asyncQueue.enqueueAndForget((async()=>Dv(await Dd(b),q)))}})(_f(_),E,f,y)}function o0(r,e){return(function(i,o){const l=new js;return i.asyncQueue.enqueueAndForget((async()=>TT(await DT(i),o,l))),l.promise})(_f(r),e)}function JT(r,e,t){const i=t.docs.get(e._key),o=new If(r);return new r0(r,o,e._key,i,new Na(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Oo=o})(Ri),Ei(new Ms("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new bo(new tE(i.getProvider("auth-internal")),new iE(i.getProvider("app-check-internal")),(function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ve(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new za(_.options.projectId,E)})(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),vr(fg,"4.7.3",e),vr(fg,"4.7.3","esm2017")})();var ZT="firebase",eI="10.14.1";vr(ZT,eI,"app");function kf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function a0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tI=a0,l0=new Xa("auth","Firebase",a0());const tc=new Hd("@firebase/auth");function nI(r,...e){tc.logLevel<=Ve.WARN&&tc.warn(`Auth (${Ri}): ${r}`,...e)}function Lu(r,...e){tc.logLevel<=Ve.ERROR&&tc.error(`Auth (${Ri}): ${r}`,...e)}function kr(r,...e){throw Af(r,...e)}function nr(r,...e){return Af(r,...e)}function Sf(r,e,t){const i=Object.assign(Object.assign({},tI()),{[e]:t});return new Xa("auth","Firebase",i).create(e,{appName:r.name})}function wi(r){return Sf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&kr(r,"argument-error"),Sf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Af(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return l0.create(r,...e)}function ke(r,e,...t){if(!r)throw Af(e,...t)}function qr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lu(e),new Error(e)}function Jr(r,e){r||qr(e)}function Od(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function sI(){return Xg()==="http:"||Xg()==="https:"}function Xg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}function iI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sI()||Dw()||"connection"in navigator)?navigator.onLine:!0}function oI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class il{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jr(t>e,"Short delay should be less than long delay!"),this.isMobile=Nw()||jw()}get(){return iI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rf(r,e){Jr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class u0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const aI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const lI=new il(3e4,6e4);function Cf(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Uo(r,e,t,i,o={}){return c0(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=Ya(Object.assign({key:r.config.apiKey},h)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _=Object.assign({method:e,headers:y},l);return bw()||(_.referrerPolicy="no-referrer"),u0.fetch()(h0(r,r.config.apiHost,t,f),_)})}async function c0(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},aI),e);try{const o=new cI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Cu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[y,_]=f.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cu(r,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw Cu(r,"email-already-in-use",h);if(y==="USER_DISABLED")throw Cu(r,"user-disabled",h);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Sf(r,E,_);kr(r,E)}}catch(o){if(o instanceof Sr)throw o;kr(r,"network-request-failed",{message:String(o)})}}async function uI(r,e,t,i,o={}){const l=await Uo(r,e,t,i,o);return"mfaPendingCredential"in l&&kr(r,"multi-factor-auth-required",{_serverResponse:l}),l}function h0(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?Rf(r.config,o):`${r.config.apiScheme}://${o}`}class cI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(nr(this.auth,"network-request-failed")),lI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=nr(r,e,i);return o.customData._tokenResponse=t,o}async function hI(r,e){return Uo(r,"POST","/v1/accounts:delete",e)}async function d0(r,e){return Uo(r,"POST","/v1/accounts:lookup",e)}function Oa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dI(r,e=!1){const t=Vt(r),i=await t.getIdToken(e),o=Nf(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:i,authTime:Oa(cd(o.auth_time)),issuedAtTime:Oa(cd(o.iat)),expirationTime:Oa(cd(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function cd(r){return Number(r)*1e3}function Nf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Sy(t);return o?JSON.parse(o):(Lu("Failed to decode base64 JWT payload"),null)}catch(o){return Lu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Yg(r){const e=Nf(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function qa(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Sr&&fI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function fI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class pI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Md{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function nc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await qa(r,d0(t,{idToken:i}));ke(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?f0(l.providerUserInfo):[],f=gI(r.providerData,h),y=r.isAnonymous,_=!(r.email&&l.passwordHash)&&!f?.length,E=y?_:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Md(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,A)}async function mI(r){const e=Vt(r);await nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function f0(r){return r.map(e=>{var{providerId:t}=e,i=kf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function yI(r,e){const t=await c0(r,{},async()=>{const i=Ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=h0(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",u0.fetch()(h,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vI(r,e){return Uo(r,"POST","/v2/accounts:revokeToken",Cf(r,e))}class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Yg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await yI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Eo;return i&&(ke(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return qr("not implemented")}}function Ss(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Wr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=kf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Md(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await qa(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dI(this,e)}reload(){return mI(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await nc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hr(this.auth.app))return Promise.reject(wi(this.auth));const e=await this.getIdToken();return await qa(this,hI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,f,y,_,E;const A=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,M=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,P=(h=t.photoURL)!==null&&h!==void 0?h:void 0,H=(f=t.tenantId)!==null&&f!==void 0?f:void 0,F=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,q=(_=t.createdAt)!==null&&_!==void 0?_:void 0,W=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ne,emailVerified:se,isAnonymous:Ee,providerData:ie,stsTokenManager:R}=t;ke(ne&&R,e,"internal-error");const T=Eo.fromJSON(this.name,R);ke(typeof ne=="string",e,"internal-error"),Ss(A,e.name),Ss(b,e.name),ke(typeof se=="boolean",e,"internal-error"),ke(typeof Ee=="boolean",e,"internal-error"),Ss(M,e.name),Ss(P,e.name),Ss(H,e.name),Ss(F,e.name),Ss(q,e.name),Ss(W,e.name);const k=new Wr({uid:ne,auth:e,email:b,emailVerified:se,displayName:A,isAnonymous:Ee,photoURL:P,phoneNumber:M,tenantId:H,stsTokenManager:T,createdAt:q,lastLoginAt:W});return ie&&Array.isArray(ie)&&(k.providerData=ie.map(N=>Object.assign({},N))),F&&(k._redirectEventId=F),k}static async _fromIdTokenResponse(e,t,i=!1){const o=new Eo;o.updateFromServerResponse(t);const l=new Wr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await nc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?f0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new Eo;f.updateFromIdToken(i);const y=new Wr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Md(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(y,_),y}}const Jg=new Map;function Gr(r){Jr(r instanceof Function,"Expected a class definition");let e=Jg.get(r);return e?(Jr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Jg.set(r,e),e)}class p0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}p0.type="NONE";const Zg=p0;function Uu(r,e,t){return`firebase:${r}:${e}:${t}`}class To{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Uu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Uu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new To(Gr(Zg),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||Gr(Zg);const h=Uu(i,e.config.apiKey,e.name);let f=null;for(const _ of t)try{const E=await _._get(h);if(E){const A=Wr._fromJSON(e,E);_!==l&&(f=A),l=_;break}}catch{}const y=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new To(l,e,i):(l=y[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new To(l,e,i))}}function ey(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w0(e))return"Blackberry";if(x0(e))return"Webos";if(g0(e))return"Safari";if((e.includes("chrome/")||y0(e))&&!e.includes("edge/"))return"Chrome";if(_0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function m0(r=Zt()){return/firefox\//i.test(r)}function g0(r=Zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y0(r=Zt()){return/crios\//i.test(r)}function v0(r=Zt()){return/iemobile/i.test(r)}function _0(r=Zt()){return/android/i.test(r)}function w0(r=Zt()){return/blackberry/i.test(r)}function x0(r=Zt()){return/webos/i.test(r)}function Pf(r=Zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function _I(r=Zt()){var e;return Pf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wI(){return Ow()&&document.documentMode===10}function E0(r=Zt()){return Pf(r)||_0(r)||x0(r)||w0(r)||/windows phone/i.test(r)||v0(r)}function T0(r,e=[]){let t;switch(r){case"Browser":t=ey(Zt());break;case"Worker":t=`${ey(Zt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ri}/${i}`}class xI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const y=e(l);h(y)}catch(y){f(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function EI(r,e={}){return Uo(r,"GET","/v2/passwordPolicy",Cf(r,e))}const TI=6;class II{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:TI,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,f;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(i=y.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(l=y.containsUppercaseLetter)!==null&&l!==void 0?l:!0),y.isValid&&(y.isValid=(h=y.containsNumericCharacter)!==null&&h!==void 0?h:!0),y.isValid&&(y.isValid=(f=y.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),y}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class kI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ty(this),this.idTokenSubscription=new ty(this),this.beforeStateQueue=new xI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await d0(this,{idToken:e}),i=await Wr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o?._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===f)&&y?.user&&(o=y.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hr(this.app))return Promise.reject(wi(this));const t=e?Vt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hr(this.app)?Promise.reject(wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hr(this.app)?Promise.reject(wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EI(this),t=new II(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await vI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gr(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&nI(`Error while retrieving App Check token: ${t.error}`),t?.token}}function xc(r){return Vt(r)}class ty{constructor(e){this.auth=e,this.observer=null,this.addObserver=$w(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SI(r){bf=r}function AI(r){return bf.loadJS(r)}function RI(){return bf.gapiScript}function CI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function NI(r,e){const t=uc(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Hu(l,e??{}))return o;kr(o,"already-initialized")}return t.initialize({options:e})}function PI(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Gr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function bI(r,e,t){const i=xc(r);ke(i._canInitEmulator,i,"emulator-config-failed"),ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=I0(e),{host:h,port:f}=DI(e),y=f===null?"":`:${f}`;i.config.emulator={url:`${l}//${h}${y}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),jI()}function I0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function DI(r){const e=I0(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:ny(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:ny(h)}}}function ny(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function jI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class k0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,t){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}}async function Io(r,e){return uI(r,"POST","/v1/accounts:signInWithIdp",Cf(r,e))}const OI="http://localhost";class Si extends k0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=kf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Si(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Io(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Io(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Io(e,t)}buildRequest(){const e={requestUri:OI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ya(t)}return e}}class Df{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ol extends Df{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class As extends ol{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";class Br extends ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Si._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Br.credential(t,i)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";class Rs extends ol{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";class Cs extends ol{constructor(){super("twitter.com")}static credential(e,t){return Si._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Cs.credential(t,i)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Wr._fromIdTokenResponse(e,i,o),h=ry(i);return new jo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ry(i);return new jo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ry(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class rc extends Sr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,rc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new rc(e,t,i,o)}}function S0(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rc._fromErrorAndOperation(r,l,e,i):l})}async function MI(r,e,t=!1){const i=await qa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return jo._forOperation(r,"link",i)}async function VI(r,e,t=!1){const{auth:i}=r;if(Hr(i.app))return Promise.reject(wi(i));const o="reauthenticate";try{const l=await qa(r,S0(i,o,e,r),t);ke(l.idToken,i,"internal-error");const h=Nf(l.idToken);ke(h,i,"internal-error");const{sub:f}=h;return ke(r.uid===f,i,"user-mismatch"),jo._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&kr(i,"user-mismatch"),l}}async function LI(r,e,t=!1){if(Hr(r.app))return Promise.reject(wi(r));const i="signIn",o=await S0(r,i,e),l=await jo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function UI(r,e,t,i){return Vt(r).onIdTokenChanged(e,t,i)}function FI(r,e,t){return Vt(r).beforeAuthStateChanged(e,t)}function zI(r,e,t,i){return Vt(r).onAuthStateChanged(e,t,i)}function Vd(r){return Vt(r).signOut()}const sc="__sak";class A0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sc,"1"),this.storage.removeItem(sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const BI=1e3,$I=10;class R0 extends A0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,y)=>{this.notifyListeners(h,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);wI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,$I):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},BI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}R0.type="LOCAL";const HI=R0;class C0 extends A0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C0.type="SESSION";const N0=C0;function qI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Ec{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Ec(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async _=>_(t.origin,l)),y=await qI(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ec.receivers=[];function jf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class WI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,y)=>{const _=jf("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(A){const b=A;if(b.data.eventId===_)switch(b.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Er(){return window}function GI(r){Er().location.href=r}function P0(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function KI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QI(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function XI(){return P0()?self:null}const b0="firebaseLocalStorageDb",YI=1,ic="firebaseLocalStorage",D0="fbase_key";class al{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tc(r,e){return r.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function JI(){const r=indexedDB.deleteDatabase(b0);return new al(r).toPromise()}function Ld(){const r=indexedDB.open(b0,YI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(ic,{keyPath:D0})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(ic)?e(i):(i.close(),await JI(),e(await Ld()))})})}async function sy(r,e,t){const i=Tc(r,!0).put({[D0]:e,value:t});return new al(i).toPromise()}async function ZI(r,e){const t=Tc(r,!1).get(e),i=await new al(t).toPromise();return i===void 0?null:i.value}function iy(r,e){const t=Tc(r,!0).delete(e);return new al(t).toPromise()}const ek=800,tk=3;class j0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ld(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>tk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ec._getInstance(XI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await KI(),!this.activeServiceWorker)return;this.sender=new WI(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ld();return await sy(e,sc,"1"),await iy(e,sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>sy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>ZI(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Tc(o,!1).getAll();return new al(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}j0.type="LOCAL";const nk=j0;new il(3e4,6e4);function O0(r,e){return e?Gr(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Of extends k0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Io(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rk(r){return LI(r.auth,new Of(r),r.bypassAuthState)}function sk(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),VI(t,new Of(r),r.bypassAuthState)}async function ik(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),MI(t,new Of(r),r.bypassAuthState)}class M0{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rk;case"linkViaPopup":case"linkViaRedirect":return ik;case"reauthViaPopup":case"reauthViaRedirect":return sk;default:kr(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ok=new il(2e3,1e4);async function ak(r,e,t){if(Hr(r.app))return Promise.reject(nr(r,"operation-not-supported-in-this-environment"));const i=xc(r);rI(r,e,Df);const o=O0(i,t);return new vi(i,"signInViaPopup",e,o).executeNotNull()}class vi extends M0{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,vi.currentPopupAction&&vi.currentPopupAction.cancel(),vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Jr(this.filter.length===1,"Popup operations only handle one event");const e=jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ok.get())};e()}}vi.currentPopupAction=null;const lk="pendingRedirect",Fu=new Map;class uk extends M0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const i=await ck(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ck(r,e){const t=fk(e),i=dk(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function hk(r,e){Fu.set(r._key(),e)}function dk(r){return Gr(r._redirectPersistence)}function fk(r){return Uu(lk,r.config.apiKey,r.name)}async function pk(r,e,t=!1){if(Hr(r.app))return Promise.reject(wi(r));const i=xc(r),o=O0(i,e),h=await new uk(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const mk=600*1e3;class gk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!V0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mk&&this.cachedEventUids.clear(),this.cachedEventUids.has(oy(e))}saveEventToCache(e){this.cachedEventUids.add(oy(e)),this.lastProcessedEventTime=Date.now()}}function oy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function V0({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function yk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V0(r);default:return!1}}async function vk(r,e={}){return Uo(r,"GET","/v1/projects",e)}const _k=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wk=/^https?/;async function xk(r){if(r.config.emulator)return;const{authorizedDomains:e}=await vk(r);for(const t of e)try{if(Ek(t))return}catch{}kr(r,"unauthorized-domain")}function Ek(r){const e=Od(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!wk.test(t))return!1;if(_k.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const Tk=new il(3e4,6e4);function ay(){const r=Er().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Ik(r){return new Promise((e,t)=>{var i,o,l;function h(){ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ay(),t(nr(r,"network-request-failed"))},timeout:Tk.get()})}if(!((o=(i=Er().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Er().gapi)===null||l===void 0)&&l.load)h();else{const f=CI("iframefcb");return Er()[f]=()=>{gapi.load?h():t(nr(r,"network-request-failed"))},AI(`${RI()}?onload=${f}`).catch(y=>t(y))}}).catch(e=>{throw zu=null,e})}let zu=null;function kk(r){return zu=zu||Ik(r),zu}const Sk=new il(5e3,15e3),Ak="__/auth/iframe",Rk="emulator/auth/iframe",Ck={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pk(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Rf(e,Rk):`https://${r.config.authDomain}/${Ak}`,i={apiKey:e.apiKey,appName:r.name,v:Ri},o=Nk.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Ya(i).slice(1)}`}async function bk(r){const e=await kk(r),t=Er().gapi;return ke(t,r,"internal-error"),e.open({where:document.body,url:Pk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ck,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=nr(r,"network-request-failed"),f=Er().setTimeout(()=>{l(h)},Sk.get());function y(){Er().clearTimeout(f),o(i)}i.ping(y).then(y,()=>{l(h)})}))}const Dk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jk=500,Ok=600,Mk="_blank",Vk="http://localhost";class ly{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lk(r,e,t,i=jk,o=Ok){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const y=Object.assign(Object.assign({},Dk),{width:i.toString(),height:o.toString(),top:l,left:h}),_=Zt().toLowerCase();t&&(f=y0(_)?Mk:t),m0(_)&&(e=e||Vk,y.scrollbars="yes");const E=Object.entries(y).reduce((b,[M,P])=>`${b}${M}=${P},`,"");if(_I(_)&&f!=="_self")return Uk(e||"",f),new ly(null);const A=window.open(e||"",f,E);ke(A,r,"popup-blocked");try{A.focus()}catch{}return new ly(A)}function Uk(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const Fk="__/auth/handler",zk="emulator/auth/handler",Bk=encodeURIComponent("fac");async function uy(r,e,t,i,o,l){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Ri,eventId:o};if(e instanceof Df){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",Bw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,A]of Object.entries({}))h[E]=A}if(e instanceof ol){const E=e.getScopes().filter(A=>A!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const y=await r._getAppCheckToken(),_=y?`#${Bk}=${encodeURIComponent(y)}`:"";return`${$k(r)}?${Ya(f).slice(1)}${_}`}function $k({config:r}){return r.emulator?Rf(r,zk):`https://${r.authDomain}/${Fk}`}const hd="webStorageSupport";class Hk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N0,this._completeRedirectFn=pk,this._overrideRedirectResult=hk}async _openPopup(e,t,i,o){var l;Jr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await uy(e,t,i,Od(),o);return Lk(e,h,jf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await uy(e,t,i,Od(),o);return GI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Jr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await bk(e),i=new gk(e);return t.register("authEvent",o=>(ke(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hd,{type:hd},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[hd];h!==void 0&&t(!!h),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return E0()||g0()||Pf()}}const qk=Hk;var cy="@firebase/auth",hy="1.7.9";class Wk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gk(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kk(r){Ei(new Ms("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;ke(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T0(r)},_=new kI(i,o,l,y);return PI(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ei(new Ms("auth-internal",e=>{const t=xc(e.getProvider("auth").getImmediate());return(i=>new Wk(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(cy,hy,Gk(r)),vr(cy,hy,"esm2017")}const Qk=300,Xk=Ny("authIdTokenMaxAge")||Qk;let dy=null;const Yk=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Xk)return;const o=t?.token;dy!==o&&(dy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Jk(r=Wd()){const e=uc(r,"auth");if(e.isInitialized())return e.getImmediate();const t=NI(r,{popupRedirectResolver:qk,persistence:[nk,HI,N0]}),i=Ny("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=Yk(l.toString());FI(t,h,()=>h(t.currentUser)),UI(t,f=>h(f))}}const o=Ay("auth");return o&&bI(t,`http://${o}`),t}function Zk(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}SI({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=nr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Zk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kk("Browser");const L0="firebasestorage.googleapis.com",U0="storageBucket",eS=120*1e3,tS=600*1e3;class pt extends Sr{constructor(e,t,i=0){super(dd(e),`Firebase Storage: ${t} (${dd(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ft;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ft||(ft={}));function dd(r){return"storage/"+r}function Mf(){const r="An unknown error occurred, please check the error payload for server response.";return new pt(ft.UNKNOWN,r)}function nS(r){return new pt(ft.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function rS(r){return new pt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sS(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(ft.UNAUTHENTICATED,r)}function iS(){return new pt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function oS(r){return new pt(ft.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function aS(){return new pt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lS(){return new pt(ft.CANCELED,"User canceled the upload/download.")}function uS(r){return new pt(ft.INVALID_URL,"Invalid URL '"+r+"'.")}function cS(r){return new pt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function hS(){return new pt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+U0+"' property when initializing the app?")}function dS(){return new pt(ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fS(){return new pt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function pS(r){return new pt(ft.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ud(r){return new pt(ft.INVALID_ARGUMENT,r)}function F0(){return new pt(ft.APP_DELETED,"The Firebase app was deleted.")}function mS(r){return new pt(ft.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ma(r,e){return new pt(ft.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Sa(r){throw new pt(ft.INTERNAL_ERROR,"Internal error: "+r)}class xn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=xn.makeFromUrl(e,t)}catch{return new xn(e,"")}if(i.path==="")return i;throw cS(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function l(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const h="(/(.*))?$",f=new RegExp("^gs://"+o+h,"i"),y={bucket:1,path:3};function _(se){se.path_=decodeURIComponent(se.path)}const E="v[A-Za-z0-9_]+",A=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",M=new RegExp(`^https?://${A}/${E}/b/${o}/o${b}`,"i"),P={bucket:1,path:3},H=t===L0?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",q=new RegExp(`^https?://${H}/${o}/${F}`,"i"),ne=[{regex:f,indices:y,postModify:l},{regex:M,indices:P,postModify:_},{regex:q,indices:{bucket:1,path:2},postModify:_}];for(let se=0;se<ne.length;se++){const Ee=ne[se],ie=Ee.regex.exec(e);if(ie){const R=ie[Ee.indices.bucket];let T=ie[Ee.indices.path];T||(T=""),i=new xn(R,T),Ee.postModify(i);break}}if(i==null)throw uS(e);return i}}class gS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function yS(r,e,t){let i=1,o=null,l=null,h=!1,f=0;function y(){return f===2}let _=!1;function E(...F){_||(_=!0,e.apply(null,F))}function A(F){o=setTimeout(()=>{o=null,r(M,y())},F)}function b(){l&&clearTimeout(l)}function M(F,...q){if(_){b();return}if(F){b(),E.call(null,F,...q);return}if(y()||h){b(),E.call(null,F,...q);return}i<64&&(i*=2);let ne;f===1?(f=2,ne=0):ne=(i+Math.random())*1e3,A(ne)}let P=!1;function H(F){P||(P=!0,b(),!_&&(o!==null?(F||(f=2),clearTimeout(o),A(0)):F||(f=1)))}return A(0),l=setTimeout(()=>{h=!0,H(!0)},t),H}function vS(r){r(!1)}function _S(r){return r!==void 0}function wS(r){return typeof r=="object"&&!Array.isArray(r)}function Vf(r){return typeof r=="string"||r instanceof String}function fy(r){return Lf()&&r instanceof Blob}function Lf(){return typeof Blob<"u"}function py(r,e,t,i){if(i<e)throw Ud(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw Ud(`Invalid value for '${r}'. Expected ${t} or less.`)}function Uf(r,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${r}`}function z0(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const o=e(i)+"="+e(r[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var xi;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(xi||(xi={}));function xS(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||o||l}class ES{constructor(e,t,i,o,l,h,f,y,_,E,A,b=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=f,this.errorCallback_=y,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=A,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,P)=>{this.resolve_=M,this.reject_=P,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Nu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=f=>{const y=f.loaded,_=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,_)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const f=l.getErrorCode()===xi.NO_ERROR,y=l.getStatus();if(!f||xS(y,this.additionalRetryCodes_)&&this.retry){const E=l.getErrorCode()===xi.ABORT;i(!1,new Nu(!1,null,E));return}const _=this.successCodes_.indexOf(y)!==-1;i(!0,new Nu(_,l))})},t=(i,o)=>{const l=this.resolve_,h=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());_S(y)?l(y):l()}catch(y){h(y)}else if(f!==null){const y=Mf();y.serverResponse=f.getErrorText(),this.errorCallback_?h(this.errorCallback_(f,y)):h(y)}else if(o.canceled){const y=this.appDelete_?F0():lS();h(y)}else{const y=aS();h(y)}};this.canceled_?t(!1,new Nu(!1,null,!0)):this.backoffId_=yS(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vS(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nu{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function TS(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function IS(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kS(r,e){e&&(r["X-Firebase-GMPID"]=e)}function SS(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function AS(r,e,t,i,o,l,h=!0){const f=z0(r.urlParams),y=r.url+f,_=Object.assign({},r.headers);return kS(_,e),TS(_,t),IS(_,l),SS(_,i),new ES(y,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h)}function RS(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function CS(...r){const e=RS();if(e!==void 0){const t=new e;for(let i=0;i<r.length;i++)t.append(r[i]);return t.getBlob()}else{if(Lf())return new Blob(r);throw new pt(ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function NS(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}function PS(r){if(typeof atob>"u")throw pS("base-64");return atob(r)}const yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fd{constructor(e,t){this.data=e,this.contentType=t||null}}function bS(r,e){switch(r){case yr.RAW:return new fd(B0(e));case yr.BASE64:case yr.BASE64URL:return new fd($0(r,e));case yr.DATA_URL:return new fd(jS(e),OS(e))}throw Mf()}function B0(r){const e=[];for(let t=0;t<r.length;t++){let i=r.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,h=r.charCodeAt(++t);i=65536|(l&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function DS(r){let e;try{e=decodeURIComponent(r)}catch{throw Ma(yr.DATA_URL,"Malformed data URL.")}return B0(e)}function $0(r,e){switch(r){case yr.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw Ma(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case yr.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw Ma(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=PS(e)}catch(o){throw o.message.includes("polyfill")?o:Ma(r,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class H0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ma(yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=MS(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function jS(r){const e=new H0(r);return e.base64?$0(yr.BASE64,e.rest):DS(e.rest)}function OS(r){return new H0(r).contentType}function MS(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}class Ns{constructor(e,t){let i=0,o="";fy(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(fy(this.data_)){const i=this.data_,o=NS(i,e,t);return o===null?null:new Ns(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ns(i,!0)}}static getBlob(...e){if(Lf()){const t=e.map(i=>i instanceof Ns?i.data_:i);return new Ns(CS.apply(null,t))}else{const t=e.map(h=>Vf(h)?bS(yr.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const o=new Uint8Array(i);let l=0;return t.forEach(h=>{for(let f=0;f<h.length;f++)o[l++]=h[f]}),new Ns(o,!0)}}uploadData(){return this.data_}}function q0(r){let e;try{e=JSON.parse(r)}catch{return null}return wS(e)?e:null}function VS(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function LS(r,e){const t=e.split("/").filter(i=>i.length>0).join("/");return r.length===0?t:r+"/"+t}function W0(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}function US(r,e){return e}class sn{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||US}}let Pu=null;function FS(r){return!Vf(r)||r.length<2?r:W0(r)}function G0(){if(Pu)return Pu;const r=[];r.push(new sn("bucket")),r.push(new sn("generation")),r.push(new sn("metageneration")),r.push(new sn("name","fullPath",!0));function e(l,h){return FS(h)}const t=new sn("name");t.xform=e,r.push(t);function i(l,h){return h!==void 0?Number(h):h}const o=new sn("size");return o.xform=i,r.push(o),r.push(new sn("timeCreated")),r.push(new sn("updated")),r.push(new sn("md5Hash",null,!0)),r.push(new sn("cacheControl",null,!0)),r.push(new sn("contentDisposition",null,!0)),r.push(new sn("contentEncoding",null,!0)),r.push(new sn("contentLanguage",null,!0)),r.push(new sn("contentType",null,!0)),r.push(new sn("metadata","customMetadata",!0)),Pu=r,Pu}function zS(r,e){function t(){const i=r.bucket,o=r.fullPath,l=new xn(i,o);return e._makeStorageReference(l)}Object.defineProperty(r,"ref",{get:t})}function BS(r,e,t){const i={};i.type="file";const o=t.length;for(let l=0;l<o;l++){const h=t[l];i[h.local]=h.xform(i,e[h.server])}return zS(i,r),i}function K0(r,e,t){const i=q0(e);return i===null?null:BS(r,i,t)}function $S(r,e,t,i){const o=q0(e);if(o===null||!Vf(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const h=encodeURIComponent;return l.split(",").map(_=>{const E=r.bucket,A=r.fullPath,b="/b/"+h(E)+"/o/"+h(A),M=Uf(b,t,i),P=z0({alt:"media",token:_});return M+P})[0]}function HS(r,e){const t={},i=e.length;for(let o=0;o<i;o++){const l=e[o];l.writable&&(t[l.server]=r[l.local])}return JSON.stringify(t)}class Q0{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function X0(r){if(!r)throw Mf()}function qS(r,e){function t(i,o){const l=K0(r,o,e);return X0(l!==null),l}return t}function WS(r,e){function t(i,o){const l=K0(r,o,e);return X0(l!==null),$S(l,o,r.host,r._protocol)}return t}function Y0(r){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=iS():o=sS():t.getStatus()===402?o=rS(r.bucket):t.getStatus()===403?o=oS(r.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function GS(r){const e=Y0(r);function t(i,o){let l=e(i,o);return i.getStatus()===404&&(l=nS(r.path)),l.serverResponse=o.serverResponse,l}return t}function KS(r,e,t){const i=e.fullServerUrl(),o=Uf(i,r.host,r._protocol),l="GET",h=r.maxOperationRetryTime,f=new Q0(o,l,WS(r,t),h);return f.errorHandler=GS(e),f}function QS(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function XS(r,e,t){const i=Object.assign({},t);return i.fullPath=r.path,i.size=e.size(),i.contentType||(i.contentType=QS(null,e)),i}function YS(r,e,t,i,o){const l=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function f(){let ne="";for(let se=0;se<2;se++)ne=ne+Math.random().toString().slice(2);return ne}const y=f();h["Content-Type"]="multipart/related; boundary="+y;const _=XS(e,i,o),E=HS(_,t),A="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+y+`\r
Content-Type: `+_.contentType+`\r
\r
`,b=`\r
--`+y+"--",M=Ns.getBlob(A,i,b);if(M===null)throw dS();const P={name:_.fullPath},H=Uf(l,r.host,r._protocol),F="POST",q=r.maxUploadRetryTime,W=new Q0(H,F,qS(r,t),q);return W.urlParams=P,W.headers=h,W.body=M.uploadData(),W.errorHandler=Y0(e),W}class JS{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o){if(this.sent_)throw Sa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Sa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Sa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Sa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Sa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ZS extends JS{initXhr(){this.xhr_.responseType="text"}}function J0(){return new ZS}class Ai{constructor(e,t){this._service=e,t instanceof xn?this._location=t:this._location=xn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ai(e,t)}get root(){const e=new xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W0(this._location.path)}get storage(){return this._service}get parent(){const e=VS(this._location.path);if(e===null)return null;const t=new xn(this._location.bucket,e);return new Ai(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw mS(e)}}function e2(r,e,t){r._throwIfRoot("uploadBytes");const i=YS(r.storage,r._location,G0(),new Ns(e,!0),t);return r.storage.makeRequestWithTokens(i,J0).then(o=>({metadata:o,ref:r}))}function t2(r){r._throwIfRoot("getDownloadURL");const e=KS(r.storage,r._location,G0());return r.storage.makeRequestWithTokens(e,J0).then(t=>{if(t===null)throw fS();return t})}function n2(r,e){const t=LS(r._location.path,e),i=new xn(r._location.bucket,t);return new Ai(r.storage,i)}function r2(r){return/^[A-Za-z]+:\/\//.test(r)}function s2(r,e){return new Ai(r,e)}function Z0(r,e){if(r instanceof Ff){const t=r;if(t._bucket==null)throw hS();const i=new Ai(t,t._bucket);return e!=null?Z0(i,e):i}else return e!==void 0?n2(r,e):r}function i2(r,e){if(e&&r2(e)){if(r instanceof Ff)return s2(r,e);throw Ud("To use ref(service, url), the first argument must be a Storage instance.")}else return Z0(r,e)}function my(r,e){const t=e?.[U0];return t==null?null:xn.makeFromBucketSpec(t,r)}function o2(r,e,t,i={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:o}=i;o&&(r._overrideAuthToken=typeof o=="string"?o:Py(o,r.app.options.projectId))}class Ff{constructor(e,t,i,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=L0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=eS,this._maxUploadRetryTime=tS,this._requests=new Set,o!=null?this._bucket=xn.makeFromBucketSpec(o,this._host):this._bucket=my(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xn.makeFromBucketSpec(this._url,e):this._bucket=my(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){py("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){py("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ai(this,e)}_makeRequest(e,t,i,o,l=!0){if(this._deleted)return new gS(F0());{const h=AS(e,this._appId,i,o,t,this._firebaseVersion,l);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const gy="@firebase/storage",yy="0.13.2";const e_="storage";function a2(r,e,t){return r=Vt(r),e2(r,e,t)}function l2(r){return r=Vt(r),t2(r)}function u2(r,e){return r=Vt(r),i2(r,e)}function c2(r=Wd(),e){r=Vt(r);const i=uc(r,e_).getImmediate({identifier:e}),o=Ry("storage");return o&&h2(i,...o),i}function h2(r,e,t,i={}){o2(r,e,t,i)}function d2(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Ff(t,i,o,e,Ri)}function f2(){Ei(new Ms(e_,d2,"PUBLIC").setMultipleInstances(!0)),vr(gy,yy,""),vr(gy,yy,"esm2017")}f2();const p2={apiKey:"AIzaSyBW5v_7kGitttrnCBQwYVPG9TiSPXdNaNc",authDomain:"guam-5eaff.firebaseapp.com",projectId:"guam-5eaff",storageBucket:"guam-5eaff.firebasestorage.app",messagingSenderId:"94280815489",appId:"1:94280815489:web:669d6fc05c097397bb8e80",measurementId:"G-0NNCC31G7E"};let bu,ut,$r,Fd;try{bu=jy(p2),ut=VT(bu),$r=Jk(bu),Fd=c2(bu)}catch(r){console.error("Firebase init error",r)}var m2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const g2=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ie=(r,e)=>{const t=me.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:h,className:f="",children:y,..._},E)=>me.createElement("svg",{ref:E,...m2,width:o,height:o,stroke:i,strokeWidth:h?Number(l)*24/Number(o):l,className:["lucide",`lucide-${g2(r)}`,f].join(" "),..._},[...e.map(([A,b])=>me.createElement(A,b)),...Array.isArray(y)?y:[y]]));return t.displayName=`${r}`,t};const y2=Ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const v2=Ie("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);const vy=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const t_=Ie("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);const n_=Ie("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const _y=Ie("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);const _2=Ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const oc=Ie("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);const r_=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const w2=Ie("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);const x2=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const E2=Ie("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);const T2=Ie("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const I2=Ie("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);const k2=Ie("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);const S2=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const A2=Ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const R2=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const C2=Ie("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const wy=Ie("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);const N2=Ie("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);const P2=Ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const b2=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const D2=Ie("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const ac=Ie("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const j2=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const O2=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const zd=Ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const M2=Ie("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);const s_=Ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const V2=Ie("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const Wa=Ie("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);const i_=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const xy=Ie("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);const o_=Ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const L2=Ie("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const U2=Ie("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Ga=Ie("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const Ka=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);const F2=Ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Bd=Ie("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);const ll=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const z2=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const B2=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Va=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const $2=Ie("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);const Qa=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),H2=({currentTab:r,onTabChange:e,title:t,subtitle:i,coverImage:o,onOpenMembers:l})=>{const h=f=>`w-[42px] h-[42px] rounded-full flex items-center justify-center transition-all duration-300 ${r===f?"bg-guam-teal text-white scale-110 shadow-lg shadow-guam-teal/40":"text-slate-400"}`;return g.jsxs("div",{className:"relative h-[260px] bg-white rounded-b-[40px] shadow-lg overflow-hidden z-10",children:[g.jsxs("div",{className:"w-full h-full relative",children:[g.jsx("img",{src:o,alt:t,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-guam-teal/20 to-transparent"}),g.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 flex justify-between items-start",children:[g.jsxs("div",{className:"text-white drop-shadow-md mt-6",children:[g.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t}),g.jsx("p",{className:"text-sm font-medium opacity-90 tracking-widest uppercase",children:i})]}),g.jsx("button",{onClick:l,className:"bg-white/20 backdrop-blur-md text-white w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors mt-6 border border-white/30",children:g.jsx(Va,{size:20})})]})]}),g.jsxs("div",{className:"absolute bottom-5 right-5 z-30 flex gap-2.5 bg-white/90 backdrop-blur-md p-2 rounded-full shadow-sm",children:[g.jsx("button",{onClick:()=>e("itinerary"),className:h("itinerary"),children:g.jsx(oc,{size:20})}),g.jsx("button",{onClick:()=>e("info"),className:h("info"),children:g.jsx(b2,{size:20})}),g.jsx("button",{onClick:()=>e("shopping"),className:h("shopping"),children:g.jsx(Ga,{size:20})}),g.jsx("button",{onClick:()=>e("planning"),className:h("planning"),children:g.jsx(w2,{size:20})}),g.jsx("button",{onClick:()=>e("expenses"),className:h("expenses"),children:g.jsx(R2,{size:20})})]})]})},q2=32.5,ko={title:"Guam Vacation",subtitle:"Feb 07 - Feb 11, 2026",coverImage:"https://images.unsplash.com/photo-1590523741831-ab7e8b8f9c7f?q=80&w=2069&auto=format&fit=crop"},W2=[{date:"2/07",weekday:"SAT",hasCar:!1},{date:"2/08",weekday:"SUN",hasCar:!0},{date:"2/09",weekday:"MON",hasCar:!0},{date:"2/10",weekday:"TUE",hasCar:!0},{date:"2/11",weekday:"WED",hasCar:!1}],G2=[{condition:"sunny",temp:"29"},{condition:"cloudy",temp:"28"},{condition:"rain",temp:"27"},{condition:"sunny",temp:"30"},{condition:"sunny",temp:"29"}],Bu=[],gr={itinerary:[[{id:101,name:"",category:"transport",startTime:"16:50",address:"Antonio B. Won Pat International Airport",note:"",transportType:"flight",travelTime:""},{id:102,name:"Bayview Hotel Check-in",category:"accommodation",startTime:"17:30",address:"Bayview Hotel Guam",note:"",transportType:"transport",travelTime:"15m"},{id:103,name:" ()",category:"sightseeing",startTime:"18:00",address:"Plaza de Espaa",note:"",hours:"Open 24H",price:"Free",transportType:"transport",travelTime:"10m"},{id:104,name:"",category:"sightseeing",startTime:"18:40",address:"Paseo de Susana Park",note:"",transportType:"walk",travelTime:"5m"},{id:105,name:": Agana Shopping Center",category:"food",startTime:"19:30",address:"Agana Shopping Center",note:" BBQ  Chamorro ",hours:"10:00-20:00",price:"~$30",transportType:"transport",travelTime:"5m"}],[{id:201,name:" & ",category:"transport",startTime:"09:00",address:"Nippon Rent-A-Car",note:"",transportType:"car",travelTime:""},{id:202,name:"",category:"sightseeing",startTime:"10:00",address:"Fish Eye Marine Park",note:"",hours:"08:00-17:00",price:"$16",transportType:"car",travelTime:"20m"},{id:203,name:"Umatac ",category:"sightseeing",startTime:"11:30",address:"Umatac Bay Park",note:"",price:"Free",transportType:"car",travelTime:"30m"},{id:204,name:"Inarajan ",category:"sightseeing",startTime:"13:00",address:"Inarajan Natural Pool",note:"",price:"Free",transportType:"car",travelTime:"20m"},{id:206,name:" Two Lovers Point",category:"sightseeing",startTime:"15:30",address:"Two Lovers Point",note:"",hours:"07:00-19:00",price:"$3",transportType:"car",travelTime:"45m"},{id:207,name:"Crowne Plaza Check-in",category:"accommodation",startTime:"17:00",address:"Crowne Plaza Resort Guam",note:" + ",transportType:"car",travelTime:"15m"}],[{id:301,name:": Crowne Plaza",category:"accommodation",startTime:"10:30",address:"Crowne Plaza Resort Guam",note:"",transportType:"transport",travelTime:""},{id:302,name:"Hoshino Resorts Check-in",category:"accommodation",startTime:"11:00",address:"Hoshino Resorts RISONARE Guam",note:"Check-in ",transportType:"transport",travelTime:"10m"},{id:303,name:"",category:"ticket",startTime:"11:30",address:"Hoshino Resorts RISONARE Guam",note:"SUP",price:"Free for guests",transportType:"walk",travelTime:"0m"},{id:306,name:": Hoshino / Tumon",category:"food",startTime:"18:30",address:"Hoshino Resorts RISONARE Guam",note:" + ",transportType:"walk",travelTime:"0m"}],[{id:402,name:"Guam Plaza Check-in",category:"accommodation",startTime:"10:30",address:"Guam Plaza Resort",note:"",transportType:"transport",travelTime:"15m"},{id:404,name:"Plaza Spa ",category:"ticket",startTime:"12:30",address:"Guam Plaza Resort",note:"",price:"~$80",transportType:"walk",travelTime:"5m"},{id:405,name:"DFS / Micronesia Mall",category:"shopping",startTime:"14:30",address:"T Galleria by DFS",note:"",hours:"10:00-20:00",transportType:"transport",travelTime:"10m"},{id:406,name:": Hard Rock Cafe",category:"food",startTime:"19:00",address:"Hard Rock Cafe Guam",note:"",hours:"11:00-22:00",price:"~$40",transportType:"walk",travelTime:"5m"}],[{id:501,name:" & ",category:"transport",startTime:"05:00",address:"Guam Plaza Resort",note:"",transportType:"transport",travelTime:"15m"},{id:503,name:"",category:"transport",startTime:"07:30",address:"Guam Airport",note:"",transportType:"flight",travelTime:"4h30m"},{id:504,name:"",category:"transport",startTime:"10:00",address:"Taoyuan Airport",note:"",transportType:"flight",travelTime:""}]],shopping:[{id:1,name:"Banana Boat  (SPF110)",note:"ABC Store "},{id:2,name:"Godiva ",note:"Macy's "},{id:3,name:"Guam  (6)",note:""}],expenses:[{id:1,name:" (TPE-GUM)",amount:650,category:"transport",date:"01/15",payment:"Card",payerId:"1",splits:[{memberId:"1",amount:650}]},{id:2,name:"Bayview Hotel ",amount:150,category:"accommodation",date:"01/20",payment:"Card",payerId:"1",splits:[{memberId:"1",amount:150}]}],planning:[{id:1,title:" (>6)",category:"documents",completed:!0,assignedTo:"All"},{id:2,title:"",category:"documents",completed:!1,assignedTo:"All"},{id:3,title:"/",category:"documents",completed:!1,assignedTo:"All"},{id:4,title:"/",category:"luggage",completed:!1,assignedTo:"All"},{id:5,title:"/Gopro",category:"luggage",completed:!1,assignedTo:"All"},{id:6,title:"",category:"todo",completed:!0,assignedTo:"All"}],flights:[{id:"outbound",airline:"China Airlines",flightNumber:"CI 026",departureCode:"TPE",departureCity:"Taipei",departureTime:"11:00",arrivalCode:"GUM",arrivalCity:"Guam",arrivalTime:"16:50",date:"2026/02/07",duration:"3h 50m",baggage:"23kg",aircraft:"A321neo",price:"NT$18,500",purchaseDate:"2025/11/14"},{id:"inbound",airline:"China Airlines",flightNumber:"CI 025",departureCode:"GUM",departureCity:"Guam",departureTime:"07:30",arrivalCode:"TPE",arrivalCity:"Taipei",arrivalTime:"10:00",date:"2026/02/11",duration:"4h 30m",baggage:"23kg",aircraft:"A321neo",price:"Same Ticket",purchaseDate:"2025/11/14"}]},K2=({members:r,onLogin:e})=>{const[t,i]=me.useState(""),[o,l]=me.useState(!1),h=async()=>{if(!$r){i("Firebase Auth  firebaseConfig.ts");return}l(!0),i("");const f=new Br;try{const E=((await ak($r,f)).user.email||"").toLowerCase();console.log("Google Login Success:",E);let b=[...r,...Bu].find(M=>M.email?.toLowerCase()===E);if(!b&&ut){console.log("Not found locally, checking Firestore...");try{const M=await i0(jd(ut,"users"));M.empty||(b=M.docs.map(H=>({id:H.id,...H.data()})).find(H=>H.email?.toLowerCase()===E))}catch(M){console.error("Firestore whitelist check failed:",M)}}b?(console.log("Whitelist Match:",b.name),e(b)):(console.warn("Whitelist Fail:",E),await Vd($r),i(` Email (${E}) `))}catch(y){console.error("Login Error:",y),i(": "+y.message)}finally{l(!1)}};return g.jsxs("div",{className:"min-h-screen bg-guam-sand flex flex-col items-center justify-center relative overflow-hidden",children:[g.jsxs("div",{className:"absolute inset-0 z-0",children:[g.jsx("img",{src:ko.coverImage,alt:"background",className:"w-full h-full object-cover opacity-80"}),g.jsx("div",{className:"absolute inset-0 bg-guam-navy/40 backdrop-blur-sm"})]}),g.jsxs("div",{className:"relative z-10 w-full max-w-md p-8 animate-fade-in flex flex-col items-center",children:[g.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 p-8 rounded-[3rem] shadow-2xl w-full text-center",children:[g.jsx("h1",{className:"text-4xl font-bold text-white mb-2 drop-shadow-md tracking-tight",children:ko.title}),g.jsx("p",{className:"text-white/80 font-medium tracking-widest uppercase mb-8",children:ko.subtitle}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-white/10 rounded-2xl p-4 text-white/80 text-sm leading-relaxed border border-white/5 mb-4",children:[g.jsxs("p",{className:"flex items-center justify-center gap-2 mb-2 font-bold text-white",children:[g.jsx(U2,{size:18,className:"text-guam-teal"}),"Private Access"]})," Google "]}),g.jsx("button",{onClick:h,disabled:o,className:"w-full py-4 bg-white text-slate-700 rounded-2xl font-bold text-lg shadow-lg hover:bg-slate-50 hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-70 disabled:cursor-not-allowed group",children:o?g.jsx(ac,{className:"animate-spin text-guam-navy"}):g.jsxs(g.Fragment,{children:[g.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"G",className:"w-5 h-5"}),g.jsx("span",{children:"Google "})]})}),t&&g.jsxs("div",{className:"flex items-start gap-2 text-left bg-red-500/90 backdrop-blur text-white p-4 rounded-2xl border border-red-400/50 shadow-lg mt-4",children:[g.jsx(y2,{size:20,className:"shrink-0 mt-0.5"}),g.jsx("p",{className:"text-sm font-medium leading-relaxed",children:t})]})]})]}),g.jsx("p",{className:"text-white/40 text-xs mt-8 font-medium",children:"Protected by Google Firebase"})]})]})},Q2=({dates:r,weather:e,items:t,selectedDateIndex:i,onDateSelect:o,onEdit:l})=>{const[h,f]=me.useState([]),y=P=>{h.includes(P)?f(h.filter(H=>H!==P)):f([...h,P])},_=P=>{switch(P){case"rain":return g.jsx(E2,{className:"text-guam-ocean"});case"cloudy":return g.jsx(T2,{className:"text-slate-400"});default:return g.jsx(F2,{className:"text-guam-sun"})}},E=P=>{switch(P){case"car":return g.jsx(oc,{size:14});case"flight":return g.jsx(Wa,{size:14});case"walk":return g.jsx(wy,{size:14});default:return g.jsx(_y,{size:14})}},A=P=>{switch(P){case"food":return g.jsx($2,{size:20});case"shopping":return g.jsx(Ga,{size:20});case"accommodation":return g.jsx(t_,{size:20});case"ticket":return g.jsx(Bd,{size:20});case"transport":return g.jsx(_y,{size:20});default:return g.jsx(_2,{size:20})}},b=P=>{switch(P){case"sightseeing":return"bg-guam-teal";case"food":return"bg-guam-coral";case"shopping":return"bg-guam-navy";case"accommodation":return"bg-indigo-500";case"transport":return"bg-slate-500";case"ticket":return"bg-guam-sun";default:return"bg-guam-teal"}},M=P=>{window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(P+" Guam")}`,"_blank")};return g.jsxs("div",{className:"animate-fade-in pb-24",children:[g.jsx("div",{className:"flex overflow-x-auto hide-scrollbar space-x-3 pb-4 mb-2 px-1 sticky top-0 z-20 bg-guam-sand/95 backdrop-blur-sm pt-4 -mx-4 px-4 border-b border-guam-teal/10",children:r.map((P,H)=>g.jsxs("div",{onClick:()=>o(H),className:`flex-shrink-0 w-[58px] h-[70px] rounded-2xl flex flex-col items-center justify-center cursor-pointer transition-all duration-300 border-2 shadow-sm ${i===H?"bg-guam-teal text-white border-guam-teal shadow-lg scale-105":"bg-white text-slate-400 border-white hover:bg-white/60"}`,children:[g.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:P.weekday}),g.jsx("span",{className:"text-sm font-bold",children:P.date})]},H))}),g.jsxs("div",{className:"mb-6 bg-gradient-to-r from-guam-teal/10 to-transparent border border-guam-teal/20 rounded-3xl p-4 flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center text-guam-teal space-x-3",children:[g.jsx("div",{className:"text-4xl drop-shadow-sm",children:_(e[i].condition)}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-baseline",children:[g.jsx("span",{className:"text-2xl font-bold",children:e[i].temp}),g.jsx("span",{className:"text-xs ml-1",children:"C"})]}),g.jsx("span",{className:"text-xs font-medium block text-slate-500 capitalize",children:e[i].condition})]})]}),g.jsx("div",{className:"text-right text-xs",children:r[i].hasCar?g.jsxs("span",{className:"inline-flex items-center bg-guam-navy/10 text-guam-navy px-3 py-1.5 rounded-full font-bold",children:[g.jsx(oc,{size:12,className:"mr-1.5"})," "]}):g.jsxs("span",{className:"inline-flex items-center bg-slate-100 text-slate-500 px-3 py-1.5 rounded-full",children:[g.jsx(wy,{size:12,className:"mr-1.5"})," /"]})})]}),g.jsxs("div",{className:"space-y-6",children:[t.map((P,H)=>g.jsxs("div",{className:"relative group",children:[H>0&&g.jsxs("div",{className:"pl-8 pb-3 flex items-center text-xs text-slate-400 relative",children:[g.jsx("div",{className:"h-full w-0.5 bg-guam-teal/20 absolute left-[27px] -top-6 bottom-0"}),g.jsxs("div",{className:"ml-2 flex items-center bg-white/50 px-2 py-0.5 rounded-full backdrop-blur-sm",children:[g.jsx("span",{className:"mr-1.5 text-guam-teal",children:E(P.transportType)}),g.jsx("span",{className:"font-medium",children:P.travelTime||""})]})]}),g.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-[2rem] p-5 shadow-[0_8px_20px_-6px_rgba(13,148,136,0.1)] border border-white/60 relative overflow-hidden flex items-start",children:[g.jsxs("div",{className:"mr-4 flex flex-col items-center min-w-[50px]",children:[g.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-white shadow-md mb-1.5 ${b(P.category)}`,children:A(P.category)}),P.startTime&&g.jsx("span",{className:"text-xs font-bold text-guam-navy tracking-tight",children:P.startTime})]}),g.jsxs("div",{className:"flex-1 min-w-0 pr-8",children:[g.jsx("h3",{className:"text-lg font-bold text-slate-800 leading-tight mb-1 truncate",children:P.name}),g.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mb-2",children:[P.hours&&g.jsxs("p",{className:"flex items-center",children:[g.jsx(x2,{size:12,className:"mr-1.5 text-guam-teal"})," ",P.hours]}),P.price&&g.jsxs("p",{className:"flex items-center",children:[g.jsx(Bd,{size:12,className:"mr-1.5 text-guam-teal"})," ",P.price]}),P.address&&g.jsxs("p",{className:"flex items-center truncate",children:[g.jsx(zd,{size:12,className:"mr-1.5 text-guam-teal"})," ",P.address]})]}),P.note&&g.jsxs("div",{className:"bg-guam-sand/60 p-2.5 rounded-xl border border-guam-teal/10",children:[g.jsx("div",{className:`text-xs text-slate-600 leading-relaxed overflow-hidden transition-all ${h.includes(P.id)?"max-h-96":"max-h-10 line-clamp-2"}`,children:P.note}),P.note.length>40&&g.jsx("button",{onClick:F=>{F.stopPropagation(),y(P.id)},className:"text-[10px] text-guam-teal font-bold mt-1 flex items-center",children:h.includes(P.id)?"":"..."})]})]}),g.jsxs("div",{className:"absolute top-4 right-3 flex flex-col gap-2",children:[g.jsx("button",{onClick:()=>M(P.address||P.name),className:"w-8 h-8 bg-slate-50 text-slate-400 rounded-full flex items-center justify-center hover:bg-guam-teal hover:text-white transition-all shadow-sm",children:g.jsx(zd,{size:14})}),g.jsx("button",{onClick:()=>l(P),className:"w-8 h-8 bg-slate-50 text-slate-400 rounded-full flex items-center justify-center hover:bg-guam-navy hover:text-white transition-all shadow-sm",children:g.jsx(Ka,{size:14})})]})]})]},P.id)),t.length===0&&g.jsx("div",{className:"text-center py-20 opacity-40",children:g.jsx("p",{className:"text-sm font-medium",children:""})})]})]})},X2=({flights:r,onFlightClick:e,exchangeRate:t,onRateUpdate:i})=>{const[o,l]=me.useState("100"),[h,f]=me.useState(!1),[y,_]=me.useState(t.toString());me.useEffect(()=>{h||_(t.toString())},[t,h]);const E=Math.round((parseFloat(o)||0)*t),A=M=>{window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(M+" Guam")}`,"_blank")},b=()=>{const M=parseFloat(y);!isNaN(M)&&M>0&&(i?.(M),f(!1))};return g.jsxs("div",{className:"space-y-6 animate-fade-in pb-24",children:[g.jsxs("div",{className:"bg-gradient-to-br from-guam-navy to-guam-teal rounded-[2rem] p-6 text-white shadow-xl relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl"}),g.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center relative z-10",children:[g.jsx(k2,{className:"mr-2",size:20}),"  (USD)"]}),g.jsxs("div",{className:"flex items-center justify-between gap-4 relative z-10",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-[10px] text-cyan-200 block mb-1 font-bold",children:"USD ()"}),g.jsx("input",{type:"number",value:o,onChange:M=>l(M.target.value),className:"w-full bg-white/20 border border-white/30 rounded-xl px-3 py-2 text-white placeholder-white/50 focus:outline-none text-xl font-bold"})]}),g.jsx(v2,{className:"text-white/50 mt-4",size:20}),g.jsxs("div",{className:"flex-1",children:[g.jsx("label",{className:"text-[10px] text-cyan-200 block mb-1 font-bold",children:"TWD ()"}),g.jsx("div",{className:"w-full bg-white/10 rounded-xl px-3 py-2 text-white text-xl font-bold border border-transparent",children:E.toLocaleString()})]})]}),g.jsx("div",{className:"mt-3 relative z-10 flex justify-end items-center gap-2",children:h?g.jsxs("div",{className:"flex items-center gap-2 bg-white/10 p-1 rounded-lg",children:[g.jsx("input",{type:"number",value:y,onChange:M=>_(M.target.value),className:"w-16 bg-white/20 text-white text-xs px-2 py-1 rounded outline-none border border-white/30"}),g.jsx("button",{onClick:b,className:"p-1 hover:text-green-300 text-white",children:g.jsx(o_,{size:14})}),g.jsx("button",{onClick:()=>f(!1),className:"p-1 hover:text-red-300 text-white",children:g.jsx(Qa,{size:14})})]}):g.jsxs(g.Fragment,{children:[g.jsxs("p",{className:"text-[10px] text-cyan-200 opacity-70",children:[": ",g.jsx("span",{className:"font-bold text-white",children:t})]}),g.jsx("button",{onClick:()=>f(!0),className:"w-6 h-6 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white",children:g.jsx(V2,{size:10})})]})})]}),g.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100",children:[g.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[g.jsx(Wa,{className:"text-guam-coral mr-2",size:20})," "]}),g.jsx("div",{className:"space-y-4",children:r&&r.length>0?r.map(M=>g.jsxs("div",{onClick:()=>e&&e(M),className:"border border-slate-100 rounded-2xl p-4 bg-slate-50/50 hover:bg-slate-100 transition-colors cursor-pointer group relative",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsxs("span",{className:`${M.id==="outbound"?"bg-guam-navy":"bg-guam-teal"} text-white text-[10px] px-2 py-0.5 rounded`,children:[M.id==="outbound"?"":""," (",M.date.split("/")[1],"/",M.date.split("/")[2],")"]}),g.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-guam-navy transition-colors",children:M.flightNumber})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("span",{className:"block text-xl font-bold text-slate-700",children:M.departureTime}),g.jsx("span",{className:"text-xs text-slate-400",children:M.departureCode})]}),g.jsxs("div",{className:"flex-1 px-4 flex flex-col items-center",children:[g.jsx("span",{className:"text-[10px] text-slate-400",children:M.duration}),g.jsx("div",{className:"w-full h-px bg-slate-300 relative my-1",children:g.jsx(Wa,{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 text-slate-300 bg-slate-50 group-hover:text-guam-coral transition-colors",size:12})})]}),g.jsxs("div",{className:"text-center",children:[g.jsx("span",{className:"block text-xl font-bold text-slate-700",children:M.arrivalTime}),g.jsx("span",{className:"text-xs text-slate-400",children:M.arrivalCode})]})]})]},M.id)):g.jsx("p",{className:"text-center text-slate-400 text-sm py-4",children:"..."})})]}),g.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100",children:[g.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[g.jsx(N2,{className:"text-guam-teal mr-2",size:20})," "]}),g.jsx("div",{className:"space-y-4",children:[{date:"2/7 (Sat)",name:"Bayview Hotel Guam",cn:""},{date:"2/8 (Sun)",name:"Crowne Plaza Resort",cn:""},{date:"2/9 (Mon)",name:"Hoshino Resorts RISONARE",cn:""},{date:"2/10 (Tue)",name:"Guam Plaza Resort",cn:"Spa"}].map((M,P)=>g.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 pb-3 last:border-0",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-[10px] bg-slate-100 px-2 py-0.5 rounded text-slate-500 font-bold",children:M.date}),g.jsx("h4",{className:"font-bold text-slate-700 text-sm mt-1",children:M.name}),g.jsx("p",{className:"text-xs text-slate-400",children:M.cn})]}),g.jsx("button",{onClick:()=>A(M.name),className:"w-8 h-8 rounded-full bg-slate-50 text-guam-teal flex items-center justify-center hover:bg-guam-teal hover:text-white transition-colors",children:g.jsx(zd,{size:14})})]},P))})]})]})},Y2=({items:r,onRemove:e,onAddClick:t,onEdit:i})=>g.jsxs("div",{className:"animate-fade-in pb-32 min-h-[60vh]",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-6 px-1",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-guam-navy/10 flex items-center justify-center text-guam-navy",children:g.jsx(Ga,{size:20})}),g.jsx("h2",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.map(o=>g.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 flex flex-col relative group overflow-hidden",children:[o.imageUrl?g.jsxs("div",{className:"h-40 w-full relative",children:[g.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-full h-full object-cover"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),g.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[g.jsx("button",{onClick:()=>i(o),className:"w-7 h-7 bg-white/90 backdrop-blur rounded-full flex items-center justify-center text-slate-600 hover:text-guam-navy shadow-sm transition-colors",children:g.jsx(Ka,{size:12})}),g.jsx("button",{onClick:()=>e(o.id),className:"w-7 h-7 bg-white/90 backdrop-blur rounded-full flex items-center justify-center text-slate-600 hover:text-red-400 shadow-sm transition-colors",children:g.jsx(Qa,{size:12})})]})]}):g.jsxs("div",{className:"flex justify-between items-start p-3 pb-0",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-guam-teal/10 flex items-center justify-center text-guam-teal shadow-sm border border-white",children:g.jsx(Ga,{size:16})}),g.jsxs("div",{className:"flex gap-1 bg-slate-50 rounded-full p-0.5 shadow-sm",children:[g.jsx("button",{onClick:()=>i(o),className:"text-slate-400 hover:text-guam-navy transition-colors p-1",children:g.jsx(Ka,{size:14})}),g.jsx("button",{onClick:()=>e(o.id),className:"text-slate-400 hover:text-red-400 transition-colors p-1",children:g.jsx(Qa,{size:14})})]})]}),g.jsxs("div",{className:"p-3 pt-2 flex-1 flex flex-col",children:[g.jsx("p",{className:"font-bold text-sm text-slate-800 mb-1 leading-snug line-clamp-2",children:o.name}),g.jsx("p",{className:"text-xs text-slate-500 font-medium break-words leading-relaxed line-clamp-3",children:o.note||""})]})]},o.id)),g.jsxs("div",{onClick:t,className:"bg-white/40 border-2 border-dashed border-slate-300/50 rounded-2xl p-4 flex flex-col items-center justify-center cursor-pointer min-h-[140px] hover:bg-white/80 transition-all hover:border-guam-teal/50 group",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center mb-2 group-hover:bg-guam-teal group-hover:text-white transition-colors",children:g.jsx(i_,{size:20,className:"text-slate-300 group-hover:text-white"})}),g.jsx("span",{className:"text-xs text-slate-400 font-bold group-hover:text-guam-teal transition-colors",children:""})]})]})]}),J2=({expenses:r,onRemove:e,onEdit:t,members:i=[],exchangeRate:o})=>{const[l,h]=me.useState("list"),f=r.reduce((q,W)=>q+W.amount,0),y=Math.round(f*o),_=q=>i.find(W=>W.id===q)?.name||"Unknown",E=q=>i.find(W=>W.id===q)?.avatarUrl,A=q=>{switch(q){case"food":return g.jsx(I2,{size:14});case"shopping":return g.jsx(Ga,{size:14});case"transport":return g.jsx(oc,{size:14});case"accommodation":return g.jsx(t_,{size:14});case"other":return g.jsx(M2,{size:14});default:return g.jsx(Bd,{size:14})}},b=q=>{switch(q){case"food":return"bg-guam-coral";case"shopping":return"bg-guam-navy";case"transport":return"bg-slate-500";case"accommodation":return"bg-indigo-500";case"other":return"bg-slate-400";default:return"bg-guam-sun"}},P=(()=>{const q={};return i.forEach(W=>{q[W.id]={paid:0,share:0,net:0}}),r.forEach(W=>{q[W.payerId]||(q[W.payerId]={paid:0,share:0,net:0}),q[W.payerId].paid+=W.amount,W.splits&&W.splits.length>0?W.splits.forEach(ne=>{q[ne.memberId]||(q[ne.memberId]={paid:0,share:0,net:0}),q[ne.memberId].share+=ne.amount}):q[W.payerId].share+=W.amount}),Object.keys(q).forEach(W=>{q[W].net=q[W].paid-q[W].share}),q})(),F=(()=>{let q=[],W=[];Object.keys(P).forEach(ie=>{const R=P[ie].net;Math.abs(R)<.01||(R<0?q.push({id:ie,amount:-R}):W.push({id:ie,amount:R}))}),q.sort((ie,R)=>R.amount-ie.amount),W.sort((ie,R)=>R.amount-ie.amount);const ne=[];let se=0,Ee=0;for(;se<q.length&&Ee<W.length;){const ie=q[se],R=W[Ee],T=Math.min(ie.amount,R.amount);T>0&&ne.push({fromId:ie.id,toId:R.id,amount:parseFloat(T.toFixed(2))}),ie.amount-=T,R.amount-=T,ie.amount<.01&&se++,R.amount<.01&&Ee++}return ne})();return g.jsxs("div",{className:"animate-fade-in pb-24",children:[g.jsxs("div",{className:"flex bg-white rounded-2xl p-1 mb-6 shadow-sm border border-slate-100",children:[g.jsxs("button",{onClick:()=>h("list"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold flex items-center justify-center transition-all ${l==="list"?"bg-guam-navy text-white shadow-md":"text-slate-400 hover:bg-slate-50"}`,children:[g.jsx(xy,{size:16,className:"mr-2"})," "]}),g.jsxs("button",{onClick:()=>h("settlement"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold flex items-center justify-center transition-all ${l==="settlement"?"bg-guam-navy text-white shadow-md":"text-slate-400 hover:bg-slate-50"}`,children:[g.jsx(Va,{size:16,className:"mr-2"})," "]})]}),l==="list"?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"bg-guam-navy rounded-[2.5rem] p-8 mb-6 relative overflow-hidden text-white shadow-xl shadow-guam-navy/20",children:[g.jsx("div",{className:"absolute -right-12 -top-12 bg-guam-teal/30 w-56 h-56 rounded-full blur-3xl"}),g.jsx("div",{className:"absolute -left-10 bottom-0 bg-guam-coral/20 w-40 h-40 rounded-full blur-2xl"}),g.jsx("p",{className:"text-xs text-cyan-100/80 mb-1 relative z-10 font-medium tracking-wider",children:"TOTAL SPENT (USD)"}),g.jsxs("h2",{className:"text-5xl font-bold relative z-10 tracking-tight mb-2",children:["$",f.toLocaleString()]}),g.jsxs("p",{className:"text-sm text-right opacity-70 relative z-10",children:[" NT$ ",y.toLocaleString()]})]}),g.jsxs("div",{className:"bg-white rounded-t-[2.5rem] min-h-[400px] p-6 shadow-[0_-5px_30px_rgba(0,0,0,0.03)] -mx-4 px-8 pt-8 border-t border-slate-50",children:[g.jsxs("h3",{className:"font-bold text-slate-800 mb-6 flex items-center text-sm tracking-wide",children:[g.jsx(xy,{className:"text-guam-teal mr-2",size:16})," RECENT ACTIVITY"]}),g.jsxs("div",{className:"space-y-6",children:[r.map(q=>g.jsxs("div",{className:"flex items-center justify-between group",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white mr-4 shadow-sm ${b(q.category)}`,children:A(q.category)}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-slate-700 text-sm",children:q.name}),g.jsxs("p",{className:"text-[10px] text-slate-400 uppercase font-medium flex items-center gap-2",children:[g.jsxs("span",{children:[q.date,"  ",q.payment]}),g.jsxs("span",{className:"px-1.5 py-0.5 bg-slate-100 rounded text-slate-500 font-bold",children:[_(q.payerId)," "]})]})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:"font-bold text-slate-800",children:["$",q.amount]}),g.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[g.jsxs("button",{onClick:()=>t(q),className:"text-[10px] text-guam-navy flex items-center",children:[g.jsx(Ka,{size:10,className:"mr-1"})," "]}),g.jsxs("button",{onClick:()=>e(q.id),className:"text-[10px] text-red-300 flex items-center",children:[g.jsx(ll,{size:10,className:"mr-1"})," "]})]})]})]},q.id)),r.length===0&&g.jsx("p",{className:"text-center text-slate-300 text-sm py-8",children:""})]})]})]}):g.jsxs("div",{className:"space-y-6",children:[F.length>0&&g.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-[0_5px_20px_rgba(13,148,136,0.1)] border border-guam-teal/20",children:[g.jsxs("h3",{className:"font-bold text-guam-teal mb-4 flex items-center text-sm tracking-wide",children:[g.jsx(L2,{size:16,className:"mr-2"}),"  (Transfer Guide)"]}),g.jsx("div",{className:"space-y-3",children:F.map((q,W)=>g.jsxs("div",{className:"flex items-center justify-between bg-guam-sand/50 p-4 rounded-2xl border border-guam-teal/10 relative overflow-hidden",children:[g.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-guam-teal/5 z-0 pointer-events-none",children:g.jsx(vy,{size:60})}),g.jsx("div",{className:"flex items-center z-10",children:g.jsxs("div",{className:"text-center mr-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-white border-2 border-slate-100 overflow-hidden shadow-sm mx-auto mb-1",children:E(q.fromId)?g.jsx("img",{src:E(q.fromId),className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300 font-bold",children:_(q.fromId)[0]})}),g.jsx("p",{className:"text-[10px] font-bold text-slate-600 max-w-[60px] truncate",children:_(q.fromId)})]})}),g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center z-10 px-2",children:[g.jsx("p",{className:"text-[10px] text-slate-400 font-bold mb-1",children:"PAYS"}),g.jsx("div",{className:"bg-white px-3 py-1 rounded-full shadow-sm border border-guam-teal/20",children:g.jsxs("span",{className:"font-bold text-guam-teal text-lg",children:["$",q.amount]})}),g.jsx(vy,{size:14,className:"text-guam-teal/50 mt-1"})]}),g.jsx("div",{className:"flex items-center z-10",children:g.jsxs("div",{className:"text-center ml-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-white border-2 border-guam-teal overflow-hidden shadow-sm mx-auto mb-1",children:E(q.toId)?g.jsx("img",{src:E(q.toId),className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300 font-bold",children:_(q.toId)[0]})}),g.jsx("p",{className:"text-[10px] font-bold text-slate-600 max-w-[60px] truncate",children:_(q.toId)})]})})]},W))})]}),g.jsxs("div",{className:"px-2",children:[g.jsx("h3",{className:"font-bold text-slate-400 mb-3 flex items-center text-xs tracking-wide uppercase px-2",children:" (Net Balance)"}),g.jsx("div",{className:"space-y-4",children:i.map(q=>{const W=P[q.id]||{paid:0,share:0,net:0},ne=W.net>=0;return g.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100 relative overflow-hidden opacity-90",children:[g.jsx("div",{className:`absolute top-0 left-0 w-1.5 h-full ${ne?"bg-guam-teal":"bg-guam-coral"}`}),g.jsxs("div",{className:"flex justify-between items-start mb-4 pl-2",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 mr-3 overflow-hidden border border-white shadow-sm",children:q.avatarUrl?g.jsx("img",{src:q.avatarUrl,className:"w-full h-full object-cover"}):g.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400 text-xs font-bold",children:q.name[0]})}),g.jsx("span",{className:"font-bold text-slate-800 text-lg",children:q.name})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("p",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-wider mb-0.5",children:ne?" (Receive)":" (Pay)"}),g.jsxs("p",{className:`text-xl font-bold ${ne?"text-guam-teal":"text-guam-coral"}`,children:["$",Math.abs(W.net).toLocaleString()]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-2",children:[g.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[g.jsxs("p",{className:"text-[10px] text-slate-400 flex items-center mb-1",children:[g.jsx(S2,{size:10,className:"mr-1"})," "]}),g.jsxs("p",{className:"font-bold text-slate-700",children:["$",W.paid.toLocaleString()]})]}),g.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[g.jsxs("p",{className:"text-[10px] text-slate-400 flex items-center mb-1",children:[g.jsx(Va,{size:10,className:"mr-1"})," "]}),g.jsxs("p",{className:"font-bold text-slate-700",children:["$",W.share.toLocaleString()]})]})]})]},q.id)})})]}),r.length===0&&g.jsxs("div",{className:"text-center py-10 opacity-50",children:[g.jsx(Va,{size:40,className:"mx-auto text-slate-300 mb-2"}),g.jsx("p",{className:"text-sm text-slate-400",children:""})]})]})]})},Z2=({items:r,onToggle:e,onRemove:t,onEdit:i})=>{const[o,l]=me.useState("todo"),h=_=>{switch(_){case"Mom":return"bg-red-50 text-red-500 border-red-100";case"Sister1":return"bg-blue-50 text-blue-500 border-blue-100";case"Sister2":return"bg-green-50 text-green-500 border-green-100";default:return"bg-slate-50 text-slate-500 border-slate-100"}},f=[{key:"todo",label:"",icon:g.jsx(D2,{size:18})},{key:"luggage",label:"",icon:g.jsx(n_,{size:18})},{key:"documents",label:"",icon:g.jsx(C2,{size:18})}],y=r.filter(_=>_.category===o);return g.jsxs("div",{className:"animate-fade-in pb-32 min-h-[60vh]",children:[g.jsx("div",{className:"flex p-1.5 bg-white rounded-2xl shadow-sm mb-6 border border-slate-100 sticky top-0 z-10 mx-1",children:f.map(_=>g.jsxs("button",{onClick:()=>l(_.key),className:`flex-1 flex items-center justify-center py-3 text-sm font-bold rounded-xl transition-all ${o===_.key?"bg-guam-teal text-white shadow-md scale-100":"text-slate-400 hover:bg-slate-50 scale-95"}`,children:[g.jsx("span",{className:"mr-2 opacity-90",children:_.icon}),_.label]},_.key))}),g.jsx("div",{className:"space-y-4",children:y.map(_=>g.jsxs("div",{className:"bg-white rounded-3xl p-5 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.03)] border border-white flex items-center group transition-all hover:shadow-lg hover:-translate-y-0.5",children:[g.jsxs("label",{className:"flex items-center flex-1 cursor-pointer checkbox-wrapper select-none",children:[g.jsx("input",{type:"checkbox",checked:_.completed,onChange:()=>e(_.id),className:"hidden"}),g.jsx("div",{className:`w-7 h-7 rounded-xl border-2 mr-4 flex items-center justify-center transition-all duration-300 ${_.completed?"bg-guam-teal border-guam-teal rotate-6 scale-110":"border-slate-200 bg-slate-50 group-hover:border-guam-teal/50"}`,children:g.jsx(r_,{size:16,className:"text-white hidden",strokeWidth:4})}),g.jsx("span",{className:`text-base font-bold transition-colors ${_.completed?"text-slate-300 line-through decoration-2 decoration-slate-200":"text-slate-700"}`,children:_.title})]}),g.jsxs("div",{className:"flex items-center pl-3",children:[g.jsx("span",{className:`text-[10px] px-3 py-1.5 rounded-full border font-bold whitespace-nowrap tracking-wide uppercase ${h(_.assignedTo)}`,children:_.assignedTo}),g.jsxs("div",{className:"flex gap-2 ml-3",children:[g.jsx("button",{onClick:()=>i(_),className:"w-9 h-9 rounded-full bg-slate-50 text-slate-400 flex items-center justify-center transition-all hover:bg-guam-navy hover:text-white shadow-sm active:scale-90",children:g.jsx(Ka,{size:16})}),g.jsx("button",{onClick:()=>t(_.id),className:"w-9 h-9 rounded-full bg-red-50 text-red-400 flex items-center justify-center transition-all hover:bg-red-500 hover:text-white shadow-sm active:scale-90",children:g.jsx(ll,{size:16})})]})]})]},_.id))}),y.length===0&&g.jsxs("div",{className:"text-center py-24 flex flex-col items-center justify-center opacity-50",children:[g.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mb-4 text-slate-300 shadow-sm",children:f.find(_=>_.key===o)?.icon}),g.jsxs("p",{className:"text-base font-bold text-slate-500",children:["",f.find(_=>_.key===o)?.label]}),g.jsx("p",{className:"text-sm text-slate-400 mt-1",children:""})]})]})},eA=({isOpen:r,onClose:e,onSave:t,onDelete:i,initialData:o})=>{const[l,h]=me.useState({category:"sightseeing",transportType:"car"});return me.useEffect(()=>{h(o?{...o}:{category:"sightseeing",transportType:"car",name:"",address:"",price:"",hours:"",note:"",startTime:""})},[o,r]),r?g.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-guam-navy/30 backdrop-blur-sm p-4 animate-fade-in",children:g.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[g.jsx("h3",{className:"font-bold text-lg mb-6 text-center text-slate-800",children:o?"":""}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("select",{value:l.category,onChange:f=>h({...l,category:f.target.value}),className:"bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none border border-transparent focus:border-guam-teal",children:[g.jsx("option",{value:"sightseeing",children:""}),g.jsx("option",{value:"food",children:""}),g.jsx("option",{value:"shopping",children:""}),g.jsx("option",{value:"transport",children:""}),g.jsx("option",{value:"accommodation",children:""}),g.jsx("option",{value:"ticket",children:"/"}),g.jsx("option",{value:"other",children:""})]}),g.jsx("input",{placeholder:" (09:00)",value:l.startTime||"",onChange:f=>h({...l,startTime:f.target.value}),className:"bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none border border-transparent focus:border-guam-teal text-center placeholder-slate-400"})]}),g.jsx("input",{placeholder:"",value:l.name||"",onChange:f=>h({...l,name:f.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none border border-transparent focus:border-guam-teal font-bold placeholder-slate-400"}),g.jsx("input",{placeholder:"",value:l.address||"",onChange:f=>h({...l,address:f.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none border border-transparent focus:border-guam-teal placeholder-slate-400"}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsx("input",{placeholder:"",value:l.price||"",onChange:f=>h({...l,price:f.target.value}),className:"bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none placeholder-slate-400"}),g.jsx("input",{placeholder:"",value:l.hours||"",onChange:f=>h({...l,hours:f.target.value}),className:"bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none placeholder-slate-400"})]}),g.jsx("textarea",{placeholder:"",rows:3,value:l.note||"",onChange:f=>h({...l,note:f.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none border border-transparent focus:border-guam-teal placeholder-slate-400"})]}),g.jsxs("div",{className:"flex space-x-3 mt-8",children:[g.jsx("button",{onClick:e,className:"flex-1 py-3 rounded-xl bg-slate-100 text-slate-500 font-bold text-sm",children:""}),o&&g.jsx("button",{onClick:()=>{i(o.id),e()},className:"w-12 bg-red-50 text-red-400 rounded-xl flex items-center justify-center",children:g.jsx(ll,{size:18})}),g.jsx("button",{onClick:()=>{t(l),e()},className:"flex-[2] py-3 rounded-xl bg-guam-teal text-white font-bold text-sm shadow-lg shadow-guam-teal/30",children:""})]})]})}):null},tA=({isOpen:r,onClose:e,onSave:t,initialData:i})=>{const[o,l]=me.useState(""),[h,f]=me.useState(""),[y,_]=me.useState(void 0),[E,A]=me.useState(!1),b=me.useRef(null);me.useEffect(()=>{r&&(i?(l(i.name),f(i.note||""),_(i.imageUrl)):(l(""),f(""),_(void 0)))},[r,i]);const M=P=>{const H=P.target.files?.[0];if(!H)return;A(!0);const F=new FileReader;F.onload=q=>{const W=new Image;W.onload=()=>{const ne=document.createElement("canvas"),se=800;let Ee=W.width,ie=W.height;Ee>ie?Ee>se&&(ie*=se/Ee,Ee=se):ie>se&&(Ee*=se/ie,ie=se),ne.width=Ee,ne.height=ie;const R=ne.getContext("2d");R?(R.drawImage(W,0,0,Ee,ie),ne.toBlob(async T=>{if(T&&Fd)try{const k=`shopping/${Date.now()}_${H.name}`,N=u2(Fd,k);await a2(N,T);const j=await l2(N);_(j)}catch(k){console.error("Upload failed",k),alert(": "+k.message)}finally{A(!1)}else alert("Firebase Storage "),A(!1)},"image/jpeg",.8)):A(!1)},W.src=q.target?.result},F.readAsDataURL(H)};return r?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-guam-navy/30 backdrop-blur-sm p-6 animate-fade-in",children:g.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 shadow-2xl overflow-y-auto max-h-[90vh]",children:[g.jsx("h3",{className:"font-bold text-lg mb-4 text-center text-slate-800",children:i?"":""}),g.jsxs("div",{className:"mb-4 flex justify-center",children:[g.jsx("input",{type:"file",ref:b,onChange:M,accept:"image/*",className:"hidden"}),y?g.jsxs("div",{className:"relative w-full h-48 rounded-2xl overflow-hidden border border-slate-200 group bg-slate-50",children:[g.jsx("img",{src:y,alt:"Product",className:"w-full h-full object-contain"}),g.jsxs("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity gap-2",children:[g.jsx("button",{onClick:()=>b.current?.click(),className:"p-1.5 bg-white/20 rounded-full text-white hover:bg-white/40",children:g.jsx(s_,{size:16})}),g.jsx("button",{onClick:()=>_(void 0),className:"p-1.5 bg-red-500/50 rounded-full text-white hover:bg-red-500/80",children:g.jsx(ll,{size:16})})]})]}):g.jsxs("button",{onClick:()=>b.current?.click(),className:"w-32 h-32 rounded-2xl border-2 border-dashed border-slate-300 bg-slate-50 flex flex-col items-center justify-center text-slate-400 hover:border-guam-teal hover:text-guam-teal hover:bg-guam-teal/5 transition-all",disabled:E,children:[E?g.jsx(ac,{size:24,className:"animate-spin mb-2"}):g.jsx(P2,{size:32,className:"mb-2"}),g.jsx("span",{className:"text-xs font-bold",children:E?"...":""})]})]}),g.jsx("input",{placeholder:" (ex: Banana Boat SPF110)",value:o,onChange:P=>l(P.target.value),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-4 mb-3 text-sm outline-none border border-transparent focus:border-guam-teal placeholder-slate-400"}),g.jsx("textarea",{rows:3,placeholder:" (ex: ABC Store , )",value:h,onChange:P=>f(P.target.value),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-4 mb-6 text-sm outline-none border border-transparent focus:border-guam-teal placeholder-slate-400"}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{onClick:e,className:"flex-1 py-3 rounded-xl bg-slate-100 text-slate-500 font-bold text-sm",children:""}),g.jsx("button",{onClick:()=>{t({name:o,note:h,imageUrl:y}),e(),l(""),f(""),_(void 0)},disabled:!o.trim()||E,className:"flex-1 py-3 rounded-xl bg-guam-navy text-white font-bold text-sm shadow-lg shadow-guam-navy/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:E?g.jsx(ac,{size:16,className:"animate-spin"}):i?"":""})]})]})}):null},nA=({isOpen:r,onClose:e,onSave:t,members:i,initialData:o})=>{const[l,h]=me.useState({category:"food",payment:"Cash",amount:0}),[f,y]=me.useState([]);me.useEffect(()=>{if(r)if(o){h(o);const P=o.splits||[];y(i.map(H=>{const F=P.find(q=>q.memberId===H.id);return{id:H.id,amount:F?F.amount:0,checked:!!F}}))}else h({category:"food",payment:"Cash",amount:0,payerId:i[0]?.id}),y(i.map(P=>({id:P.id,amount:0,checked:!0})))},[r,i,o]);const _=(P,H)=>{const q=H.filter(W=>W.checked).length;if(q>0&&P>0){const W=parseFloat((P/q).toFixed(2)),ne=parseFloat((P-W*(q-1)).toFixed(2));let se=0;return H.map(Ee=>Ee.checked?(se++,{...Ee,amount:se===q?ne:W}):{...Ee,amount:0})}else return H.map(W=>({...W,amount:0}))},E=P=>{const H=parseFloat(P)||0;h(F=>({...F,amount:H})),y(F=>_(H,F))},A=P=>{const H=f.map(F=>F.id===P?{...F,checked:!F.checked}:F);y(_(l.amount||0,H))},b=(P,H)=>{y(F=>F.map(q=>q.id===P?{...q,amount:H}:q))},M=()=>{const P=f.reduce((q,W)=>q+(W.checked?W.amount:0),0),H=l.amount||0;if(Math.abs(P-H)>.05){alert(` (${P})  (${H})`);return}const F=f.filter(q=>q.checked).map(q=>({memberId:q.id,amount:q.amount}));t({...l,splits:F}),e(),h({category:"food",payment:"Cash",payerId:i[0]?.id,amount:0})};return r?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-guam-navy/30 backdrop-blur-sm p-4 animate-fade-in overflow-y-auto",children:g.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 shadow-2xl my-auto",children:[g.jsx("h3",{className:"font-bold text-lg mb-4 text-center text-slate-800",children:o?"":" (USD)"}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[g.jsxs("select",{value:l.category,onChange:P=>h({...l,category:P.target.value}),className:"bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none",children:[g.jsx("option",{value:"food",children:""}),g.jsx("option",{value:"shopping",children:""}),g.jsx("option",{value:"transport",children:""}),g.jsx("option",{value:"ticket",children:""}),g.jsx("option",{value:"accommodation",children:""}),g.jsx("option",{value:"other",children:""})]}),g.jsx("select",{value:l.payerId||i[0]?.id,onChange:P=>h({...l,payerId:P.target.value}),className:"bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none",children:i.map(P=>g.jsxs("option",{value:P.id,children:[": ",P.name]},P.id))})]}),g.jsxs("div",{className:"flex bg-slate-50 rounded-xl p-1 mb-3",children:[g.jsx("button",{onClick:()=>h({...l,payment:"Cash"}),className:`flex-1 rounded-lg text-xs font-bold py-2 transition-colors ${l.payment==="Cash"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:""}),g.jsx("button",{onClick:()=>h({...l,payment:"Card"}),className:`flex-1 rounded-lg text-xs font-bold py-2 transition-colors ${l.payment==="Card"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:""})]}),g.jsx("input",{placeholder:"",value:l.name||"",onChange:P=>h({...l,name:P.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-4 mb-3 text-sm outline-none border border-transparent focus:border-guam-coral placeholder-slate-400"}),g.jsxs("div",{className:"relative mb-5",children:[g.jsx("span",{className:"absolute left-4 top-4 text-slate-400 font-bold",children:"$"}),g.jsx("input",{type:"number",placeholder:"0.00",value:l.amount||"",onChange:P=>E(P.target.value),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-4 pl-8 text-lg font-bold outline-none border border-transparent focus:border-guam-coral placeholder-slate-400"})]}),g.jsxs("div",{className:"mb-6",children:[g.jsxs("p",{className:"text-xs font-bold text-slate-400 mb-2 flex items-center",children:[g.jsx(Va,{size:12,className:"mr-1"}),"  ()"]}),g.jsx("div",{className:"space-y-2 bg-slate-50 p-3 rounded-2xl max-h-[150px] overflow-y-auto",children:f.map(P=>{const H=i.find(F=>F.id===P.id);return g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{onClick:()=>A(P.id),className:`w-5 h-5 rounded-md border flex items-center justify-center mr-2 cursor-pointer transition-colors ${P.checked?"bg-guam-teal border-guam-teal":"border-slate-300 bg-white"}`,children:P.checked&&g.jsx(r_,{size:12,className:"text-white"})}),g.jsx("span",{className:`text-sm ${P.checked?"text-slate-700":"text-slate-400"}`,children:H?.name})]}),g.jsxs("div",{className:"relative w-24",children:[g.jsx("span",{className:`absolute left-2 top-1.5 text-xs ${P.checked?"text-slate-500":"text-slate-300"}`,children:"$"}),g.jsx("input",{type:"number",disabled:!P.checked,value:P.amount,onChange:F=>b(P.id,parseFloat(F.target.value)),className:`w-full rounded-lg py-1 pl-4 pr-2 text-right text-sm outline-none border ${P.checked?"bg-white border-slate-200 focus:border-guam-teal text-slate-800":"bg-transparent border-transparent text-slate-300"}`})]})]},P.id)})})]}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{onClick:e,className:"flex-1 py-3 rounded-xl bg-slate-100 text-slate-500 font-bold text-sm",children:""}),g.jsx("button",{onClick:M,className:"flex-1 py-3 rounded-xl bg-guam-coral text-white font-bold text-sm shadow-lg shadow-guam-coral/30",children:""})]})]})}):null},rA=({isOpen:r,onClose:e,onSave:t,members:i,initialData:o})=>{const[l,h]=me.useState({category:"todo",assignedTo:"All",completed:!1});return me.useEffect(()=>{r&&h(o?{...o}:{category:"todo",assignedTo:"All",completed:!1,title:""})},[r,o]),r?g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-guam-navy/30 backdrop-blur-sm p-6 animate-fade-in",children:g.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 shadow-2xl",children:[g.jsx("h3",{className:"font-bold text-lg mb-4 text-center text-slate-800",children:o?"":""}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[g.jsxs("select",{value:l.category,onChange:f=>h({...l,category:f.target.value}),className:"bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none",children:[g.jsx("option",{value:"todo",children:""}),g.jsx("option",{value:"luggage",children:""}),g.jsx("option",{value:"documents",children:""})]}),g.jsxs("select",{value:l.assignedTo,onChange:f=>h({...l,assignedTo:f.target.value}),className:"bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none",children:[g.jsx("option",{value:"All",children:" (All)"}),i.map(f=>g.jsx("option",{value:f.name,children:f.name},f.id))]})]}),g.jsx("input",{placeholder:"",value:l.title||"",onChange:f=>h({...l,title:f.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-4 mb-6 text-sm outline-none border border-transparent focus:border-guam-teal placeholder-slate-400"}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{onClick:e,className:"flex-1 py-3 rounded-xl bg-slate-100 text-slate-500 font-bold text-sm",children:""}),g.jsx("button",{onClick:()=>{t(l),e(),h({category:"todo",assignedTo:"All",completed:!1})},className:"flex-1 py-3 rounded-xl bg-guam-teal text-white font-bold text-sm shadow-lg shadow-guam-teal/30",children:o?"":""})]})]})}):null},sA=({isOpen:r,onClose:e,flight:t,onSave:i})=>{const[o,l]=me.useState(!1),[h,f]=me.useState(null);if(me.useEffect(()=>{r&&t&&(f({...t}),l(!1))},[r,t]),!r||!h)return null;const y=()=>{h&&(i(h),l(!1))};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-guam-navy/30 backdrop-blur-sm p-4 animate-fade-in overflow-y-auto",children:g.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-sm shadow-2xl relative overflow-hidden my-auto",children:[g.jsx("button",{onClick:e,className:"absolute top-4 right-4 z-20 w-8 h-8 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 hover:text-slate-600",children:g.jsx(Qa,{size:16})}),o?g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"font-bold text-lg mb-6 text-center text-slate-800",children:""}),g.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:" & "}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{value:h.airline,onChange:_=>f({...h,airline:_.target.value}),className:"flex-1 bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none border border-transparent focus:border-guam-teal",placeholder:"Airline"}),g.jsx("input",{value:h.flightNumber,onChange:_=>f({...h,flightNumber:_.target.value}),className:"w-24 bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none border border-transparent focus:border-guam-teal font-bold",placeholder:"NO."})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:" (//)"}),g.jsx("input",{value:h.departureCode,onChange:_=>f({...h,departureCode:_.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-2 text-sm mb-2 font-bold uppercase"}),g.jsx("input",{value:h.departureCity,onChange:_=>f({...h,departureCity:_.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-2 text-sm mb-2"}),g.jsx("input",{type:"time",value:h.departureTime,onChange:_=>f({...h,departureTime:_.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-2 text-sm"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:" (//)"}),g.jsx("input",{value:h.arrivalCode,onChange:_=>f({...h,arrivalCode:_.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-2 text-sm mb-2 font-bold uppercase"}),g.jsx("input",{value:h.arrivalCity,onChange:_=>f({...h,arrivalCity:_.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-2 text-sm mb-2"}),g.jsx("input",{type:"time",value:h.arrivalTime,onChange:_=>f({...h,arrivalTime:_.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-2 text-sm"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),g.jsx("input",{type:"date",value:h.date.replace(/\//g,"-"),onChange:_=>f({...h,date:_.target.value.replace(/-/g,"/")}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-bold text-slate-400 block mb-1",children:""}),g.jsx("input",{value:h.duration,onChange:_=>f({...h,duration:_.target.value}),className:"w-full bg-slate-50 text-slate-800 rounded-xl p-3 text-sm outline-none",placeholder:"ex: 3h 50m"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsx("input",{value:h.baggage,onChange:_=>f({...h,baggage:_.target.value}),className:"bg-slate-50 text-slate-800 w-full rounded-xl p-3 text-sm outline-none",placeholder:" (ex: 23kg)"}),g.jsx("input",{value:h.aircraft,onChange:_=>f({...h,aircraft:_.target.value}),className:"bg-slate-50 text-slate-800 w-full rounded-xl p-3 text-sm outline-none",placeholder:" (ex: A321)"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsx("input",{value:h.price,onChange:_=>f({...h,price:_.target.value}),className:"bg-slate-50 text-slate-800 w-full rounded-xl p-3 text-sm outline-none",placeholder:""}),g.jsx("input",{value:h.purchaseDate,onChange:_=>f({...h,purchaseDate:_.target.value}),className:"bg-slate-50 text-slate-800 w-full rounded-xl p-3 text-sm outline-none",placeholder:""})]})]}),g.jsxs("div",{className:"flex gap-3 mt-6",children:[g.jsx("button",{onClick:()=>l(!1),className:"flex-1 py-3 rounded-xl bg-slate-100 text-slate-500 font-bold text-sm",children:""}),g.jsxs("button",{onClick:y,className:"flex-1 py-3 rounded-xl bg-guam-teal text-white font-bold text-sm shadow-lg shadow-guam-teal/30 flex items-center justify-center",children:[g.jsx(o_,{size:16,className:"mr-2"})," "]})]})]}):g.jsxs("div",{className:"p-0",children:[g.jsxs("div",{className:"bg-blue-50/50 p-6 pb-8 text-center relative",children:[g.jsx("h3",{className:"text-slate-400 font-bold text-sm uppercase tracking-widest",children:h.airline}),g.jsx("h2",{className:"text-4xl font-black text-slate-700 mt-2 tracking-wide",children:h.flightNumber.replace(/\s/g," ")}),g.jsx("div",{className:"absolute top-4 right-6 bg-white px-2 py-1 rounded text-[10px] font-bold text-slate-400 shadow-sm border border-slate-100",children:""})]}),g.jsx("div",{className:"px-8 -mt-6 relative z-10",children:g.jsx("div",{className:"bg-white rounded-[2rem] shadow-xl p-6 border border-slate-100",children:g.jsxs("div",{className:"flex justify-between items-center mb-1",children:[g.jsxs("div",{className:"text-left",children:[g.jsx("h1",{className:"text-4xl font-black text-slate-700",children:h.departureCode}),g.jsx("p",{className:"text-2xl font-bold text-slate-700 mt-1",children:h.departureTime}),g.jsx("span",{className:`inline-block px-3 py-0.5 rounded-full text-xs font-bold mt-2 text-white ${h.departureCode==="TPE"||h.departureCode==="KHH"?"bg-guam-teal":"bg-guam-sun"}`,children:h.departureCity})]}),g.jsxs("div",{className:"flex flex-col items-center justify-center px-2",children:[g.jsx("span",{className:"text-[10px] text-slate-300 font-bold mb-1",children:h.duration}),g.jsx(Wa,{className:"text-blue-500 rotate-90 mb-1",size:24}),g.jsx("div",{className:"w-16 border-b-2 border-dashed border-slate-200 mb-1"}),g.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:h.date})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("h1",{className:"text-4xl font-black text-slate-700",children:h.arrivalCode}),g.jsx("p",{className:"text-2xl font-bold text-slate-700 mt-1",children:h.arrivalTime}),g.jsx("span",{className:`inline-block px-3 py-0.5 rounded-full text-xs font-bold mt-2 text-white ${h.arrivalCode==="GUM"?"bg-guam-sun":"bg-guam-teal"}`,children:h.arrivalCity})]})]})})}),g.jsxs("div",{className:"px-8 mt-6 pb-8 space-y-4",children:[g.jsxs("div",{className:"flex border border-slate-100 rounded-2xl p-4 bg-slate-50/50",children:[g.jsxs("div",{className:"flex-1 border-r border-slate-200 pr-4",children:[g.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"BAGGAGE"}),g.jsxs("p",{className:"font-bold text-slate-700 flex items-center",children:[g.jsx(n_,{size:16,className:"text-guam-teal mr-2"})," ",h.baggage]})]}),g.jsxs("div",{className:"flex-1 pl-4 text-right",children:[g.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"AIRCRAFT"}),g.jsxs("p",{className:"font-bold text-slate-700 flex items-center justify-end",children:[g.jsx(Wa,{size:16,className:"text-guam-sun mr-2"})," ",h.aircraft]})]})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("div",{className:"flex-1 border border-slate-100 rounded-2xl p-4 bg-slate-50/50",children:[g.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"PRICE"}),g.jsx("p",{className:"font-bold text-slate-700 text-lg",children:h.price}),g.jsx("p",{className:"text-[10px] text-slate-400",children:""})]}),g.jsxs("div",{className:"flex-1 border border-slate-100 rounded-2xl p-4 bg-slate-50/50",children:[g.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"PURCHASED"}),g.jsx("p",{className:"font-bold text-slate-700 text-lg",children:h.purchaseDate}),g.jsx("p",{className:"text-[10px] text-slate-400",children:"via "})]})]}),g.jsxs("button",{onClick:()=>l(!0),className:"w-full py-4 border border-slate-200 text-slate-500 rounded-2xl font-bold flex items-center justify-center hover:bg-slate-50 transition-colors mt-4",children:[g.jsx(s_,{size:16,className:"mr-2"})," "]})]})]})]})})},iA=({isOpen:r,onClose:e,members:t,onAddMember:i,onRemoveMember:o,currentUser:l,onLogout:h,onSyncDB:f})=>{const[y,_]=me.useState(""),[E,A]=me.useState(""),[b,M]=me.useState(!1),[P,H]=me.useState(null);if(!r)return null;const F=W=>{const ne=W.target.files?.[0];if(!ne)return;M(!0);const se=new FileReader;se.onload=Ee=>{const ie=new Image;ie.onload=()=>{const R=document.createElement("canvas"),T=200;let k=ie.width,N=ie.height;k>N?k>T&&(N*=T/k,k=T):N>T&&(k*=T/N,N=T),R.width=k,R.height=N;const j=R.getContext("2d");if(j){j.drawImage(ie,0,0,k,N);const V=R.toDataURL("image/jpeg",.7);H(V)}M(!1)},ie.src=Ee.target?.result},se.readAsDataURL(ne)},q=()=>{if(!y.trim()||!E.trim())return;const W={id:Date.now().toString(),name:y,email:E.trim(),role:"Member"};P&&(W.avatarUrl=P),i(W),_(""),A(""),H(null)};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-guam-navy/30 backdrop-blur-sm p-6 animate-fade-in",children:g.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[g.jsx("h3",{className:"font-bold text-lg text-slate-800",children:""}),g.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:g.jsx(Qa,{size:24})})]}),g.jsxs("div",{className:"space-y-3 mb-6 overflow-y-auto pr-2 flex-1 min-h-0",children:[t.map(W=>g.jsxs("div",{className:`flex items-center justify-between p-2 rounded-xl border ${W.id===l?.id?"bg-guam-teal/5 border-guam-teal/30":"bg-slate-50 border-slate-100"}`,children:[g.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[g.jsx("div",{className:"w-10 h-10 shrink-0 rounded-full bg-slate-200 overflow-hidden flex items-center justify-center border-2 border-white shadow-sm",children:W.avatarUrl?g.jsx("img",{src:W.avatarUrl,alt:W.name,className:"w-full h-full object-cover"}):g.jsx(B2,{size:20,className:"text-slate-400"})}),g.jsxs("div",{className:"min-w-0",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("span",{className:"font-bold text-slate-700 block truncate",children:W.name}),W.id===l?.id&&g.jsx("span",{className:"ml-2 text-[10px] bg-guam-teal text-white px-1.5 py-0.5 rounded-full font-bold leading-none",children:"YOU"})]}),g.jsxs("span",{className:"text-[10px] text-slate-400 block truncate flex items-center",children:[g.jsx(O2,{size:10,className:"mr-1 inline"})," ",W.email||"No Email"]})]})]}),W.id!==l?.id&&g.jsx("button",{onClick:()=>o(W.id),className:"w-8 h-8 flex items-center justify-center text-slate-300 hover:text-red-400 transition-colors shrink-0",children:g.jsx(ll,{size:16})})]},W.id)),t.length===0&&g.jsx("p",{className:"text-center text-slate-400 text-sm py-4",children:""})]}),g.jsxs("div",{className:"border-t border-slate-100 pt-4 shrink-0",children:[g.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase tracking-wide",children:" ()"}),g.jsxs("div",{className:"flex gap-3 mb-3",children:[g.jsxs("div",{className:"relative shrink-0",children:[g.jsx("input",{type:"file",id:"avatar-upload",className:"hidden",accept:"image/*",onChange:F}),g.jsx("label",{htmlFor:"avatar-upload",className:"w-12 h-12 rounded-full bg-slate-50 border border-dashed border-slate-300 flex items-center justify-center cursor-pointer hover:border-guam-teal hover:bg-guam-teal/5 transition-all overflow-hidden",children:b?g.jsx(ac,{size:20,className:"animate-spin text-guam-teal"}):P?g.jsx("img",{src:P,className:"w-full h-full object-cover"}):g.jsx(z2,{size:18,className:"text-slate-400"})})]}),g.jsxs("div",{className:"flex-1 space-y-2",children:[g.jsx("input",{type:"text",placeholder:"...",value:y,onChange:W=>_(W.target.value),className:"w-full bg-slate-50 text-slate-800 rounded-xl px-3 py-2 text-sm outline-none border border-transparent focus:border-guam-teal"}),g.jsx("input",{type:"email",placeholder:"Google Email ()",value:E,onChange:W=>A(W.target.value),className:"w-full bg-slate-50 text-slate-800 rounded-xl px-3 py-2 text-sm outline-none border border-transparent focus:border-guam-teal"})]})]}),g.jsx("button",{onClick:q,disabled:!y.trim()||!E.trim()||b,className:"w-full py-3 rounded-xl bg-guam-teal text-white font-bold text-sm shadow-lg shadow-guam-teal/30 disabled:opacity-50 disabled:cursor-not-allowed mb-2",children:""}),l?.role==="Admin"&&f&&g.jsxs("button",{onClick:f,className:"w-full py-2 rounded-xl bg-slate-100 text-slate-500 font-bold text-xs flex items-center justify-center hover:bg-slate-200 transition-colors mb-2",children:[g.jsx(A2,{size:14,className:"mr-2"})," /"]}),g.jsxs("button",{onClick:()=>{e(),h()},className:"w-full py-3 rounded-xl border border-red-100 bg-red-50 text-red-500 font-bold text-sm flex items-center justify-center hover:bg-red-100 transition-colors",children:[g.jsx(j2,{size:16,className:"mr-2"}),"  (",l?.name,")"]})]}),!1]})})},oA=r=>r.reduce((e,t,i)=>(e[i.toString()]=t,e),{}),aA=r=>Array.isArray(r)?r:Object.keys(r).sort((t,i)=>parseInt(t)-parseInt(i)).map(t=>r[t]),Ey=r=>Object.entries(r).reduce((e,[t,i])=>(i!==void 0&&(e[t]=i),e),{}),lA=()=>{const[r,e]=me.useState(null),[t,i]=me.useState(!1),[o,l]=me.useState("itinerary"),[h,f]=me.useState(0),[y,_]=me.useState(gr.itinerary),[E,A]=me.useState(gr.shopping),[b,M]=me.useState(gr.expenses),[P,H]=me.useState(gr.planning||[]),[F,q]=me.useState(Bu),[W,ne]=me.useState(gr.flights||[]),[se,Ee]=me.useState(G2),[ie,R]=me.useState(q2),[T,k]=me.useState(!1),[N,j]=me.useState(!1),[V,S]=me.useState(!1),[ot,wt]=me.useState(!1),[Pt,ze]=me.useState(!1),[te,ye]=me.useState(!1),[oe,O]=me.useState(!1),[G,fe]=me.useState(null),[Ce,Ne]=me.useState(null),[Pe,je]=me.useState(null),[Oe,qe]=me.useState(null),[xt,jn]=me.useState(null),ht=async(re,le)=>{if(ut&&r)try{let ge=le;if(re==="itinerary"&&Array.isArray(le)&&(ge=oA(le)),JSON.stringify({data:ge}).length>1e6)throw new Error(" (1MB)");await Ru(er(ut,"trip_data",re),{data:ge})}catch(ge){console.error(`Error saving ${re}`,ge),alert(` (${re}): ${ge.message}`)}};me.useEffect(()=>{const re=async()=>{try{const Ge=await(await fetch("https://api.open-meteo.com/v1/forecast?latitude=13.4443&longitude=144.7937&daily=weather_code,temperature_2m_max&timezone=Pacific%2FGuam&forecast_days=5")).json();if(Ge.daily&&Ge.daily.time){const We=Ge.daily.time.map((Et,Be)=>{const Ye=Ge.daily.weather_code[Be],Ln=Math.round(Ge.daily.temperature_2m_max[Be]).toString();let sr="sunny";return Ye>3&&Ye<50&&(sr="cloudy"),Ye>=50&&(sr="rain"),{condition:sr,temp:Ln}});We.length===5&&Ee(We)}}catch(nt){console.error("Failed to fetch real-time weather.",nt)}},le=async()=>{if(!T)try{const Ge=await(await fetch("https://tw.rter.info/capi.php")).json();if(Ge.USDTWD&&Ge.USDTWD.Exrate){let We=parseFloat(Ge.USDTWD.Exrate);We=Math.round(We*100)/100,We&&!isNaN(We)&&(console.log(`Updated Exchange Rate from rter.info: ${We}`),R(Et=>T?Et:We))}}catch(nt){console.error("Failed to fetch rter.info exchange rate.",nt);try{const We=await(await fetch("https://api.exchangerate-api.com/v4/latest/USD")).json();if(We.rates&&We.rates.TWD){const Et=Math.round(We.rates.TWD*100)/100;console.log(`Fallback Exchange Rate: ${Et}`),R(Be=>T?Be:Et)}}catch{console.error("All exchange rate APIs failed.")}}};re();const ge=setTimeout(le,1e3);return()=>clearTimeout(ge)},[T]),me.useEffect(()=>{const re=setTimeout(()=>{t||i(!0)},3e3);if(!$r)return i(!0),()=>clearTimeout(re);const le=zI($r,async ge=>{if(ge){const nt=(ge.email||"").toLowerCase();console.log("Auth State Changed: Logged in as",nt);const Ge=Bu.find(Et=>Et.email?.toLowerCase()===nt);if(Ge){e({id:Ge.id,name:Ge.name,email:ge.email,avatarUrl:Ge.avatarUrl||ge.photoURL||void 0,role:Ge.role||"Member"}),i(!0);return}let We;if(ut)try{const Et=await i0(jd(ut,"users"));Et.empty||(We=Et.docs.map(Ye=>({id:Ye.id,...Ye.data()})).find(Ye=>Ye.email?.toLowerCase()===nt))}catch(Et){console.error("Auth check: DB fetch failed",Et)}We?e({id:We.id,name:We.name,email:ge.email,avatarUrl:We.avatarUrl||ge.photoURL||void 0,role:We.role||"Member"}):(console.warn(`User ${nt} not in whitelist. Signing out.`),await Vd($r),e(null))}else e(null);i(!0)});return()=>{le(),clearTimeout(re)}},[]),me.useEffect(()=>{if(!ut||!r)return;const re=mi(jd(ut,"users"),Be=>{if(!Be.empty){const Ye=Be.docs.map(Ln=>({id:Ln.id,...Ln.data()}));q(Ye)}}),le=mi(er(ut,"trip_data","itinerary"),Be=>{if(Be.exists()){const Ye=Be.data().data;_(Array.isArray(Ye)?Ye:aA(Ye))}else ht("itinerary",gr.itinerary)}),ge=mi(er(ut,"trip_data","shopping"),Be=>{Be.exists()?A(Be.data().data):ht("shopping",gr.shopping)}),nt=mi(er(ut,"trip_data","expenses"),Be=>{Be.exists()?M(Be.data().data):ht("expenses",gr.expenses)}),Ge=mi(er(ut,"trip_data","planning"),Be=>{Be.exists()?H(Be.data().data):ht("planning",gr.planning)}),We=mi(er(ut,"trip_data","flights"),Be=>{Be.exists()?ne(Be.data().data):ht("flights",gr.flights)}),Et=mi(er(ut,"trip_data","settings"),Be=>{if(Be.exists()){const Ye=Be.data();Ye.exchangeRate&&(console.log("Loaded manual exchange rate from Firestore:",Ye.exchangeRate),R(Ye.exchangeRate),k(!0))}});return()=>{re(),le(),ge(),nt(),Ge(),We(),Et()}},[r?.id]);const rr=async re=>{if(R(re),k(!0),ut)try{await Ru(er(ut,"trip_data","settings"),{exchangeRate:re,updatedAt:Date.now()},{merge:!0})}catch(le){console.error("Failed to save exchange rate",le)}},Ar=re=>{e(re),localStorage.setItem("trip_user_id",re.id)},Zr=async()=>{$r&&await Vd($r),e(null),localStorage.removeItem("trip_user_id")},Fs=()=>{o==="itinerary"?(fe(null),j(!0)):o==="shopping"?(je(null),S(!0)):o==="expenses"?(Ne(null),wt(!0)):o==="planning"&&(qe(null),ze(!0))},zs=re=>{const le=[...y],ge=[...le[h]];if(G){const nt=ge.findIndex(Ge=>Ge.id===G.id);nt!==-1&&(ge[nt]={...G,...re})}else{const nt={...re,id:Date.now()};ge.push(nt),ge.sort((Ge,We)=>Ge.startTime>We.startTime?1:-1)}le[h]=ge,_(le),ht("itinerary",le),fe(null)},Pi=re=>{const le=[...y];le[h]=le[h].filter(ge=>ge.id!==re),_(le),ht("itinerary",le)},es=re=>{let le;Pe?(le=E.map(ge=>ge.id===Pe.id?{...ge,...re}:ge),je(null)):le=[...E,{...re,id:Date.now()}],A(le),ht("shopping",le)},On=re=>{const le=E.filter(ge=>ge.id!==re);A(le),ht("shopping",le)},Mn=re=>{let le;Ce?(le=b.map(ge=>ge.id===Ce.id?{...ge,...re}:ge),Ne(null)):le=[{...re,id:Date.now(),date:new Date().toLocaleDateString("en-US",{month:"numeric",day:"numeric"})},...b],M(le),ht("expenses",le)},Bs=re=>{const le=b.filter(ge=>ge.id!==re);M(le),ht("expenses",le)},ts=re=>{let le;Oe?(le=P.map(ge=>ge.id===Oe.id?{...ge,...re}:ge),qe(null)):le=[...P,{...re,id:Date.now()}],H(le),ht("planning",le)},ns=re=>{const le=P.map(ge=>ge.id===re?{...ge,completed:!ge.completed}:ge);H(le),ht("planning",le)},$s=re=>{const le=P.filter(ge=>ge.id!==re);H(le),ht("planning",le)},mt=re=>{const le=W.map(ge=>ge.id===re.id?re:ge);ne(le),ht("flights",le)},gt=async re=>{if(ut)try{const le=Ey(re);await Ru(er(ut,"users",re.id),le)}catch(le){console.error("Error adding member to DB",le),alert("")}q([...F,re])},Vn=async re=>{if(ut)try{await YT(er(ut,"users",re))}catch(le){console.error("Error deleting member from DB",le)}q(F.filter(le=>le.id!==re))},Hs=async()=>{if(!(!ut||!r)&&confirm(`
( Google )`))try{for(const re of Bu){const le=Ey(re);await Ru(er(ut,"users",re.id),le,{merge:!0})}alert("")}catch(re){console.error("Sync Error:",re),alert(": "+re.message)}};return t?r?g.jsxs("div",{className:"app-container max-w-[480px] mx-auto min-h-screen bg-guam-sand relative shadow-[0_0_40px_rgba(13,148,136,0.1)]",children:[g.jsx(H2,{currentTab:o,onTabChange:l,title:ko.title,subtitle:ko.subtitle,coverImage:ko.coverImage,onOpenMembers:()=>ye(!0)}),g.jsxs("main",{className:"px-4 pt-6 relative z-0",children:[o==="itinerary"&&g.jsx(Q2,{dates:W2,weather:se,items:y[h],selectedDateIndex:h,onDateSelect:f,onEdit:re=>{fe(re),j(!0)}}),o==="info"&&g.jsx(X2,{flights:W,onFlightClick:re=>{jn(re),O(!0)},exchangeRate:ie,onRateUpdate:rr}),o==="shopping"&&g.jsx(Y2,{items:E,onRemove:On,onAddClick:()=>S(!0),onEdit:re=>{je(re),S(!0)}}),o==="planning"&&g.jsx(Z2,{items:P,onToggle:ns,onRemove:$s,onEdit:re=>{qe(re),ze(!0)}}),o==="expenses"&&g.jsx(J2,{expenses:b,onRemove:Bs,onEdit:re=>{Ne(re),wt(!0)},members:F,exchangeRate:ie})]}),o!=="info"&&g.jsx("button",{onClick:Fs,className:"fixed bottom-24 right-6 w-14 h-14 bg-guam-coral text-white rounded-full shadow-[0_4px_20px_rgba(251,113,133,0.6)] text-xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all z-40",children:g.jsx(i_,{size:24})}),g.jsx(eA,{isOpen:N,onClose:()=>j(!1),onSave:zs,initialData:G,onDelete:Pi}),g.jsx(tA,{isOpen:V,onClose:()=>S(!1),onSave:es,initialData:Pe}),g.jsx(nA,{isOpen:ot,onClose:()=>wt(!1),onSave:Mn,members:F,initialData:Ce}),g.jsx(rA,{isOpen:Pt,onClose:()=>ze(!1),onSave:ts,members:F,initialData:Oe}),g.jsx(iA,{isOpen:te,onClose:()=>ye(!1),members:F,onAddMember:gt,onRemoveMember:Vn,currentUser:r,onLogout:Zr,onSyncDB:Hs}),g.jsx(sA,{isOpen:oe,onClose:()=>O(!1),flight:xt,onSave:mt})]}):g.jsx(K2,{members:F,onLogin:Ar}):g.jsx("div",{className:"min-h-screen bg-guam-sand flex items-center justify-center",children:g.jsxs("div",{className:"animate-pulse text-guam-teal flex flex-col items-center",children:[g.jsx("div",{className:"w-8 h-8 border-4 border-guam-teal border-t-transparent rounded-full animate-spin mb-2"}),"Loading..."]})})},a_=document.getElementById("root");if(!a_)throw new Error("Could not find root element to mount to");const uA=xw.createRoot(a_);uA.render(g.jsx(pw.StrictMode,{children:g.jsx(lA,{})}));
